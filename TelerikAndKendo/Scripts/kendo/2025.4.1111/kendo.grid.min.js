/**
 * Kendo UI v2025.4.1111 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.data.js"),require("kendo.columnsorter.js"),require("kendo.editable.js"),require("kendo.window.js"),require("kendo.aiprompt.js"),require("kendo.badge.js"),require("kendo.filtermenu.js"),require("kendo.filtercell.js"),require("kendo.columnmenu.js"),require("kendo.groupable.js"),require("kendo.pager.js"),require("kendo.selectable.js"),require("kendo.sortable.js"),require("kendo.reorderable.js"),require("kendo.resizable.js"),require("kendo.ooxml.js"),require("kendo.excel.js"),require("kendo.pane.js"),require("kendo.pdf.js"),require("kendo.dialog.js"),require("kendo.switch.js"),require("kendo.html.button.js"),require("kendo.textbox.js"),require("kendo.form.js"),require("kendo.toolbar.js"),require("kendo.icons.js"),require("kendo.menu.js"),require("kendo.loader.js"),require("kendo.html.loadercontainer.js"),require("kendo.loaderContainer.chunk.js")):"function"==typeof define&&define.amd?define(["exports","kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.aiprompt.min","kendo.badge.min","kendo.filtermenu.min","kendo.filtercell.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.ooxml.min","kendo.excel.min","kendo.pane.min","kendo.pdf.min","kendo.dialog.min","kendo.switch.min","kendo.html.button.min","kendo.textbox.min","kendo.form.min","kendo.toolbar.min","kendo.icons.min","kendo.menu.min","kendo.loader.min","kendo.html.loadercontainer.min","kendo.loaderContainer.chunk.min"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Grid={}),e.kendo._globals.Data,e.kendo._globals.Columnsorter,e.kendo._globals.Editable,e.kendo._globals.Window,e.kendo._globals.Aiprompt,e.kendo._globals.Badge,e.kendo._globals.Filtermenu,e.kendo._globals.Filtercell,e.kendo._globals.Columnmenu,e.kendo._globals.Groupable,e.kendo._globals.Pager,e.kendo._globals.Selectable,e.kendo._globals.Sortable,e.kendo._globals.Reorderable,e.kendo._globals.Resizable,e.kendo._globals.Ooxml,e.kendo._globals.Excel,e.kendo._globals.Pane,e.kendo._globals.Pdf,e.kendo._globals.Dialog,e.kendo._globals.Switch,e.kendo._globals.HtmlButton,e.kendo._globals.Textbox,e.kendo._globals.Form,e.kendo._globals.Toolbar,e.kendo._globals.Icons,e.kendo._globals.Menu,e.kendo._globals.Loader,e.kendo._globals.HtmlLoadercontainer,e.kendo._globals.LoaderContainerChunk)}(this,(function(e,t,o,r,l,n,i,a,s,d,c,u,p,h,g,f,m,b,k,_,v,C,w,y,S,x,T,H,R,I,A){!function(e){var t=window.kendo,o=t.ui.ContextMenu,r=e.extend,l=t.htmlEncode;var n="action";var i=o.extend({init:function(e,t){var r=this;o.fn.init.call(r,e,t),r._overrideTemplates(),r._extendItems(),r.bind("select",r._onSelect.bind(r)),r.bind("open",r._onOpen.bind(r))},_overrideTemplates:function(){this.templates.sprite=({icon:e,spriteCssClass:o})=>`${e||o?t.ui.icon({icon:l(e||""),iconClass:l(o||"")}):""}`},defaultItems:{separator:{name:"separator",separator:!0},create:{name:"create",text:"Add",icon:"plus",command:"AddCommand",rules:"isEditable"},edit:{name:"edit",text:"Edit",icon:"pencil",command:"EditCommand",rules:"isEditable"},destroy:{name:"destroy",text:"Delete",icon:"trash",command:"DeleteCommand",rules:"isEditable"},select:{name:"select",text:"Select",icon:"table-body",rules:"isSelectable",items:[{name:"selectRow",text:"Row",icon:"table-row-groups",command:"SelectRowCommand"},{name:"selectAllRows",text:"All rows",icon:"grid",command:"SelectAllRowsCommand"},{name:"clearSelection",text:"Clear selection",icon:"table-unmerge",softRules:"hasSelection",command:"ClearSelectionCommand"}]},copySelection:{name:"copySelection",text:"Copy selection",icon:"page-header-section",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand",options:"withHeaders"},copySelectionNoHeaders:{name:"copySelectionNoHeaders",text:"Copy selection (No Headers)",icon:"file-txt",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand"},paste:{name:"paste",text:"Paste (use CTRL/⌘ + V)",rules:"allowPaste",softRules:"alwaysDisabled",icon:"clipboard"},reorderRow:{name:"reorderRow",text:"Reorder row",icon:"caret-alt-expand",rules:"isRowReorderable",softRules:"isSorted",items:[{name:"reorderRowUp",text:"Up",icon:"caret-alt-up",command:"ReorderRowCommand",options:"dir:up"},{name:"reorderRowDown",text:"Down",icon:"caret-alt-down",command:"ReorderRowCommand",options:"dir:down"},{name:"reorderRowTop",text:"Top",icon:"caret-alt-to-top",command:"ReorderRowCommand",options:"dir:top"},{name:"reorderRowBottom",text:"Bottom",icon:"caret-alt-to-bottom",command:"ReorderRowCommand",options:"dir:bottom"}]},exportPDF:{name:"exportPDF",text:"Export to PDF",icon:"file-pdf",command:"ExportPDFCommand"},exportExcel:{name:"exportExcel",text:"Export to Excel",icon:"file-excel",items:[{name:"exportToExcelAll",text:"All",command:"ExportExcelCommand"},{name:"exportToExcelSelection",text:"Selection",command:"ExportExcelCommand",softRules:"hasSelection",options:"selection,withHeaders"},{name:"exportToExcelSelectionNoHeaders",text:"Selection (No Headers)",softRules:"hasSelection",command:"ExportExcelCommand",options:"selection"}]},sortAsc:{name:"sortAsc",text:"Sort Ascending",icon:"sort-asc-small",rules:"isSortable",command:"SortCommand",options:"dir:asc"},sortDesc:{name:"sortDesc",text:"Sort Descending",icon:"sort-desc-small",rules:"isSortable",command:"SortCommand",options:"dir:desc"},moveGroupPrevious:{name:"moveGroupPrevious",text:"Move previous",icon:"arrow-left",rules:"isGroupable",softRules:"canMoveGroupPrev",command:"MoveGroupCommand",options:"dir:prev"},moveGroupNext:{name:"moveGroupNext",text:"Move next",icon:"arrow-right",rules:"isGroupable",softRules:"canMoveGroupNext",command:"MoveGroupCommand",options:"dir:next"}},events:o.fn.events.concat([n]),_onSelect:function(t){var o=e(t.item).data("command");var r=e(t.item).data("options");r=r?r.split(",").map((e=>{if(e.indexOf(":")>-1){var[t,e]=e.split(":");return{[t||"_"]:e}}return{[e]:!0}})).reduce(((e,t)=>Object.assign(e,t)),{}):{};var l=e(t.target);o&&this.action({command:o,options:Object.assign(r,{target:l})})},_onOpen:function(o){var r=o.sender,l=r.options.items,n=e(o.event?o.event.target:null);!l&&e.isEmptyObject(this.defaultItems)||n.closest(".k-grid-column-menu").length?o.preventDefault():(this._toggleSeparatorVisibility(),r.element.find(`[${t.attr("soft-rules")}]`).each(((o,l)=>{var i=e(l).attr(t.attr("soft-rules")).split(";");r.enable(l,this._validateSoftRules(i,n))})))},_toggleSeparatorVisibility:function(){this.element.find(".k-item.k-separator").filter(((t,o)=>{var r=e(o).prev(".k-item:not(.k-separator)");var l=e(o).next(".k-item:not(.k-separator)");return!(r.length&&l.length)})).hide()},_extendItems:function(){var t,o=this,r=o.options.items;if(r&&r.length)for(var l=0;l<r.length;l++)t=r[l],e.isPlainObject(t)&&1===Object.keys(t).length&&t.name&&(t=t.name),e.isPlainObject(t)?o._append(t):o.defaultItems[t]?(t=o.defaultItems[t],o._append(t)):"string"==typeof t&&(t={name:t,text:t,spriteCssClass:t,command:t+"Command"},o._append(t));else for(var n in o.defaultItems)t=o.defaultItems[n],o._append(t)},_extendItem:function(e){var o=this,l=o.options.messages,n=e.attr||{};if(e.command&&(n[t.attr("command")]=e.command),e.options&&(n[t.attr("options")]=e.options),e.softRules&&(n[t.attr("soft-rules")]=e.softRules),e.items)for(var i=0;i<e.items.length;i++)e.items.forEach((e=>{o._extendItem(e)}));r(e,{text:l.commands[e.name],icon:e.icon||"",spriteCssClass:e.spriteCssClass||"",attr:n,uid:t.guid()})},_validateSoftRules:function(e,t){if(!e||!e||!e.length)return!0;for(var o=0;o<e.length;o++)if(!this._readState(e[o],t))return!1;return!0},_validateRules:function(e){var t=e.rules?e.rules.split(";"):[];if(!t.length)return!0;for(var o=0;o<t.length;o++)if(!this._readState(t[o]))return!1;return!0},_readState:function(e,o){var r=this.options.states;return t.isFunction(r[e])?r[e](o):r[e]},_append:function(e){var t=this;t._extendItem(e),t._validateRules(e)&&t.append(e)},action:function(e){this.trigger(n,e)}});t.ui.grid=t.ui.grid||{},r(t.ui.grid,{ContextMenu:i})}(window.kendo.jQuery),function(e){var t=window.kendo,o=e.extend;var r=t.Class.extend({init:function(e){this.options=e,this.grid=e.grid}});var l=r.extend({exec:function(){var e=this.grid.groupable,t=this.options,o=t.target.closest(".k-chip"),r="next"===t.dir?"after":"before";("next"===t.dir?o.next():o.prev())[r](o),e._change()}});var n=r.extend({exec:function(){var e,t,o=this.grid,r=o.dataSource,l=r.sort()||[],n=this.options,i=n.dir,a=o._getCellField(n.target),s=o.options.sortable.mode&&"multiple"===o.options.sortable.mode,d=o.options.compare;if(s){for(t=0,e=l.length;t<e;t++)if(l[t].field===a){l.splice(t,1);break}l.push({field:a,dir:i,compare:d})}else l=[{field:a,dir:i,compare:d}];r.sort(l)}});var i=r.extend({exec:function(){this.grid.addRow()}});var a=r.extend({exec:function(){var e=this,t=e.grid,o="incell"===t._editMode(),r=o?e.options.target:e.options.target.closest("tr");o?t.editCell(r):t.editRow(r)}});var s=r.extend({exec:function(){var e=this.grid,t=this.options.target.closest("tr");e.removeRow(t)}});var d=r.extend({exec:function(){var e=this.grid,t=this.options.withHeaders;e.copySelectionToClipboard(t)}});var c=r.extend({exec:function(){var e=this.grid,o=t.ui.Selectable.parseOptions(e.options.selectable),r=this.options.target.closest("tr");e.select(o.cell?r.find("td"):r)}});var u=r.extend({exec:function(){var e=this.grid,o=t.ui.Selectable.parseOptions(e.options.selectable),r=e.items();e.select(o.cell?r.find("td"):r)}});var p=r.extend({exec:function(){this.grid.clearSelection()}});var h=r.extend({exec:function(){var e,t=this,o=t.grid,r=t.options.dir,l=t.options.target.closest("tr"),n=l.index();switch(r){case"up":e=n-1;break;case"down":e=n+2;break;case"top":e=0;break;case"bottom":e=o.items().length}o.reorderRowTo(l,e)}});var g=r.extend({exec:function(){this.grid.saveAsPDF()}});var f=r.extend({exec:function(){var e=this,t=e.options.selection,o=e.options.withHeaders,r=e.grid;t?r.exportSelectedToExcel(o):r.saveAsExcel()}});t.ui.grid=t.ui.grid||{},o(t.ui.grid,{GridCommand:r,commands:{SortCommand:n,AddCommand:i,EditCommand:a,DeleteCommand:s,CopySelectionCommand:d,SelectRowCommand:c,SelectAllRowsCommand:u,ClearSelectionCommand:p,ReorderRowCommand:h,ExportPDFCommand:g,ExportExcelCommand:f,MoveGroupCommand:l}})}(window.kendo.jQuery);!function(e,t){let o=window.kendo,r=o.ui,l=o.data.DataSource,n=o.data.ObservableObject,i=o.support.tbodyInnerHtml,a=o._activeElement,s=r.Widget,d=o._outerWidth,c=o._outerHeight,u=o.keys,p=o.type,h=e.isPlainObject,g=e.extend,f=e.map,m=e.grep,b=Array.isArray,k=e.inArray,_=Array.prototype.push,v=o.isFunction,C=o.htmlEncode,w=e.isEmptyObject,y=e.contains,S=Math,x=".",T="progress",H="error",R=":not(.k-group-cell):not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible",I=":not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))",E="tr:not(.k-footer-template):visible",M=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",z="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",F="col:not(.k-group-col, .k-hierarchy-col)",D="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",L="a[class*='-i-caret-alt-down']",P="a[class*='-i-caret-alt-right']",B=P,O="k-grid-stack",q=".kendoGrid",V="edit",G="beforeEdit",W="save",$="remove",N="detailInit",j="filterMenuInit",U="columnMenuInit",K="filterMenuOpen",Q="columnMenuOpen",Y="cellClose",J="changing",X="change",Z="columnHide",ee="columnShow",te="saveChanges",oe="dataBound",re="detailExpand",le="detailCollapse",ne="itemchange",ie="page",ae="paging",se="paste",de="scroll",ce="sync",ue="loadStart",pe="loadEnd",he="requestEnd",ge="k-focus",fe="k-highlighted",me="k-hover",be="k-active",ke=":kendoFocusable",_e=".k-command-cell,.k-select-checkbox,.k-grid-stack-cell[tabindex]",ve="k-selected",Ce="k-checkbox",we="input[data-role='checkbox'].k-select-checkbox."+Ce,ye="k-grid-norecords",Se="k-link",xe="k-icon",Te="k-svg-icon",He="k-sort-order",Re="k-sorted",Ie="k-header",Ae="k-grid-column-menu",Ee="k-grid-filter-menu",Me="k-grid-content-sticky",ze="k-grid-header-sticky",Fe="k-grid-footer-sticky",De="k-grid-no-left-border",Le="k-grid-column-template",Pe="k-grouping-row",Be="resize",Oe="rowResize",qe="columnResize",Ve="columnReorder",Ge="columnLock",We="columnUnlock",$e="columnStick",Ne="columnUnstick",je="rowReorder",Ue="navigate",Ke="click",Qe="mousedown",Ye="mouseup",Je="mouseenter",Xe="mouseleave",Ze="mousemove",et="dblclick",tt="height",ot="width",rt="auto",lt="tabIndex",nt="function",it="string",at="bottom",st="container-for",dt="field",ct="input",ut="incell",pt="inline",ht="overflow",gt="sort",ft="group-sort",mt="Collapse",bt="Expand",kt="id",_t="px",vt="tr",Ct="div",wt="aria-label",yt="aria-owns",St="aria-rowcount",xt="aria-colcount",Tt="aria-colindex",Ht="aria-rowindex",Rt="aria-expanded",It="aria-checked",At="aria-activedescendant",Et="role",Mt="none",zt="row",Ft="rowgroup",Dt="columnheader",Lt="gridcell",Pt=/(\}|\#)/gi,Bt="[\\x20\\t\\r\\n\\f]",Ot=(new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(^|"+Bt+")(k-group-cell|k-hierarchy-cell)("+Bt+"|$)")),qt=new RegExp("(^|"+Bt+")(k-filter-row)("+Bt+"|$)"),Vt=({className:e,attr:t,text:r})=>`<button type="button" class="${e}" ${t}>${o.htmlEncode(r)}</button>`,Gt=(e,t,o)=>`<span class="k-checkbox-wrap"><input tabindex="-1" class="k-select-checkbox ${Ce} ${e} k-rounded-md" data-role="checkbox" aria-label="${t}" aria-checked="false" type="checkbox"></span>${o?`<label class="k-checkbox-label">${o}</label>`:""}`,Wt=({size:e})=>Gt(e,"Select row"),$t=({size:e,label:t})=>Gt(e,"Select all rows",t),Nt=()=>o.ui.icon("reorder"),jt=({text:e})=>`<span class="k-cell-inner"><span class="k-link"><span class="k-column-title">${e}</span></span></span>`,Ut=!1,Kt=o.support.browser;var Qt=Kt.msie&&11===Kt.version;var Yt=/Mac OS/.test(navigator.userAgent);var Jt="k-content",Xt="k-scroll-container",Zt="k-cell-inner";var eo;var to=["copySelection","copySelectionNoHeaders","paste","separator","create","edit","destroy","select","separator","reorderRow","exportPDF","exportExcel","separator"];var oo=["sortAsc","sortDesc","separator"];var ro=["moveGroupPrevious","moveGroupNext","separator"];const lo=[".k-grid-edit-command",".k-grid-remove-command",".k-grid-save-changes",".k-grid-cancel-changes",".k-grid-cancel-command",".k-grid-save-command"].join(", ");const no=function(e){return{sort:[{command:"clear-sort",text:e.clearButtons?e.clearButtons.clearSorting:"Clear Sorting",size:"large",fillMode:"solid",themeColor:"base",icon:"x"},{command:"done",text:e.applyButtons?e.applyButtons.applySorting:"Done",size:"large",themeColor:"primary",icon:"check"}],group:[{command:"clear-group",text:e.clearButtons?e.clearButtons.clearGrouping:"Clear Grouping",size:"large",fillMode:"solid",themeColor:"base",icon:"x"},{command:"done",text:e.applyButtons?e.applyButtons.applyGrouping:"Done",size:"large",themeColor:"primary",icon:"check"}],filter:[{command:"clear-filter",text:e.clearButtons?e.clearButtons.clearFiltering:"Clear All Filters",size:"large",fillMode:"solid",themeColor:"base",icon:"filter-clear"}],"column-chooser":[{text:e.clearButtons?e.clearButtons.columnChooserReset:"Reset",icon:"arrow-rotate-ccw"},{text:e.applyButtons?e.applyButtons.columnChooserApply:"Apply",themeColor:"primary",icon:"check"}]}};r.Pager&&(eo=r.Pager.extend({init:function(e,t){r.Pager.fn.init.call(this,e,g(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){return Math.ceil((this._collapsedTotal()||0)/(this.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e&&e.groupsTotal(!0)||0}}));var io=s.extend({init:function(e,t){var o=this;s.fn.init.call(o,e,t),o._refreshHandler=o.refresh.bind(o),o.setDataSource(t.dataSource),o.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(X,t._refreshHandler),t.dataSource=e,t.dataSource.bind(X,t._refreshHandler),t.dataSource.options.useRanges=!0,t.dataSource.options.virtual=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[ae,ie,de,ue,pe],destroy:function(){var e=this;s.fn.destroy.call(e),e.dataSource.unbind(X,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(q),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,r=this,l=o.support.scrollbar()+1,n=r.element;n.css({width:rt,overflow:"hidden"}).css(Ut?"padding-left":"padding-right",l),r.content=n.children().first(),t=r.wrapper=r.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().on("DOMMouseScroll"+q+" mousewheel"+q,r._wheelScroll.bind(r)),r._wrapper(),(o.support.kineticScrollNeeded||o.support.touch)&&(r.wrapper.css("touch-action",Mt),r.drag=new o.UserEvents(r.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){r.verticalScrollbar.scrollTop(r.verticalScrollbar.scrollTop()-e.y.delta),o.scrollLeft(t,o.scrollLeft(t)-e.x.delta),e.preventDefault()}})),r.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" tabindex="-1"/>').css({width:l}).appendTo(n).on("scroll"+q,r._scroll.bind(r))},_wrapper:function(){Qt&&(this.wrapper.css({"overflow-y":de}),this.element.css(Ut?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),l=o.wheelDeltaY(e);!l||l>0&&0===r||l<0&&r+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-l))}},_scroll:function(e){var t=this,o=!t.options.prefetch,r=e.currentTarget.scrollTop,l=t.dataSource,n=t.itemHeight,i=l.skip()||0,a=t._rangeStart||i,s=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>r),c=S.max(S.floor(r/n),0),u=d?S.ceil(s/n):S.floor(s/n),p=S.max(c+u,0);t._preventScroll?t._preventScroll=!1:(t._prevScrollTop=t._scrollTop,t._scrollTop=r-a*n,t._scrollbarTop=r,t._scrolling=o,t._fetch(c,p,d)||(t.wrapper[0].scrollTop=t._scrollTop),t.trigger(de),o&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout((function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())}),100)))},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this;var t=this.wrapper;var r=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&r||e._isScrolledToBottom())&&(t.scrollTop(r+o.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(r-o.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e,t){var o=this;var r=o.verticalScrollbar;r.scrollTop()!==e&&(o._preventScroll=!0),o.wrapper.scrollTop(e),o._scrollTop=o.wrapper.scrollTop(),r.scrollTop(t??e),o._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar;var t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t=this._rangeStart||this.dataSource.skip()||0;var o=this.dataSource.pageSize();var r;return(r=e>t?e-t:t-e-1)>o?o:r},scrollIntoView:function(e){var t=this.wrapper[0];var o=t.clientHeight;var r=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop;var l=e[0].offsetTop;var n=e[0].offsetHeight;r>l?this.verticalScrollbar[0].scrollTop-=o/2:l+n>=r+o&&(this.verticalScrollbar[0].scrollTop+=o/2)},_fetch:function(t,o,r){var l=this,n=l.dataSource,i=l.itemHeight,a=n.take(),s=l._rangeStart||n.skip()||0,d=S.floor(t/a)*a,c=!1;var u=l.verticalScrollbar;var p=Kt.webkit?1:0;var h=n._isGroupPaged()?n.groupsTotal(!0):n.total();return t<s?(c=!0,l._alwaysScrollTop?(s=S.min(t,h-a),l._scrollTop=0):(s=S.max(0,o-a),l._scrollTop=u.scrollTop()-s*i),l._page(s,a)):o>=s+a&&!r?(c=!0,s=S.min(t,h-a),u.scrollTop()>=u[0].scrollHeight-u[0].offsetHeight-p?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight:l.dataSource._isGroupPaged()&&t>=h-a?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight-(l._scrollTop-l._prevScrollTop):l._alwaysScrollTop?l._scrollTop=0:l._scrollTop=i,l._page(s,a)):!l._fetching&&l.options.prefetch&&(t<d+a-.33*a&&t>a&&n.prefetch(d-a,a,e.noop),o>d+.33*a&&n.prefetch(d+a,a,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,o,r){var l=this,n=!l.options.prefetch,i=l.dataSource,a=i._isGroupPaged();r=v(r)?r:e.noop,l.trigger(ae,{skip:t,take:o})||(clearTimeout(l._timeout),l._fetching=!0,l._rangeStart=t,a&&i._groupRangeExists(t,t+o)||!a&&i.inRange(t,o)?(l.trigger(ue),i.range(t,o,(function(){l.trigger(pe),r(),l.trigger(ie)}),"page")):(n||l.trigger(ue),l._timeout=setTimeout((function(){l._scrolling||(n&&l.trigger(ue),i.range(t,o,(function(){l.trigger(pe),r(),l.trigger(ie)})))}),100)))},repaintScrollbar:function(t){var r,l,n=this,i=n.options.maxScrollHeight,a=n.dataSource,s=o.support.kineticScrollNeeded?0:o.support.scrollbar(),d=n.wrapper[0];var c=n._isScrolledToBottom();l=n.itemHeight=n.options.itemHeight()||0;var u=d.scrollWidth>d.offsetWidth?s:0;r=(a._isGroupPaged()?a.groupsTotal(!0):a.total())*l+u;var p=e(new Array(S.floor(r/i)+1).join("<div></div>")).css({width:"1px",height:`${i}px`});r%i&&(p=p.add(e("<div></div>").css({width:"1px",height:r%i+"px"}))),n.verticalScrollbar.empty().append(p),!c||n._isScrolledToBottom()||n.dataSource._isGroupPaged()||n.scrollToBottom(),void 0!==n._scrollTop&&t&&(d.scrollTop=n._scrollTop,n._scrollWrapperOnColumnResize())},refresh:function(e){var t=this,o=t.dataSource,r=t._rangeStart;var l=(e||{}).action;var n=t._isScrolledToBottom()||!l||l!==ne&&l!==$&&l!==ce;t.trigger(pe),clearTimeout(t._timeout),t.repaintScrollbar(n),t.drag&&t.drag.cancel(),void 0===r||t._fetching||((!l||l!==ce&&l!==ne&&"expandGroup"!==l)&&(t._rangeStart=o.skip()),1!==o.page()||l&&(l===ce||l===ne||"expandGroup"===l||"collapseGroup"===l)||(t.verticalScrollbar[0].scrollTop=0)),t._programmaticallyScrolling&&"resolved"!==t._programmaticallyScrolling.state()&&t._programmaticallyScrolling.resolve(),t._alwaysScrollTop&&delete t._alwaysScrollTop,t._fetching=!1}});function ao(e){if(!e||!Array.isArray(e.filters))return[];const t=[];return e.filters.forEach((function e(o){o.logic&&o.filters?o.filters.forEach(e):o.field&&o.operator&&t.push({...o})})),t}function so(e){if(!e||!Array.isArray(e))return[];const t=[];return e.forEach((function e(o){t.push({...o}),o.items&&Array.isArray(o.items)&&o.items.forEach((t=>{t.items&&e(t)}))})),t}function co(e){return e&&Array.isArray(e)?e:[]}function uo(e,t){let o={sort:co,filter:ao,group:so}[t];if(!o)return!1;return o(e).some((e=>!e.field))}function po(e,t){return"["+o.attr(e)+"="+t+"]"}function ho(e){return new Array(e+1).join('<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>')}function go(e){var t,o=" ";if(e){if(typeof e===it)return e;for(t in e)""!==e[t]&&(o+=t+'="'+e[t]+'"')}return o}function fo(e,t){return t?e.map((e=>({...e,logic:(e?.logic||e?.logicalOperator||"and").toLowerCase(),filters:e?.filters?.map((e=>{const o=e.field;return t&&t[o]&&"date"===t[o].type.toLowerCase()?{...e,value:new Date(e.value)}:e}))})))||[]:e}var mo={aiassistant:{text:"",icon:"sparkles",rounded:"full",className:"k-grid-ai-assistant-tool",fillMode:"solid",themeColor:"primary"},create:{text:"Add",className:"k-grid-add",iconClass:"k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-i-check"},selectall:{text:"Select all"},destroy:{text:"Delete",className:"k-grid-remove-command",iconClass:"k-i-trash"},edit:{text:"Edit",className:"k-grid-edit-command",iconClass:"k-i-pencil"},update:{text:"Save",className:"k-grid-save-command",iconClass:"k-i-save"},canceledit:{text:"Cancel",className:"k-grid-cancel-command",iconClass:"k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"},columns:{text:"Columns",type:"button",icon:"columns",fillMode:"flat",overflow:"never",className:"k-grid-column-menu",attr:{"aria-haspopup":"menu"}},columnchooser:{text:"Columns",type:"button",icon:"columns",overflow:"never",className:"k-grid-column-chooser",attr:{"aria-haspopup":"menu"}},sort:{text:"Sort",type:"button",icon:"arrows-swap",overflow:"never",className:"k-grid-sort-tool",attr:{"aria-haspopup":"menu"},clearButton:!0},filter:{text:"Filter",type:"button",icon:"filter",overflow:"never",className:"k-grid-filter-tool",attr:{"aria-haspopup":"menu"},clearButton:!0},group:{text:"Group",type:"button",icon:"group",overflow:"never",className:"k-grid-group-tool",attr:{"aria-haspopup":"menu"},clearButton:!0}};const bo={GridSort:"sort",GridClearSort:"sort",GridFilter:"filter",GridClearFilter:"filter",GridGroup:"group",GridClearGroup:"group",GridPage:"page",GridPageSize:"pageSize"};const ko={GridHighlight:"highlight",GridClearHighlight:"highlight",GridSelect:"select",GridClearSelect:"select",GridColumnResize:"resizeColumn",GridColumnHide:"hideColumn",GridColumnShow:"showColumn",GridColumnLock:"lockColumn",GridColumnUnlock:"unlockColumn",GridColumnReorder:"reorderColumn",GridExportPDF:"_exportPdf",GridExportExcel:"_exportExcel"};const _o=o.guid();function vo(e){return{id:_o,prompt:"",output:e.outputPlaceholder,skipHeader:!0,skipActions:!0}}function Co(t,o){e("th, th .k-grid-filter-menu, th .k-link",t).add(document.body).css("cursor",o)}function wo(t,o,r,l,n){var i=o;o=e(),n=n||1;for(var a=0;a<n;a++)o=o.add(t.eq(i+a));"number"==typeof r?o[l?"insertBefore":"insertAfter"](t.eq(r)):o.appendTo(r)}function yo(t,o,r){return e(t).add(o).find(r)}function So(e,t,o){var r,l,n,i;for(r=0,l=(o=b(o)?o:[o]).length;r<l;r++)n=o[r],h(n)&&n.click&&(i=n.name||n.text,t.on(Ke+q,".k-grid-"+(i||"").replace(/\s/g,""),{commandName:i},n.click.bind(e)))}function xo(e,r,l,n,i){return f(e,(function(e){var a;(e=typeof e===it?{field:e}:e).parentIds=i,e.attributes instanceof Function&&(e._attributesFunction=e.attributes),!Do(e)||l?(e.attributes=Tr(e.attributes),e.footerAttributes=Tr(e.footerAttributes),e.headerAttributes=Tr(e.headerAttributes),a=!0):!Do(e)&&l||(e.attributes=Rr(e.attributes),e.footerAttributes=Rr(e.footerAttributes),e.headerAttributes=Rr(e.headerAttributes),a=t);var s=o.guid();return n&&!e.locked&&(e.locked=n),e.headerAttributes=g({headers:i},e.headerAttributes),e.headerAttributes.id?e.uid=s=e.headerAttributes.id:(e.headerAttributes=g({id:s},e.headerAttributes),e.uid=s),e.columns&&(e.columns=xo(e.columns,r,a,e.locked,i?i+" "+s:s)),g({encoded:r,hidden:a,locked:n},e)}))}function To(e,t){var o=[];return Ho(e,t,o),o[o.length-1]}function Ho(e,t,o){o=o||[];for(var r=0;r<t.length;r++){if(e===t[r])return!0;if(t[r].columns){var l=o.length;if(o.push(t[r]),Ho(e,t[r].columns,o))return!0;o.splice(l,o.length-l)}}return!1}function Ro(e,t){Ao(e,t,t)}function Io(e){e.attr(lt,1)}function Ao(e,t,o){var r=o?Rr:Tr;e.hidden=!t,e.attributes=r(e.attributes),e.footerAttributes=r(e.footerAttributes),e.headerAttributes=r(e.headerAttributes)}function Eo(e,t){Mo(e),Ao(e,t,e._hideByMedia?e.matchesMedia:t)}function Mo(e){e.matchesMedia=zo(e)}function zo(e){return e&&(Bo(e.media)||!Bo(e.media)&&o.matchesMedia(e.media))}function Fo(){return this.style.display!==Mt&&!this.classList.contains("k-hidden")}function Do(e){return Lo([e]).length>0}function Lo(e){return m(e,(function(e){var t=!e.hidden&&!1!==e.matchesMedia;return t&&e.columns&&(t=Lo(e.columns).length>0),t}))}function Po(e){var t=[];var o;for(var r=0;r<e.length;r++){if(!Bo((o=e[r]).media)){if(!Bo(o.minScreenWidth))throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");t.push(o)}o.columns&&(t=t.concat(Po(o.columns)))}return t}function Bo(e){return void 0===e}function Oo(t){return e(t).map((function(){return this.toArray()}))}function qo(e,t){for(var o=0;o<e.length;o++)if(e[o].field==t)return e[o]}function Vo(e,t,o){let r;return t.forEach((t=>{let l;r=!1;const n=e.find(((e,o)=>{if(e.field===t.field)return l=o,!0}));n&&"group"===o?r=!0:(n&&e.splice(l,1),e.push(t))})),{descriptors:e,shouldContinue:r}}function Go(t,o,r,l,n,i,a,s){var d=$o(t);var c=$o([o]);if(d>c){var u=new Array(a+1).join('<th class="k-group-cell k-header k-table-th" scope="col">&nbsp;</th>');var p=i.children(":not(.k-filter-row)");e(new Array(d-c+1).join("<tr class='k-table-row'>"+u+"</tr>")).insertAfter(p.last())}!function(e,t){var o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(var r=0;r<o.length;r++)o[r].rowSpan+=t}(i,d-c),No(r,l,n,i,s)}function Wo(t,r,l){var n;l=l||0;var i=r;r=br(r);var a={};var s=t.find(">tr:not(.k-filter-row)");var d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")};for(var c=0,u=r.length;c<u;c++)a[(n=jo(r[c],i)).row]||(a[n.row]=s.eq(n.row).find(x+Ie).filter(d)),a[n.row].eq(n.cell).attr(o.attr("index"),l+c);return r.length}function $o(e){var t=0;for(var o=0;o<e.length;o++)if(e[o].columns){var r=$o(e[o].columns);r>t&&(t=r)}return 1+t}function No(t,o,r,l,n){var i=Qo(t[0],o);var a=r.find(">tr:not(.k-filter-row)").eq(i.row).children("th.k-header:not(.k-group-cell)");var s=e();var d=i.cell;var c;for(c=0;c<t.length;c++)s=s.add(a.eq(d+c));l.find(">tr:not(.k-filter-row)").eq(i.row)[n](s);var u=[];for(c=0;c<t.length;c++)t[c].columns&&(u=u.concat(t[c].columns));u.length&&No(u,o,r,l,n)}function jo(e,t,o,r){var l;var n;for((r=r||{})[o=o||0]=r[o]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:r[o],row:o};break}if(t[n].columns&&(l=jo(e,t[n].columns,o+1,r)))break;r[o]++}return l}function Uo(e,t){let o=e;let r=o.match(/class=["][^"]+/g);if(r){const e=r[0].split('"').pop();o=o.replace(e,e+(t?"":" k-table-td "))}else o=o.replace("<td","<td class='k-table-td'");return o}function Ko(e,t,o,r,l){if(t.columns)return(t=t.columns)[r?0:t.length-1];var n=To(t,e);var i;i=n?n.columns:e;var a=k(t,i);0===a&&r?a++:a==i.length-1&&!r||!o.locked&&!t.columns&&!r?a--:(a>0||0===a&&!r)&&a++,t=function(e,t,o,r){var l;var n=!!o.locked;var i;do{l=e[t],t+=r?1:-1,i=!!l.locked}while(l&&t>-1&&t<e.length&&l!=o&&!l.columns&&i===n);return l}(i,a,o,k(o,i)>a);var s=k(t,l);return(!t.columns||s&&s!==i.length-1)&&t&&t!=o&&t.columns?Ko(e,t,o,r,l):null}function Qo(e,t,o,r){var l;var n;for((r=r||{})[o=o||0]=r[o]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:r[o],row:o};break}if(t[n].columns&&(l=Qo(e,t[n].columns,o+1,r)))break;t[n].hidden||r[o]++}return l}function Yo(e){return Xo(sr(e)).concat(Xo(dr(e)))}function Jo(e,t,o,r){var l=e[o];var n=e[r];var i=To(l,t);return t=i?i.columns:t,k(n,t)}function Xo(e){var t=[];var o=[];for(var r=0;r<e.length;r++)t.push(e[r]),e[r].columns&&(o=o.concat(e[r].columns));return o.length&&(t=t.concat(Xo(o))),t}function Zo(e){var t=0;var o;for(var r=0;r<e.length;r++)(o=e[r]).columns?t+=Zo(o.columns):o.hidden&&t++;return t}function er(e){var t=0;for(var o=0,r=e.length;o<r;o++)e[o].hidden||(t+=parseInt(e[o].width,10));return t}function tr(e){var t,o=0;for(var r=0,l=e.length;r<l;r++)(t=e[r].style.width)&&-1==t.indexOf("%")&&(o+=parseInt(t,10));return o}function or(t){var o=t.find("tr:not(.k-filter-row)");var r=o.filter((function(){return!e(this).children().length})).remove().length;var l=o.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(var n=0;n<l.length;n++)l[n].rowSpan>1&&(l[n].rowSpan-=r);return o.length-r}function rr(e,t,o,r,l){var n,i,a,s=[];for(n=0,a=e.length;n<a;n++)(i=o[r]||[]).push(t.eq(l+n)),o[r]=i,e[n].columns&&(s=s.concat(e[n].columns));s.length&&rr(s,t,o,r+1,l+e.length)}function lr(e,t,o){e.css({left:t,right:o})}function nr(e,t,o){e[t]=e[t]||{},e[t][o]=e[t][o]||""}function ir(e,t,o,r){nr(e,t,o),""!==e[t][o]?e[t][o]+=" "+r:e[t][o]=r}function ar(e,t,o,r,l){nr(e,t,o),l?delete e[t][o]:e[t][o]=e[t][o].replace(r,"")}function sr(e){return m(e,(function(e){return e.locked}))}function dr(e){return m(e,(function(e){return!e.locked}))}function cr(e){return m(e,(function(e){return e.sticky&&!e.locked}))}function ur(e){return m(e,(function(e){return!e.locked&&Do(e)}))}function pr(e){return m(e,(function(e){return e.locked&&Do(e)}))}function hr(e){var t=[];for(var o=0;o<e.length;o++)e[o].hidden||(e[o].columns?t=t.concat(hr(e[o].columns)):t.push(e[o]));return t}function gr(e){var t=[];for(var o=0;o<e.length;o++)e[o].hidden||(e[o].columns?t=t.concat(hr(e[o].columns)):t.push({field:e[o].field,width:e[o].width,values:e[o].values,title:e[o].title}));return t}function fr(e){var t=[];for(var o=0;o<e.length;o++)e[o].columns&&(t=t.concat(e[o].columns));return t}function mr(e){var t=fr(e);return t=t.filter((function(e){return!e.hidden}))}function br(e){var t=[];for(var o=0;o<e.length;o++)e[o].columns?t=t.concat(br(e[o].columns)):t.push(e[o]);return t}function kr(e){var t=[];e=br(e);for(var o=0;o<e.length;o++)"string"==typeof e[o]?t.push(e[o]):e[o].field&&t.push(e[o].field);return t}function _r(e){var t=[];for(var o=0;o<e.length;o++)t.push(e[o]),e[o].columns&&(t=t.concat(_r(e[o].columns)));return t}function vr(e,t){const o=t.multiHeaderSeparator||" / ";const r=_r(e.columns);const l=t.parentIds.split(" ").map((e=>{let t=r.find((t=>t.uid===e));return t&&(t.title||t.field)||""}));return l.push(t.title||t.field),l.join(o)}function Cr(e,t){return{field:e.field,title:e.title,format:e.format,editor:e.editor,values:e.values,editorOptions:g(!0,{format:e.format,adaptiveMode:t},e.editorOptions),label:e.title||e.field||""}}function wr(r){var l=r.find(">tr:not(.k-filter-row)");var n=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")};var i=e();l.length>1&&(i=l.find("th").filter(n).filter((function(){return this.rowSpan>1}))),i=i.add(l.last().find("th").filter(n));var a=o.attr("index");return[].sort.call(i,(function(o,r){o=e(o),r=e(r);var l=o.attr(a);var n=r.attr(a);return l===t&&(l=e(o).index()),n===t&&(n=e(r).index()),(l=parseInt(l,10))>(n=parseInt(n,10))?1:l<n?-1:0}))}function yr(t){var o=t.closest("table");var r=e().add(t);var l=t.closest(vt);var n=o.find("tr:not(.k-filter-row)");var i=n.index(l);if(i>0){var a=n.eq(i-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return!e(this).attr("rowspan")}));var s=0;var d=l.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t);var c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return this.colSpan>1}));for(var u=0;u<c.length;u++)s+=c[u].colSpan||1;for(d+=Math.max(s-1,0),s=0,u=0;u<a.length;u++){var p=a.eq(u);if(p.attr("data-colspan")?s+=p[0].getAttribute("data-colspan"):s+=1,d>=u&&d<s){r=yr(p).add(r);break}}}return r}function Sr(t){var r=t.closest("thead");var l=e().add(t);var n=t.closest(vt);var i=r.find("tr:not(.k-filter-row)");var a=i.index(n)+t[0].rowSpan;var s=o.attr("colspan");if(a<=i.length-1){var d=n.next();var c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");var u;c=c.filter((function(){return!this.rowSpan||1===this.rowSpan}));var p=0;for(u=0;u<c.length;u++)p+=parseInt(c.eq(u).attr(s),10)||1;var h=d.find("th:not(.k-group-cell,.k-hierarchy-cell)");var g=parseInt(t.attr(s),10)||1;for(u=0;u<g;){d=h.eq(u+p),l=l.add(Sr(d));var f=parseInt(d.attr(s),10);f>1&&(g-=f-1),u++}}return l}function xr(t,r,l,n){var a,s=t;if(i){let r=e(l);o.applyStylesFromKendoAttributes(r,["display","left","right"]),t.empty(),r.each(((e,o)=>t[0].appendChild(o)))}else(a=document.createElement(Ct)).innerHTML="<table class='k-grid-table k-table'><tbody class='k-table-tbody'>"+l+"</tbody></table>",e(a).find("table").addClass(o.getValidCssClass("k-table-","size",n)),t=a.firstChild.firstChild,r[0].replaceChild(t,s[0]),t=e(t);return t}function Tr(e){e=e||{};let t={};return t[o.attr("style-display")]="none",g({},e,t)}function Hr(e){return!!(e=e||{})[o.attr("style-display")]}function Rr(e){return delete(e=e||{})[o.attr("style-display")],e}function Ir(t,r,l,n,i){var a,s=t.find(">colgroup"),d=i?["<col>"]:f(r,(function(e){return(a=e.width)&&0!==parseInt(a,10)?o.format(`<col ${o.attr("style-width")}="{0}" ${e.draggable?"class=k-drag-col":""} />`,typeof a===it?a:a+_t):e.draggable?"<col class='k-drag-col' />":"<col />"}));i||!l&&!s.find(".k-hierarchy-col").length||d.splice(0,0,'<col class="k-hierarchy-col" />'),s.length&&s.remove(),s=e(new Array(n+1).join('<col class="k-group-col">')+d.join("")),o.applyStylesFromKendoAttributes(s,["width"]),s.is("colgroup")||(s=e("<colgroup/>").append(s)),t.prepend(s)}function Ar(e){var t,o,r,l={};for(o=0,r=e.length;o<r;o++)l[(t=e[o]).value]=t.text;return l}function Er(e,t,r,l){let n=r&&r.length&&h(r[0])&&"value"in r[0]?Ar(r)[e]:e;n=null!=n?n:"";let i=!1===l?n:o.htmlEncode(n);return t?o.format(t,i):i}function Mr(e,t,o){var r,l=0,n=e[l];for(;n;){if(r=!!o||n.style.display!==Mt,o&&n.classList.contains("k-hidden")&&n.classList.remove("k-hidden"),r&&!Ot.test(n.className)&&--t<0){n.style.display=o?"":Mt;break}n=e[++l]}}function zr(t,o){var r,l,n=0,i=t.length;for(;n<i;n+=1)(l=t.eq(n)).is(".k-grouping-row,.k-detail-row")?(r=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(r.attr("colspan"),10)-1):(l.hasClass("k-grid-edit-row")&&(r=l.children(".k-edit-container")[0])&&((r=e(r)).attr("colspan",parseInt(r.attr("colspan"),10)-1),r.find("col").eq(o).remove(),l=r.find(vt).first()),Mr(l[0].cells,o,!1))}function Fr(e){var t=[];var o;for(var r=0;r<e.length&&("field"in(o=e[r])&&"value"in o&&"items"in o);r++)t.push(o),o.hasSubgroups&&(t=t.concat(Fr(o.items)));return t}function Dr(t,o){var r,l,n=0,i=t.length;for(;n<i;n+=1)(l=t.eq(n)).is(".k-grouping-row,.k-detail-row")?(r=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(r.attr("colspan"),10)+1):(l.hasClass("k-grid-edit-row")&&(r=l.children(".k-edit-container")[0])&&((r=e(r)).attr("colspan",parseInt(r.attr("colspan"),10)+1),Ir(r.find(">form>table"),Lo(undefined),!1,0),l=r.find(vt).first()),Mr(l[0].cells,o,!0))}function Lr(e,t,o){var r,l,n;for(o=o||1,l=0,n=e.length;l<n;l++)(r=e.eq(l).children(":not([hidden])").last()).attr("colspan",parseInt(r.attr("colspan"),10)+o),(r=t.eq(l).children(":not([hidden])").last()).attr("colspan",parseInt(r.attr("colspan"),10)-o)}function Pr(e){var t,o,r=0;var l=e.find(">colgroup>col");for(t=0,o=l.length;t<o;t+=1)r+=parseInt(l[t].style.width,10);return r}function Br(e,t,o){if(!t._requestInProgress||!t.options.service)return;const r=t.outputObjects;t.updatePromptOutputContent(e.output,o),t.element.find("[data-id='"+o+"']").attr("data-id",e.outputId);const l=r.get(o);r.delete(o),l&&(l.id=e?.outputId,l.data.id=e?.outputId,r.set(e?.outputId,l)),t.promptOutputs=t.promptOutputs.map((t=>(t.id===o&&(t.id=e?.outputId),t))),t.stopStreaming(),t._requestInProgress=!1}var Or=o.ui.DataBoundWidget.extend({init:function(t,r,l){var n=this;r=b(r)?{dataSource:r}:r,s.fn.init.call(n,t,r),l&&(n._events=l),Ut=o.support.isRtl(t),P=Ut?"a[class*='-i-caret-alt-left']":B,n._element(),n._ariaId(),n._columns(e.extend(!0,[],n.options.columns)),n._bindMediaQueries(),n._foreignKeyPromises?e.when.apply(null,n._foreignKeyPromises).then((function(){n._foreignKeyPromises=null,n._continueInit()})):n._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._rowResizing(),t._groupable(),t._toolbar(),t._initToolbarItemsPopups(),t._ai(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._initSelectableAggregates(),t._selectable(),t._statusBar(),t._clipboard(),t._paste(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t._setInitialRtlScrollPosition(),t.options.contextMenu&&t._initContextMenu(),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+q,t._resizeHandler)),t._initLoader(),o.notify(t),t._showWatermarkOverlay&&t._showWatermarkOverlay(t.wrapper[0])},events:[X,J,"dataBinding","cancel",oe,re,le,N,j,K,U,Q,V,G,W,$,te,Y,Oe,qe,Ve,ee,Z,Ge,We,$e,Ne,je,Ue,se,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t=this;var r=t.options.scrollable;var l;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),t._rowResizing(),r&&(r.virtual?(l=t.content.find(">.k-virtual-scrollable-wrap"),o.scrollLeft(l,Kr(l,Ut))):(l=t.tbody,o.scrollLeft(t.content,Kr(l,Ut)))),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind?t.dataSource.fetch():t._footer()},options:{name:"Grid",adaptiveMode:"none",ai:null,columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,allowPaste:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",statusBarTemplate:null,search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,contextMenu:!1,columnResizeHandleWidth:3,size:"medium",mobile:"",loaderType:"loadingPanel",dataLayoutMode:"columns",stackedLayoutSettings:{},messages:{loader:{loading:"Loading...",exporting:"Exporting..."},editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:mo.create.text,cancel:mo.cancel.text,save:mo.save.text,destroy:mo.destroy.text,edit:mo.edit.text,update:mo.update.text,canceledit:mo.canceledit.text,excel:mo.excel.text,pdf:mo.pdf.text,search:mo.search.text,columns:mo.columns.text,select:"Select",selectall:mo.selectall.text,sort:mo.sort.text,filter:mo.filter.text,group:mo.group.text,columnchooser:mo.columnchooser.text,selectRow:"Select Row",selectAllRows:"All rows",clearSelection:"Clear selection",copySelection:"Copy selection",copySelectionNoHeaders:"Copy selection (No Headers)",paste:"Paste (use CTRL/⌘ + V)",reorderRow:"Reorder row",reorderRowUp:"Up",reorderRowDown:"Down",reorderRowTop:"Top",reorderRowBottom:"Bottom",exportPdf:"Export to PDF",exportExcel:"Export to Excel",exportToExcelAll:"All",exportToExcelSelection:"Selection",exportToExcelSelectionNoHeaders:"Selection (No Headers)",sortAsc:"Sort Ascending",sortDesc:"Sort Descending",moveGroupPrevious:"Move previous",moveGroupNext:"Move next"},details:{expand:"Expand Details",collapse:"Collapse Details"},ai:{outputPlaceholder:"No AI output available",success:"Data is:",error:"Operation is not successful. Error:",invalidSelection:"This selection mode is not currently enabled. Please enable the appropriate selection option in the grid configuration.",promptPlaceholder:"Enter your AI prompt here..."},noRecords:"No records available.",expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup",itemsSelected:"items selected",dragHandleLabel:"Drag row",toolbarLabel:"grid toolbar",groupingHeaderLabel:"grid grouping header",filterCellTitle:"filter cell",clearButtons:{clearFiltering:"Clear All Filters",clearSorting:"Clear Sorting",clearGrouping:"Clear Grouping",columnChooserReset:"Reset"},applyButtons:{applySorting:"Done",applyGrouping:"Done",columnChooserApply:"Apply"}},width:null},destroy:function(){var t,r,l=this;if(l._destroyColumnAttachments(),l._unbindToolbarTools(),s.fn.destroy.call(l),this._navigatableTables&&(this._navigatableTables.off(q),this._navigatableTables=null,this._headertables=null),l._resizeHandler&&e(window).off("resize"+q,l._resizeHandler),l._aiAssistant&&(l._aiAssistant?.destroy(),l._aiAssistant=null),l._aiAssistantWindow&&(l._aiAssistantWindow?.destroy(),l._aiAssistantWindow=null),l.pager&&l.pager.element&&l.pager.destroy(),l.timer&&clearTimeout(l.timer),l._progressTimeOut&&clearTimeout(l._progressTimeOut),l._collapseGroupsTimeOut&&clearTimeout(l._collapseGroupsTimeOut),l._endlessFetchTimeOut&&clearTimeout(l._endlessFetchTimeOut),l.pager=null,l._destroyGroupable(),(r=l.wrapper.data("kendoReorderable"))&&r.destroy(),(r=l.tbody?l.tbody.data("kendoReorderable"):null)&&r.destroy(),l.allowPaste){(l.content||l.table).off(se+q,l.pasteHandler),l.unbind(l.pasteHandler)}l.pasteActionsDropDownList&&(l.pasteActionsDropDownList.destroy(),l.pasteActionsDropDownList=null),l.selectable&&l.selectable.element&&(l.selectable.destroy(),l.clearArea(),l._selectedIds=null,l.copyHandler&&(l.wrapper.off("keydown",l.copyHandler),l.unbind(l.copyHandler)),l.updateClipBoardState&&(l.unbind(l.updateClipBoardState),l.updateClipBoardState=null),l.clearAreaHandler&&l.wrapper.off("keyup",l.clearAreaHandler)),l.selectable=null,l._selectableAggregatesOptions=null,l.resizable&&(l.resizable.destroy(),l._resizeUserEvents&&(l._resizeHandleDocumentClickHandler&&e(document).off("click",l._resizeHandleDocumentClickHandler),l._resizeUserEvents.destroy(),l._resizeUserEvents=null),l.resizable=null),l._destroyRowResizing(),l._destroyVirtualScrollable(),l.editableUserEvents&&(l.editableUserEvents.destroy(),l.editableUserEvents=null),l._lockedContentUserEvents&&(l._lockedContentUserEvents.destroy(),l._lockedContentUserEvents=null),l._destroyEditable(),l.dataSource&&(l.dataSource.unbind(X,l._refreshHandler).unbind(T,l._progressHandler).unbind(H,l._errorHandler).unbind(gt,l._clearSortClasses),l._refreshHandler=l._progressHandler=l._errorHandler=l._sortHandler=null),t=l.element.add(l.wrapper).add(l.table).add(l.thead).add(l.wrapper.find(">.k-grid-toolbar")),l.content&&(t=t.add(l.content).add(l.content.find(">.k-virtual-scrollable-wrap"))),l.scrollables&&l.scrollables.first()&&(t=t.add(l.scrollables.first())),l.lockedHeader&&l._removeLockedContainers(),l.pane&&l.pane.destroy(),l._isMobile&&(l.wrapper.off("transitionend"+q),l.wrapper.off("contextmenu"+q)),l.minScreenResizeHandler&&e(window).off("resize",l.minScreenResizeHandler),l._detachColumnMediaResizeHandler(),l._draggableInstance&&l._draggableInstance.element&&l._draggableInstance.destroy(),l._draggableInstance=null,l._draggableRowsInstance&&l._draggableRowsInstance.element&&l._draggableRowsInstance.destroy(),l.tbodyContextMenu&&l.tbodyContextMenu.destroy(),l.theadContextMenu&&l.theadContextMenu.destroy(),l.loader&&l.loader.destroy(),l._draggableRowsInstance=null,t.off(q),t[0].kendoBindingTarget=null,o.destroy(l.wrapper),l.rowTemplate=l.altRowTemplate=l.lockedRowTemplate=l.lockedAltRowTemplate=l.detailTemplate=l.footerTemplate=l.groupFooterTemplate=l.lockedGroupFooterTemplate=l.noRecordsTemplate=null,l.scrollables=l.thead=l.tbody=l.element=l.table=l.content=l.statusBar=l.footer=l.wrapper=l.lockedTable=l.lockedContent=l.lockedHeader=l.lockedFooter=l._groupableClickHandler=l._groupRows=l._setContentWidthHandler=l.loaderOverlay=l.wrapperClone=null},getOptions:function(){this.options.dataSource=null;var t=g(!0,{},this.options);t.columns=o.deepExtend([],this.columns);var r=this.dataSource;var l=r.options.data&&r._data;return r.options.data=null,t.dataSource=e.extend(!0,{},r.options),r.options.data=l,t.dataSource.data=l,t.dataSource.page=r.page(),t.dataSource.filter=e.extend(!0,{},r.filter()),t.dataSource.pageSize=r.pageSize(),t.dataSource.sort=r.sort(),t.dataSource.group=r.group(),t.dataSource.aggregate=r.aggregate(),t.dataSource.transport&&(t.dataSource.transport.dataSource=null),t.pageable&&t.pageable.pageSize&&(t.pageable.pageSize=r.pageSize()),t},setOptions:function(e){var t=this.getOptions(),r=this.element;if(t.size){const e=o.getValidCssClass("k-grid-","size",t.size);r.removeClass(e)}o.deepExtend(t,e),e.dataSource?e.dataSource.filter&&(t.dataSource.filter=e.dataSource.filter):t.dataSource=this.dataSource;var l=this.wrapper;var n=this._events;if(this.destroy(),this.options=null,this._isMobile){var i=l.closest(o.roleSelector("pane")).parent();i.after(l),i.remove(),l.removeClass("k-grid-mobile")}l[0]!==r[0]&&(l.before(r),l.remove()),r.empty(),this.init(r,t,n),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,o){return t.children().filter((function(){var t=e(this);return!((o?t.hasClass("k-detail-row"):t.hasClass(Pe))||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))}))},dataItems:function(){var e=o.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){var t=e.length,r=new Array(2*t);for(var l=t;--l>=0;)r[l]=r[l+t]=e[l];e=r}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&t.thead.add(t.lockedHeader).find("th").each((function(){var t=e(this),o=t.data("kendoFilterMenu"),r=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");o&&o.destroy(),r&&r.destroy(),l&&l.destroy()}))},_setInitialRtlScrollPosition:function(){const e=this;Ut&&e.scrollables&&o.scrollLeft(e.scrollables,0)},_attachCustomCommandsEvent:function(){var e,t,o,r=this,l=br(r.columns||[]);for(t=0,o=l.length;t<o;t++)(e=l[t].command)&&So(r,r.wrapper,e)},_bindMediaQueries:function(){const e=this;if("auto"===e.options.adaptiveMode){e.largeMQL=o.mediaQuery("large"),e.mediumMQL=o.mediaQuery("medium"),e.smallMQL=o.mediaQuery("small");const t=(t,o)=>{if("popup"!==e._editMode())return;const r=!0===t||!1===t;let l;if(e._editContainer&&(l=e._editContainer&&e._editContainer.data(o)),!l){const t="kendoActionSheet"===o?"kendoWindow":"kendoActionSheet";l=e._editContainer&&e._editContainer.data(t)}r?l&&l.fullscreen&&l.visible()?(e._showAdaptiveView=!0,l.fullscreen(t)):l&&(e._showAdaptiveView=!1,e._destroyEditable(!0)):l&&l.fullscreen&&l.close()};e.smallMQL.onEnter((()=>{t(!0,"kendoActionSheet")})),e.mediumMQL.onEnter((()=>{t(!1,"kendoActionSheet")})),e.largeMQL.onEnter((()=>{t(null,"kendoWindow")}))}else e.smallMQL&&e.smallMQL.destroy(),e.mediumMQL&&e.mediumMQL.destroy(),e.largeMQL&&e.largeMQL.destroy(),e._showAdaptiveView=!1},_aria:function(){var e,t,r,l,n,i=this.wrapper,a=this._hasDetails()?"treegrid":this.options.navigatable?"grid":null,s=this.table,d=i.find(".k-grid-toolbar"),c=i.find(".k-grouping-header"),u=this._ariaGridId(),p=s.attr(lt),h=this._isStackedMode(),g=!h&&this.thead.find(vt).length+this.wrapper.find(".k-grid-footer-wrap table tr").length,f=this._trailingColumns(),m=this.virtualScroll,b=this.options.pageable;s.attr(lt,p>=0?p:0),a&&s.attr(Et,a);const k=s.find("tbody");const _=s.find("thead");const v=s.find("tfoot");const C=s.find(vt);k.find(vt).length>0&&k.attr(Et,Ft),_.find(`${vt} th`).length>0&&_.attr(Et,Ft),v.find(vt).length>0&&v.attr(Et,Ft),C.children().length>0&&C.attr(Et,zt),s.find("th").attr(Et,Dt),s.find("td").attr(Et,Lt),b&&this.dataSource.totalPages()>1||m&&m.rows?(n=this._groups()>0?-1:this._hasDetails()?g+2*this.dataSource.total():g+this.dataSource.total(),s.attr(St,n)):this._hasDetails()&&(n=this._groups()>0?-1:g+2*this.dataSource.total(),s.attr(St,n)),n&&n>0&&this._ariaRowIndex(),(!h&&m&&m.columns||!s.attr(xt)&&(s.find("td:not([group-header-spanned-hidden]):hidden").length>0||i.find(".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden").length>0))&&(s.attr(xt,f+br(this.columns).length),this._ariaColumnIndex()),this.pager&&this.pager.element.attr("aria-controls",u),d.attr({role:"toolbar","aria-label":this.options.messages.toolbarLabel,"aria-controls":u}),c.attr({role:"toolbar","aria-label":this.options.messages.groupingHeaderLabel,"aria-controls":u}),t=h?"":this._ariaHeaderFooter("header","thead","th, td",Dt),r=this._ariaHeaderFooter("footer","tfoot","td",Lt),!h&&i.find(".k-grid-content-locked").length>0&&this._ariaLockedContent(),(t||r)&&(l=[t,e=this.tbody.attr(kt)||o.guid(),r].join(" "),this.tbody.attr(kt,e),s.attr(yt,l)),this.options.groupable&&this._ariaGroupTitles()},_ariaColumnIndex:function(){var t,o,r,l,n=this._trailingColumns(),i=this.tbody.find(">tr").last().find("> td[data-virtual]"),a=this.thead.find(">tr").not(".k-filter-row"),s=this.wrapper.find(".k-grid-header-locked thead > tr").not(".k-filter-row"),d=Number.MAX_VALUE,c=0,u=0,p=0,h=0,g=function(o,r){var l=r.getAttribute("data-index"),n=Number(l),i=e(r).closest(".k-grid-header-locked");0===i.length&&n<d&&(d=n),i.length>0&&u<n&&(u=n),0===i.length&&c<n&&(c=n),null!==l?(r.setAttribute(Tt,Number(n)+1),t=Number(n)+1+r.getAttribute("colspan")):(r.setAttribute(Tt,t+1),t+=r.getAttribute("colspan"))};for(2===i.length?(p=Number(i[0].getAttribute("colspan")),h=Number(i[1].getAttribute("colspan"))):1===i.length&&0===i.prev().length?p=Number(i[0].getAttribute("colspan")):1===i.length&&1===i.prev().length&&(h=Number(i[0].getAttribute("colspan"))),o=0;o<s.length;o++)t=0,s.eq(o).find("th").each(g);for(o=0;o<a.length;o++)t=0,a.eq(o).find("th").each(g);for(o=0;o<=u;o++)r=o+n,this.wrapper.find(".k-grid-content-locked tbody > tr > td:nth-child("+(o+1)+")").attr(Tt,r+1);for(o=p;o<=c-d-h;o++)l=0===p?o+1:o-p+2,r=d+o+n,this.tbody.find("> tr > td:nth-child("+l+")").attr(Tt,r+1)},_ariaGroupTitles:function(){var e=this,t=e.dataSource.group(),r=e.wrapper.find(".k-grid-header th");r.each((function(t,o){o.getAttribute("title")===e.options.messages.ungroupHeader&&o.setAttribute("title",e.options.messages.groupHeader)})),t&&t.length>0&&t.forEach((function(t){var l=t.field,n=r.filter("["+o.attr("field")+"='"+l+"']");n.attr("title")===e.options.messages.groupHeader&&n.attr("title",e.options.messages.ungroupHeader)}))},_ariaHeaderFooter:function(e,t,r,l){var n,i=this.wrapper,a=i.find(".k-grid-"+e+" .k-grid-"+e+"-wrap table"),s=i.find(".k-grid-"+e+" .k-grid-"+e+"-locked table"),d="";if(a.length>0){d=(n=a.find(t+", tbody")).attr(kt)||o.guid(),a.attr(Et,Mt);const e=a.find(vt);e.children().length>0&&(e.attr(Et,zt),n.attr(Et,Ft)),a.find(r).attr(Et,l),n.attr({id:d})}return s.length>0&&this._ariaLocked(e,t,r,l),s.find("td").attr(Et,Lt),a.find("td").attr(Et,Lt),d},_ariaId:function(){var e=this.element.attr(kt)||"aria";e&&(this._cellId=e+"_active_cell")},_ariaGridId:function(){var e=this.table,t=e.attr(kt);return t||(t=o.guid(),e.attr(kt,t)),t},_ariaLocked:function(t,o,r,l){var n=this,i=n.wrapper,a=i.find(".k-grid-"+t+" .k-grid-"+t+"-wrap table"),s=i.find(".k-grid-"+t+" .k-grid-"+t+"-locked table"),d=a.find(vt),c=s.find(vt);s.attr(Et,Mt),s.find(o+", tbody").attr(Et,Mt),c.attr(Et,Mt),s.find(r).attr(Et,l),d.each((function(o,l){var i=[];i=(i=n._cellsIds(c.eq(o).find(r),"locked_"+t,o)).concat(n._cellsIds(e(l).find(r),t,o)),l.setAttribute(yt,i.join(" "))}))},_ariaLockedContent:function(){var t=this,o=t.table.find(vt),r=t.wrapper.find(".k-grid-content-locked table"),l=r.find(vt);r.attr(Et,Mt),r.find("tbody").attr(Et,Mt),l.attr(Et,Mt),r.find("td").attr(Et,Lt),o.each((function(o,r){var n=[];n=(n=t._cellsIds(l.eq(o).find("td"),"locked_datacell",o)).concat(t._cellsIds(e(r).find("td"),"datacell",o)),r.setAttribute(yt,n.join(" "))}))},_ariaAddHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns,o=this.table,r=br(t).length;e.columns||o.attr(xt)||(this._ariaColumnIndex(),o.attr(xt,r))},_ariaRemoveHiddenColIndex:function(){var e=this.virtualScroll||{},t=br(this.columns).length;e.columns||t!==hr(this.columns).length||(this.wrapper.find("td, th").removeAttr(Tt),this.table.removeAttr(xt))},_ariaRowIndex:function(){var e,t,o=!this._isStackedMode()&&this.thead.find(">tr"),r=o?o.length:0,l=this.tbody.find(">tr"),n=this.wrapper.find(".k-grid-footer-wrap tfoot > tr"),i=this.dataSource.total(),a=this.dataSource.skip()||0,s=1,d=!1;for(this._hasDetails()&&(i*=2,a*=2),e=0;e<r;e++)o.eq(e).attr(Ht,s+e);for(s=r+a,e=0;e<l.length;e++)t=l.eq(e),this._hasDetails()&&t.hasClass("k-master-row")?(s+=d?2:1,d=!0):(s+=1,d=!1),t.attr(Ht,s);for(s=r+i+1,e=0;e<n.length;e++)n.eq(e).attr(Ht,s+e)},_cellsIds:function(e,t,o){var r=[],l=this._ariaGridId();return e.each((function(e,n){var i=n.getAttribute(kt)||l+"_"+t+"_"+o+"_"+e;n.setAttribute(kt,i),r.push(i)})),r},_trailingColumns:function(){return this._groups()+(this._hasDetails()?1:0)},_element:function(){const t=this;let r=t.element;r.is("table")||(r=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),r.length||(r=e("<table />").appendTo(t.element))),r.addClass("k-grid-table k-table"),r.addClass(o.getValidCssClass("k-table-","size",t.options.size)),t.table=r,t._wrapper()},_createResizeHandle:function(t,r){var l=this;var n=l.options.columnResizeHandleWidth;var i=l.options.scrollable;var a=l.resizeHandle;var s=3*n/2;var d=0;var u;var p;var h;var g;var f;var m;var b;a&&l.lockedContent&&a.data("th")[0]!==r[0]&&(a.off(q).remove(),a=null),a||(a=l.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(a)),f=o.scrollLeft(t),Ut&&(Kt.mozilla||Kt.webkit&&Kt.version>=85)&&(f*=-1),g=parseFloat(t.css("borderLeftWidth")),m=r.offset().left+f-parseFloat(r.css("marginLeft"))-(t.offset().left+g),Ut?i&&(d=m<=f?s:0,(u=r.closest(".k-grid-header-wrap, .k-grid-header-locked"))[0].scrollWidth-u[0].offsetWidth,h=parseFloat(u.css("marginLeft")),p=Kt.msie?2*o.scrollLeft(u)+g-h-d:0,m-=-d+(Kt.mozilla?g-h-d:0)+p):m+=r[0].offsetWidth,b=r.offset().top-parseFloat(r.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),a.css({top:b,left:m-s,height:c(r),width:3*n-d}).data("th",r).show(),a.off(et+q).on(et+q,(function(){l._autoFitLeafColumn(parseInt(r.attr(o.attr("index")),10))}))},_positionColumnResizeHandle:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t.thead&&t.thead.add(r).on(Ze+q,"tr:not(.k-filter-row) > th:not([data-resizable=false])",(function(r){var l=void 0!==r.buttons?r.buttons:r.which||r.button;var n=e(this);n.hasClass("k-group-cell")||n.hasClass("k-hierarchy-cell")||void 0!==l&&0!==l||n[0].hasAttribute(o.attr("colSpan"))||t._createResizeHandle(n.closest(Ct),n)}))},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"))&&(t.find(x+Se).find(x+xe+","+x+Te).show(),t.find(x+He).show(),t.find(x+Ae).show(),t.find(x+Ee).show())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),!this.lockedContent||this._isMobile||o.support.mobileOS?this.resizeHandle.hide():(this.resizeHandle.off(q).remove(),this.resizeHandle=null))},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t._resizeUserEvents=new o.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(o){var r=e(o.target);o.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),r.addClass("k-column-active"),r.find(x+Se).find(x+xe+","+x+Te).hide(),r.find(x+He).hide(),r.find(x+Ae).hide(),r.find(x+Ee).hide(),t._createResizeHandle(r.closest(Ct),r),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=t._resizeHandleDocumentClick.bind(t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(t,r){var l=this;var n=!!t.locked;var i=!!t.hidden;var a=this.options;var s=o.support.mobileOS?0:o.support.scrollbar();var c=k(t,n?pr(hr(l.columns)):ur(hr(l.columns)));var u=n?l.lockedTable:l.table;var p=l.footer||e();var h=t.minResizableWidth||10;var g=d(n?u.find("tbody"):l.tbody);var f;if(!this._isStackedMode()){var m=n?l.lockedHeader.find("table"):l.thead.closest("table");if(i)t.width=r>h?r:h;else{if(l.footer&&l.lockedContent&&(p=n?l.footer.children(".k-grid-footer-locked"):l.footer.children(".k-grid-footer-wrap")),f=a.scrollable?m.find("col:not(.k-group-col,.k-hierarchy-col)").eq(c).add(u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(c)).add(p.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(c)):u.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(c),a.scrollable){var b=!1;var _=l.wrapper.width()-s;var v=r=r>h?r:h;n&&g-r+v>_&&((v=r+(_-g-2*s))<0&&(v=r),b=!0),v>10&&v>=h&&(f.css("width",v),g&&(v=b?_-2*s:g+(r-t.width),u.add(m).add(p).css("width",v),n||(l._footerWidth=v))),l._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=h&&f.css("width",r);t.width=r,l._applyLockedContainersWidth(),l._syncLockedContentHeight(),l._syncLockedHeaderHeight(),l._updateStickyColumns()}}},_adjustColWidths:function(t,o,r,l){const n={};t.add(o).add(r).css("width",l),t.add(o).add(r).find("col").each(((t,o)=>{n[t]=e(o).css("width")})),t.add(o).add(r).find("col").each(((t,o)=>{e(o).css("width",n[t])}))},_resizable:function(){var t,l,n,i,a,s,u,p,h=this,g=h.options,f=h._isMobile||o.support.mobileOS,m=o.support.mobileOS?0:o.support.scrollbar();!h._isStackedMode()&&(!0===g.resizable||g.resizable&&!0===g.resizable.columns)&&(t=g.scrollable?h.wrapper.find(".k-grid-header-wrap").first():h.wrapper,f?h._positionColumnResizeHandleTouch(t):h._positionColumnResizeHandle(t),h.resizable&&h.resizable.destroy(),h.resizable=new r.Resizable(t.add(h.lockedHeader),{handle:(g.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:c(t.data("th"))+h.tbody.attr("clientHeight")})},start:function(t){p=e(t.currentTarget).data("th"),f&&h._hideResizeHandle();let o=p.closest("table"),r=e.inArray(p[0],wr(p.closest("thead")).filter(":visible"));let c=(s=o.parent().hasClass("k-grid-header-locked"))?h.lockedTable:h.table,m=h.footer||e();h.footer&&h.lockedContent&&(m=s?h.footer.children(".k-grid-footer-locked"):h.footer.children(".k-grid-footer-wrap"));let b=m.find("table");Co(h.wrapper,"col-resize"),u=g.scrollable?o.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r).add(c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r)).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r)):c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r);let k=e.map(h.columns,(function(e){return!e.hidden&&(s&&e.locked||!s&&!e.locked)?e:null}));l=t.x.location,n=d(p),i=br(k)[r].minResizableWidth||10,a=d(s?c.children("tbody"):h.tbody),Kt.webkit&&h.wrapper.addClass("k-grid-column-resizing"),h._adjustColWidths(c,o,b,a)},resize:function(t){var o=Ut?-1:1,r=n+t.x.location*o-l*o;if(g.scrollable){var d;s&&h.lockedFooter?d=h.lockedFooter.children("table"):h.footer&&(d=h.footer.find(">.k-grid-footer-wrap>table")),d&&d[0]||(d=e());var c=p.closest("table");var f=s?h.lockedTable:h.table;var b=!1;var k=h.wrapper.width()-m;var _=r;s&&a-n+_>k&&((_=n+(k-a-2*m))<0&&(_=r),b=!0),_>10&&_>=i&&(u.css("width",_),a&&(_=b?k-2*m:a+t.x.location*o-l*o,f.add(c).add(d).css("width",_),s||(h._footerWidth=_))),h._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=i&&u.css("width",r)},resizeend:function(){var e,t,r=d(p);if(Co(h.wrapper,""),Kt.webkit&&h.wrapper.removeClass("k-grid-column-resizing"),p&&n!=r){t=h.lockedHeader?h.lockedHeader.find("thead").first().find(vt).first().add(h.thead.find(vt).first()):p.parent();var l=p.attr(o.attr("index"));l||(l=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(p)),(e=br(h.columns)[l]).width=r,h.trigger(qe,{column:e,oldWidth:n,newWidth:r}),h._applyLockedContainersWidth(!0),h._syncLockedContentHeight(),h._syncLockedHeaderHeight(),h._updateStickyColumns()}h._resetResizeHandleHeader(),h._hideResizeHandle(),p=null}}))},_addLockedRowResizing:function(e){var t=e.index();return this.lockedTable.find(vt).eq(t).add(this.tbody.find(vt).eq(t))},_getMinRowHeight:function(e){var t=0;return e.each(((e,o)=>{var r;o.style.height="",(r=c(o))>t&&(t=r)})),t},_cacheRowHeight:function(e,t){var o=this;o._cachedRowsHeight||(o._cachedRowsHeight={}),e.each(((e,r)=>{var l=r.getAttribute("data-uid");o._cachedRowsHeight[l]=t}))},_clearCachedRowsHeight:function(e){var t=this;e&&t._cachedRowsHeight?e.each(((e,o)=>{var r=o.getAttribute("data-uid");delete t._cachedRowsHeight[r]})):t._cachedRowsHeight=null},_mapCachedRowsHeight:function(e,t){var o=this._cachedRowsHeight,r=this.dataSource,l={};Object.keys(o).forEach((n=>{var i=r[e](n);i&&(l[i[t]]=o[n])})),this._cachedRowsHeight=l},_rowResizerDblClick:function(){var t,o,r=this,l=r.rowResizer,n=l.data(vt),i=c(n);o=n.hasClass(ve)?r.select():n,r.lockedTable?(o=(n=r._addLockedRowResizing(n)).hasClass(ve)?r.lockedTable.find(x+ve):r.lockedTable.find(vt).eq(n.index())).each(((t,o)=>{var l=o.rowIndex,n=e(o).add(r.tbody.find(vt).eq(l)),i=r._getMinRowHeight(n);n.css(tt,i)})):o.css(tt,rt),r._clearCachedRowsHeight(o),l.removeClass(me),l.removeClass(be),i!=(t=c(n))&&r.trigger(Oe,{row:n,rows:o,oldHeight:i,newHeight:t})},_setupRowResizer(e,t,o){e.data(vt,t).css({top:o})},_attachRowResizerEvents:function(){var e=this.rowResizer,t=!1;e.on(Qe+q,(t=>{0===t.button&&(e.removeClass(me),e.addClass(be))})).on(Ye+q,(t=>{0===t.button&&(e.removeClass(be),e.addClass(me))})).on(Je+q,(()=>{t=!0,setTimeout((()=>{t&&e.addClass(me)}),200)})).on(Xe+q,(()=>{t=!1,e.removeClass(me)}))},_getResizerTop:function(e,t){var o=this.rowResizer,r=o.find(".k-row-resizer")[0],l=parseInt(getComputedStyle(o[0]).paddingTop);return e.offset().top-parseFloat(e.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth")))-r.clientHeight-l+t.scrollTop()},_getResizerContainer:function(){var e=this.tbody.closest(Ct);return this.lockedTable&&(e=e.closest(".k-grid-container")),e},_createRowResizer:function(t){var o,r=this,l=e(t.currentTarget),n=t.currentTarget.clientHeight,i=t.offsetY,a=r.rowResizer,s=l.prev("tr:visible"),d=r._getResizerContainer();a||(a=r.rowResizer=e('<div class="k-resizer-wrap"><div class="k-row-resizer"></div></div>'),d.append(a),r._attachRowResizerEvents(),a.off(et+q).on(et+q,r._rowResizerDblClick.bind(r))),o=r._getResizerTop(l,d),0!==s.length&&n/2>i?s.hasClass(Pe)||r._setupRowResizer(a,s,o):l.hasClass(Pe)||r._setupRowResizer(a,l,o+n)},_detachRowResizerEvents:function(){this.rowResizer.off(Qe+q).off(Ye+q).off(Je+q).off(Xe+q)},_mapResizedRows:function(t,o,r){var l=this;t.each(((t,n)=>{var i;if(o){var a=n.rowIndex,s=r,d=0,u=e(n).add(l.tbody.find(vt).eq(a));u.each(((e,t)=>{var o;t.style.height="",(o=c(t))>d&&(d=o)})),s<d?(s=d,l._clearCachedRowsHeight(u.eq(0))):l._cacheRowHeight(u.eq(0),s),u.css(tt,s)}else n.style.height="",i=c(n),r>i?(n.style.height=r+_t,l._cacheRowHeight(e(n),r)):l._clearCachedRowsHeight(e(n))}))},_rowResizing:function(){var t,o,l,n,i=this,a=i.options;a.resizable&&!0===a.resizable.rows&&(i.tbody.parent().add(i.lockedTable).on(Ze+q,".k-grid-footer tr, .k-table-tbody tr",i._createRowResizer.bind(i)),i.rowResizing&&i.rowResizing.destroy(),t=i._getResizerContainer(),i.rowResizing=new r.Resizable(t,{handle:".k-resizer-wrap",start:function(t){n=e(t.currentTarget).data(vt),i.lockedTable&&(n=i._addLockedRowResizing(n)),n.addClass(me),i._detachRowResizerEvents(),o=t.y.location,l=c(n)},resize:function(e){var r=l+e.y.location-o,a=0;n.length>1&&(a=i._getMinRowHeight(n)),r<a&&(r=a),n.css("height",r),i._setupRowResizer(i.rowResizer,n,i._getResizerTop(n,t)+r)},resizeend:function(){var e,t=c(n),o=!1;n.hasClass(ve)?(e=i.select(),n.length>1&&e.length>n.length&&(e=i.lockedTable.find(x+ve).not(n),o=!0)):e=n,i._mapResizedRows(e,o,t),n.removeClass(me),i.rowResizer.removeClass(be),i.rowResizer.addClass(me),i._attachRowResizerEvents(),o&&(e=i.select()),l!=t&&i.trigger(Oe,{row:n,rows:e,oldHeight:l,newHeight:t}),n=null}}))},_draggable:function(){var t=this,r=t.options.reorderable;if(!0===r||r&&r.columns){t._draggableInstance&&t._draggableInstance.destroy();var l=t.wrapper.children(".k-grid-header");l.addClass("k-grid-draggable-header"),t._draggableInstance=t.wrapper.kendoDraggable({group:o.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+D:"table:first>.k-grid-header "+D,dragstart:function(){l.children(".k-grid-header-wrap").off("scroll"+q+"scrolling").on("scroll"+q+"scrolling",(function(e){t.virtualScrollable?o.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):o.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}))},dragend:function(){t._resetResizeHandleHeader(),l.children(".k-grid-header-wrap").off("scroll"+q+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(t){var r=t.attr(o.attr("title"));return r&&(r=o.htmlEncode(r)),e('<div class="k-reorder-clue k-drag-clue" />').html(r||t.attr(o.attr("field"))||t.text()).prepend(o.ui.icon({icon:"cancel",iconClass:"k-drag-status"}))}}).data("kendoDraggable")}},_reorderable:function(){let t=this,o=t.options.reorderable;(!0===o||o&&o.columns)&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dropFilter:D,allowDropAfterLastItem:!0,dragOverContainers:function(e,o){let r=Yo(t.columns);return!1!==r[e].lockable&&Jo(r,t.columns,e,o)>-1},inSameContainer:function(o){let r=e(o.source).parent()[0],l=e(o.target).parent()[0],n=o.sourceIndex,i=o.targetIndex,a=Yo(t.columns),s=a&&a[n]&&!!a[n].lockable;return t._isLocked()&&s&&(r=e(o.source.closest(".k-grid-header"))[0],l=e(o.target.closest(".k-grid-header"))[0]),r===l&&Jo(a,t.columns,n,i)>-1},change:function(e){let o=Yo(t.columns);let r=o[e.oldIndex];let l=Jo(o,t.columns,e.oldIndex,e.newIndex);t.trigger(Ve,{newIndex:l,oldIndex:k(r,o),column:r}),t.reorderColumn(l,r,"before"===e.position)}}))},_reorderHeader:function(e,t,o,r){var l=this;var n=jo(e[0],l.columns);var i=jo(t,l.columns);var a;var s;var d=[];for(var c=0;c<e.length;c++)e[c].columns&&(d=d.concat(e[c].columns));s=r?yo(r,r,"tr:eq("+n.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):yo(l.lockedHeader,l.thead,"tr:eq("+n.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var u=sr(e).length;var p=sr([t]).length;var h,g,f,m,b,k;d.length?(u>0&&0===p?(a="prepend",Go(e,t,d,l.columns,l.lockedHeader.find("thead"),l.thead,this._groups(),a)):0===u&&p>0&&(a=0!==i.cell||!e[0].columns||t.columns||l._group?"append":"prepend",Go(e,t,d,dr(l.columns),l.thead,l.lockedHeader.find("thead"),this._groups(),a)),(t.columns||n.cell-i.cell>1||i.cell-n.cell>1)&&(t=Ko(l.columns,t,e[0],o,l.columns))&&(u>0&&0===p?l._reorderHeader(d,t,o,l.thead):0===u&&p>0?l._reorderHeader(d,t,o,l.lockedHead):l._reorderHeader(d,t,o))):u!==p&&(h=s[n.cell],g=l.columns,f=u,m=$o(sr(g)),b=$o(dr(g)),k=h.rowSpan,h.rowSpan=f?m>b?k-(m-b)||1:k+(b-m):m>b?k+(m-b):k-(b-m)||1),wo(s,n.cell,i.cell,o,e.length)},_reorderContent:function(t,o,r){var l=this;var n=e();var i=t[0];var a=Lo(t);var s=k(i,br(l.columns));var d=k(o,br(l.columns));var c=k(a[0],hr(l.columns));var u=k(o,hr(l.columns));var p=sr(l.columns).length;var h=!!o.locked;var g=l.footer||l.wrapper.find(".k-grid-footer");var f,m,b;if(f=m=u,o.hidden){var _=h?sr(l.columns):dr(l.columns);Lo(_).length>0?(f=m=u=this._findClosestVisibleColumnIndex(_,d),b=Lo(_.slice(d)).length>0):h?(u=l.lockedTable.find("colgroup"),f=l.lockedHeader.find("colgroup"),m=e(l.lockedFooter).find(">table>colgroup")):(u=l.tbody.prev(),f=l.thead.prev(),m=g.find(".k-grid-footer-wrap").find(">table>colgroup"))}l._hasFilterRow()&&wo(l.wrapper.find(".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)"),s,d,r,t.length),c>=0&&wo(yo(l.lockedHeader,l.thead.prev(),F),c,f,b||r,a.length),l.options.scrollable&&c>=0&&!l._hasVirtualColumns()&&wo(yo(l.lockedTable,l.tbody.prev(),F),c,u,b||r,a.length),g&&g.length&&(c>=0&&wo(yo(l.lockedFooter,g.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),c,m,b||r,a.length),wo(g.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),s,d,r,t.length));var v=l.tbody.children(":not(.k-grouping-row,.k-detail-row)");l.lockedTable&&(p>d?p<=s&&Lr(l.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),l.table.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length):p>s&&Lr(l.table.find(">tbody>tr.k-grouping-row:not([hidden])"),l.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length),n=l.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var C=0,w=v.length;C<w;C+=1)wo(yo(n[C],v[C],">td:not(.k-group-cell,.k-hierarchy-cell)"),s,d,r,t.length)},_findClosestVisibleColumnIndex:function(e,t){var o=Lo(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),r=Lo(o)[0];return k(r,Lo(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(br(this.columns)[e])},_hasReorderableRows:function(){return this.options.reorderable&&this.options.reorderable.rows},_draggableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell,l=!1,n=!(!t._isMobile&&!o.support.mobileOS);t._draggableRowsInstance&&t._draggableRowsInstance.destroy(),!1!==this.options.reorderable.rows.clickMoveClick&&this._hasDragHandleColumn&&(l=!0),t._draggableRowsInstance=t.tbody.kendoDraggable({holdToDrag:n,showHintOnHold:n,preventOsHoldFeatures:n,group:"row-draggable",autoScroll:!0,filter:(r?" > .k-selected":" > "+z)+(t._hasDragHandleColumn?" > [ref-grid-drag-cell]":":not(:has([data-container-for]))"),hint:function(l){var n=e('<div class="k-reorder-clue k-drag-clue">'+o.ui.icon({icon:"cancel",iconClass:"k-drag-status"})+"</div>");if(r&&t.select().length>1&&t.lockedContent)n.append("<span>"+t.select().length/2+" "+C(t.options.messages.itemsSelected)+"</span>");else if(r&&t.select().length>1&&!t.lockedContent)n.append("<span>"+t.select().length+" "+C(t.options.messages.itemsSelected)+"</span>");else{var i=l.closest(z).clone();i.find("td.k-command-cell").remove(),i.find("td").each((function(e,t){n.append("<span>"+t.innerText.replace(/<(\/?)script([^>]*)>/gi,"")+"&nbsp;</span>")}))}return n},clickMoveClick:l,cursorOffset:{top:0,left:0}}).data("kendoDraggable")},_reorderableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell;t.tbody.data("kendoReorderable")&&t.tbody.data("kendoReorderable").destroy(),t.tbody.kendoReorderable({smartPosition:!1,draggable:t._draggableRowsInstance,dragOverContainers:function(o,l){var n=!0,i=e(z,t.content).eq(l);return r&&(n=!i.is(".k-selected")),n},inSameContainer:function(t){return!r||!e(t.target).is(".k-selected")},dropFilter:"> "+z,allowIcon:"insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e,t){var r=o.getOffset(t.children(R).eq(0)).left;e.css({transform:"translate(0,-50%)",left:r})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){t._triggerRowRorder(e)}})},_triggerRowRorder:function(e){var t=this,r={newIndex:"after"===e.position?e.newIndex+1:e.newIndex,oldIndex:e.oldIndex},l=e.element,n=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell;r=n&&t.select().length>1?g(r,{rows:t.select()}):g(r,{row:l}),t.trigger(je,r)||t.reorderRows(n?t.select():l,r.newIndex)},reorderRowTo:function(e,t){var o=this,r=o.dataItem(e),l=e.index();t<0||t===l||o.trigger(je,{row:e,oldIndex:e.index(),newIndex:t})||o.dataSource.pushMove(t,[r])},reorderRows:function(e,t){var o=this,r=o.dataSource,l=o.tbody.children(z).length,n=o.dataItem(o.tbody.children(z).eq(t)),i=e.toArray().map((function(e){let t=o.dataItem(e);return t._isMoved=!0,t}));n?t=r.indexOf(n):(n=o.dataItem(o.tbody.children(z).eq(l-1)),t=r.indexOf(n)+1),t>=0&&(o._rowDropping=!0,r.pushMove(t,i),o._rowDropping=!1)},autoFitColumns:function(e){var t=this;e=e||t.columns;for(var o=0;o<e.length;o++){var r=e[o];r.columns?t.autoFitColumns(r.columns):t.autoFitColumn(r)}},autoFitColumn:function(t){var r,l,n,i,a,s,c,u,p,g,f=this,b=f.options,_=f.columns,v=f.lockedHeader?wr(f.lockedHeader.find(">table>thead")).filter(Fo).length:0,C="col:not(.k-group-col):not(.k-hierarchy-col)",w="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?_[t]:h(t)?m(Xo(_),(function(e){return e===t}))[0]:m(Xo(_),(function(e){return e.field===t}))[0])&&Do(t)){i=br(_),c=t.minResizableWidth,r=k(t,i),(l=(n=(a=t.locked)?f.lockedHeader.children("table"):f.thead.parent()).find("[data-index='"+r+"']")).find("a.k-grid-column-menu, a.k-grid-filter-menu");var y=a?f.lockedTable:f.table,S=f.footer||e();f.footer&&f.lockedContent&&(S=a?f.footer.children(".k-grid-footer-locked"):f.footer.children(".k-grid-footer-wrap"));var x=S.find("table").first();f.lockedHeader&&!a&&(r-=v);for(var T=0;T<i.length&&i[T]!==t;T++)i[T].hidden&&r--;b.scrollable?(s=n.find(C).eq(r).add(y.children("colgroup").find(C).eq(r)).add(x.find("colgroup").find(C).eq(r)),a||(u=y.parent(),p=o.scrollLeft(u)),f._hasVirtualColumns()&&(r=k(t,f.virtualCols))):s=y.children("colgroup").find(C).eq(r);var H=n.add(y).add(x);Kt.safari&&l.css("white-space","initial");var R=d(l);s.width(""),H.css("table-layout","fixed"),s.width(rt),H.addClass("k-autofitting"),H.css("table-layout",""),g=d(l);var I=Math.ceil(Math.max(g,d(y.find("tr:not(.k-grouping-row)").eq(0).children(w).eq(r)),d(x.find(vt).eq(0).children(w).eq(r))))+1;if(c&&c>I&&(I=c),s.width(I),t.width=I,Kt.safari&&l.css("white-space",""),b.scrollable){var A,E=n.find("col"),M=0;for(var z=0,F=E.length;z<F;z+=1)if((A=E[z].style.width)&&-1==A.indexOf("%"))M+=parseInt(A,10);else{if(!E.eq(z).hasClass("k-group-col")){M=0;break}M+=parseInt(E.eq(z).width(),10)}M&&H.each((function(){this.style.width=M+_t}))}H.removeClass("k-autofitting"),p&&o.scrollLeft(u,p),f.trigger(qe,{column:t,oldWidth:R,newWidth:I}),f._applyLockedContainersWidth(),f._syncLockedContentHeight(),f._syncLockedHeaderHeight(),f._updateStickyColumns()}},reorderColumn:function(e,o,r){var l,n=this,i=To(o,n.columns),a=i?i.columns:n.columns,s=k(o,a),d=a[e],c=n.virtualScroll||{},u=!!d.locked,p=sr(n.columns).length,h=m(br(n.columns),(function(e){return e.groupHeaderColumnTemplate}));if(!n._isStackedMode()&&s!==e&&(o.locked||!u||1!=dr(n.columns).length)&&(!o.locked||u||1!=p)){n._hideResizeHandle(),r===t&&(r=e<s);var g=[o];n._reorderHeader(g,d,r),n.lockedHeader&&(or(n.thead),or(n.lockedHeader)),d.columns&&(d=(d=br(d.columns))[r?0:d.length-1]),o.columns&&(g=br(o.columns)),n._reorderContent(g,d,r),l=(l=!!o.locked)!=u,o.locked=u,a.splice(r?e:e+1,0,o),a.splice(s<e?s:s+1,1),n._updateLockedCols(),n._updateCols(),n._templates(),n._updateColumnCellIndex(),n._updateColumnSorters(),h.length>0&&n._renderGroupRows(),n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedHeaderHeight(),n._syncLockedContentHeight(),n._updateFirstColumnClass(),n._updateStickyColumns(),c.columns&&n.refresh(),l&&(u?n.trigger(Ge,{column:o}):n.trigger(We,{column:o}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=Wo(this.lockedHeader.find("thead"),sr(this.columns))),Wo(this.thead,dr(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&!e.locked&&!e.hidden){e.sticky&&this.unstickColumn(t.indexOf(e));var o=sr(t).length-1;this.reorderColumn(o,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.locked&&!e.hidden){var o=sr(t).length;this.reorderColumn(o,e,!0)}},stickColumn:function(e){var t=this.columns;!(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(cr(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var o=0;const r=this._isStackedMode()?"div.k-grid-stack-cell":"td";return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(o=br(sr(this.columns)).length),e(t).parent().children(r+":not(.k-group-cell,.k-hierarchy-cell)").index(t)+o},_modelForContainer:function(t){(t=e(t)).is(vt)||"popup"===this._editMode()||(t=t.closest(vt));var r=t.attr(o.attr("uid"))||t.find("[ref='popup-edit-form']").attr(o.attr("uid"));return this.dataSource.getByUid(r)},_calculateColumnIndex:function(t){var o=this.cellIndex(t);var r=0;return this._hasVirtualColumns()&&(r=(r=parseInt(e(t).closest(vt).find("td").first().attr("colspan"),10))>1?r-1:0),o+r},_editable:function(){let r=this,l=r.options.editable,n=o.support.mobileOS,i=!(!r._isMobile&&!n),s=n&&n.ios&&("chrome"===n.browser||"edge"===n.browser);r._isEditableEnabled=r._isEditableEnabled!==t?r._isEditableEnabled:!l.readonly;const d=r._isStackedMode();if(r._isEditableEnabled||r._removeEditableClickHandlers(),l&&r._isEditableEnabled){"incell"===r._editMode()?(r.table.add(r.lockedTable).on(Qe+q,E+">"+M,(function(t){let l=e(t.target);"incell"===r._editMode()&&l.hasClass("k-checkbox")&&l.prev().attr(o.attr("bind"))&&t.preventDefault()})),!1!==l.update&&(Yt&&r.wrapper.on(Ke+q,".k-edit-cell > input[type='checkbox']",(function(t){e(t.target).trigger("focus")})).on(Ke+q,".k-edit-cell",(function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").trigger("focus")})).on(Qe+q,"tr:not(.k-grouping-row) > td",(function(t){var o=r._editContainer;o&&o[0]&&(e.contains(o[0],t.target)||o[0]===t.target)?r._mousedownOnEditCell=!0:r._mousedownOnEditCell=!1})),r.editableUserEvents=new o.UserEvents(r.wrapper,{filter:d?".k-grid-stack-row:not(.k-grouping-row) div.k-grid-stack-cell":"tr:not(.k-grouping-row) > td",allowSelection:!0,preventDefault:s,supportDoubleTap:i,fastTap:i,[i?"doubleTap":"tap"]:function(t){var o=e(t.target),l=r.lockedTable&&o.closest("table")[0]===r.lockedTable[0];if(r._mousedownOnEditCell=!1,o.hasClass("k-hierarchy-cell")||o.hasClass("k-detail-cell")||o.hasClass("k-group-cell")||o.hasClass("k-edit-cell")||o.hasClass("k-drag-cell")||o.hasClass("k-grid-stack-edit-cell")||o.has(".k-grid-remove-command").length||o.closest("tbody")[0]!==r.tbody[0]&&!l||e(t.target).is(":input"))return;let n;d&&(n=o.parent().children().index(o)),r.editable?r.editable.end()?(e(a()).trigger("blur"),r.closeCell(),r._requestInProgress||r.editCell(o,n)):r._scrollVirtualWrapper():r.editCell(o,n)}}),r.wrapper.on("focusin"+q,(function(){e.contains(this,a())||(clearTimeout(r.timer),r.timer=null)})).on("focusout"+q,(function(t){var o=!0;(Yt&&r._mousedownOnEditCell||r._virtualColScroll)&&(o=!1),r._mousedownOnEditCell=!1,o&&(r.timer=setTimeout((function(){!function(){let t=a(),o=r._editContainer;o&&o[0]&&!e.contains(o[0],t)&&o[0]!==t&&!e(t).closest(".k-animation-container").length&&(r.editable.end()?(r.closeCell(),r._toggleToolbarEditingItemsVisibility()):r._scrollVirtualWrapper())}()}),1))})))):!1!==l.update&&(r._editCommandClickHandler=r._editCommandClick.bind(r),r.wrapper.on(Ke+q,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",r._editCommandClickHandler),r._isVirtualInlineEditable()&&r.wrapper.on("focusout"+q,"tr:not(.k-grouping-row) > td",(function(){r.editable&&!r.editable.end()&&r._scrollVirtualWrapper()}))),r._removeCommandClickHandler=r._removeCommandClick.bind(r),r.wrapper.on(Ke+q,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",r._removeCommandClickHandler)}},_getLastSelectedItemModel:function(){const e=this;if(!e.options.selectable)return;const t=e.getSelectedData();if(!t||!t.length)return;const o=t[t.length-1];return e.dataSource.getByUid(o.uid)},_removeToolbarClick:function(e){e.event?(e.event.preventDefault(),e.event.stopPropagation()):e.preventDefault();const t=this;const r=this._getLastSelectedItemModel();if(!r)return;const l=t.tbody.children("["+o.attr("uid")+"="+r.uid+"]");t.removeRow(l),t.one(oe,(()=>{t._toggleToolbarEditingItemsVisibility()}))},_editToolbarClick:function(e){e.event?(e.event.preventDefault(),e.event.stopPropagation()):e.preventDefault();if("incell"===this._editMode())return;const t=this._getLastSelectedItemModel();t&&this.editRow(t)},_editCommandClick:function(t){let o=e(t.currentTarget);this._belongsToGrid(o)&&(t.preventDefault(),this.editRow(o.closest(vt)))},_removeCommandClick:function(t){let o=this,r=o.options.editable,l=e(t.currentTarget);o._belongsToGrid(l)&&(!1!==r.destroy?(t.preventDefault(),t.stopPropagation(),o.removeRow(l.closest(vt))):(t.stopPropagation(),o._confirmation()||t.preventDefault()),o._toggleToolbarEditingItemsVisibility())},editCell:function(t,o){t=e(t);let r=this,l=0===o||o?o:r._calculateColumnIndex(t),n=br(r.columns)[l],i=r._modelForContainer(t);const a=r._isStackedMode();const s=a?"k-grid-stack-edit-cell":"k-edit-cell";r.closeCell();const d=a?t.find(".k-grid-stack-content"):t;if(i&&Nr(n,i)&&!n.command){if(r.trigger(G,{model:i}))return;r._attachModelChange(i),r._editContainer=d,r._shouldClearEditableState&&r._clearEditableState(),t.addClass(s);const e=(r._isVirtualIncellEditable()||r._hasVirtualColumns())&&r._editableState;r.editable=d.kendoEditable({fields:Cr(n,r._isAdaptive()?"auto":"none"),model:i,size:r.options.size,target:r,change:function(e){r.trigger(W,{values:e.values,container:t,model:i})&&e.preventDefault()},skipFocus:e}).data("kendoEditable");let o=t.closest(vt);a||o.addClass("k-grid-edit-row"),!0!==i.new||a||(o.addClass("k-grid-add-row"),delete i.new),r.lockedContent&&(qr(o[0],r._relatedRow(o).addClass("k-grid-edit-row")[0]),o.hasClass("k-grid-add-row")&&r._relatedRow(o).addClass("k-grid-add-row"),r._syncLockedScroll()),r.trigger(V,{container:t,model:i}),r._toggleToolbarEditingItemsVisibility()}},enableEditing:function(){let e=this,t=e.wrapper.find(".k-grid-toolbar");if(!e._isEditableEnabled){e._isEditableEnabled=!0,e._editable();let o=t.find(".k-grid-add").getKendoButton();let r=t.find(".k-grid-edit-command").getKendoButton();let l=t.find(".k-grid-remove-command").getKendoButton();let n=t.find(".k-grid-cancel-changes").getKendoButton();let i=t.find(".k-grid-save-changes").getKendoButton();let a=t.find(".k-grid-cancel-command").getKendoButton();let s=t.find(".k-grid-save-command").getKendoButton();o&&o.bind("click",e._createClickHandler),r&&r.bind("click",e._editClickHandler),l&&l.bind("click",e._destroyClickHandler),n&&n.bind("click",e._cancelClickHandler),i&&i.bind("click",e._saveClickHandler),a&&a.bind("click",e._editCancelClickHandler),s&&s.bind("click",e._updateClickHandler)}e._toggleToolbarEditingItemsVisibility()},disableEditing:function(){let e=this;e._isEditableEnabled&&("incell"===e._editMode()?e.closeCell():e.cancelRow(),e._clearEditableState(),e._destroyEditable(),e.editableUserEvents&&(e.editableUserEvents.destroy(),e.editableUserEvents=null),e._removeEditableClickHandlers(),e._isEditableEnabled=!1,e._toggleToolbarEditingItemsVisibility())},_removeEditableClickHandlers:function(){let e=this,t=e.wrapper.find(".k-grid-toolbar");e.wrapper.off(Ke+q,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",e._editCommandClickHandler),e.wrapper.off(Ke+q,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",e._removeCommandClickHandler),t.off(Ke+q,".k-grid-add",e._createClickHandler),t.off(Ke+q,".k-grid-edit-command",e._editClickHandler),t.off(Ke+q,".k-grid-remove-command",e._destroyClickHandler);let o=t.find(".k-grid-add").getKendoButton();let r=t.find(".k-grid-edit-command").getKendoButton();let l=t.find(".k-grid-remove-command").getKendoButton();let n=t.find(".k-grid-cancel-changes").getKendoButton();let i=t.find(".k-grid-save-changes").getKendoButton();let a=t.find(".k-grid-cancel-command").getKendoButton();let s=t.find(".k-grid-save-command").getKendoButton();o&&o.unbind("click"),r&&r.unbind("click"),l&&l.unbind("click"),n&&n.unbind("click"),i&&i.unbind("click"),a&&a.unbind("click"),s&&s.unbind("click"),e._editCommandClickHandler=null,e._removeCommandClickHandler=null},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent();var r=e[0].offsetWidth>t[0].clientWidth?o.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-r)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table");var t=this.thead.parent();this._adjustRowsHeight(e,t),function(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var o=e.offsetHeight;var r=t.offsetHeight;var l;var n;o>r?(l=t.rows[t.rows.length-1],qt.test(l.className)&&(l=t.rows[t.rows.length-2]),n=o-r):(l=e.rows[e.rows.length-1],qt.test(l.className)&&(l=e.rows[e.rows.length-2]),n=r-o),l.style.height=l.offsetHeight+n+_t}}(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){let e=this;const t=e._editContainer&&e._editContainer.length&&e._editContainer.closest(".k-window").length?"kendoWindow":"kendoActionSheet";let o=function(){if(e.editable){let o=e.editView?e.editView.element:e._editContainer;let r=e._editContainer.data(t);o&&(r&&(o=r.wrapper),o.off(Ke+q,".k-grid-cancel-command, button[ref-cancel-button], [ref-actionsheet-action-button]:not(.k-button-solid-primary)",e._editCancelClickHandler),o.off(Ke+q,".k-grid-save-command, button[ref-update-button], [ref-actionsheet-action-button].k-button-solid-primary",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,r&&r.destroy(),e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?o():e._editableIsClosing?e._editContainer.data(t).bind("deactivate",o):(e._editableIsClosing=!0,e._editContainer.data(t).bind("deactivate",o).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,o=e._modelForContainer(t);o&&o.unbind(X,e._modelChangeHandler)},closeCell:function(e){let t,o,l,n,i=this,a=i._editContainer;if(!a)return;if(l=i._modelForContainer(a),e&&i.trigger("cancel",{container:a,model:l}))return;const s=i._isStackedMode();const d=s?"k-grid-stack-edit-cell":"k-edit-cell";const c=a.closest(x+d);i.trigger(Y,{type:e?"cancel":"save",model:l,container:a});const u=s?c.parent().children().index(c):i._calculateColumnIndex(a);if(s?c.removeClass(d):a.removeClass(d),t=br(i.columns)[u],n=i.editable&&i.editable.validatable&&i.editable.validatable.errors(),e&&l.dirtyFields&&l.dirtyFields[t.field]&&n.length&&delete l.dirtyFields[t.field],o=a.closest(vt).removeClass("k-grid-edit-row"),o.hasClass("k-grid-add-row")&&o.removeClass("k-grid-add-row"),i.lockedContent){const e=i._relatedRow(o);e.removeClass("k-grid-edit-row"),e.hasClass("k-grid-add-row")&&e.removeClass("k-grid-add-row")}if(i._destroyEditable(),i._displayCell(a,t,l),i._shouldClearEditableState&&i._clearEditableState(),i.trigger("itemChange",{item:o,data:l,ns:r}),i._activeStackedCell&&i._setCurrentStackedCell(a),i.lockedContent){const e=o&&o.data("uid");const t=(i._cachedRowsHeight&&i._cachedRowsHeight[e])??"";qr(o.css(tt,t)[0],i._relatedRow(o).css(tt,t)[0])}},_displayCell:function(e,t,r){var l={storage:{},count:0},n=g({},o.Template,this.options.templateSettings),i=o.template(this._cellTmpl(t,l),n);l.count>0&&(i=i.bind(l.storage)),e.empty().html(i(r))},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(o){var r,l,n,i=this,a=i._editMode();"incell"!==a&&i.cancelRow(),o=e(o),i.lockedContent&&(o=o.add(i._relatedRow(o))),o=o.hide(),i.dataSource._isGroupPaged()&&i._removeGroupIfEmpty(o),(r=i._modelForContainer(o))!=t&&r.hasOwnProperty("_isMoved")&&delete r._isMoved,r&&!i.trigger($,{row:o,model:r})?(n=i.dataSource.options.schema,i._selectedIds&&n&&n.model&&(l=r[i._getSchemaIdField()],delete i._selectedIds[l]),i.dataSource.remove(r),"inline"!==a&&"popup"!==a||i.dataSource.sync()):"incell"===a&&i._destroyEditable()},_editMode:function(){let e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){let r,l=this;t instanceof n?r=t:(t=e(t),r=l._modelForContainer(t));let i=l._editMode();let a;if(l.cancelRow(),r){if(t=l.tbody.children("["+o.attr("uid")+"="+r.uid+"]"),l._attachModelChange(r),"popup"===i)l._createPopupEditor(r);else if("inline"===i)l._createInlineEditor(t,r);else if("incell"===i){const o=l._isStackedMode();(o?t.find(".k-grid-stack-cell:not(.k-command-cell):not(.k-drag-cell)"):t.children(R)).each((function(){let t=e(this);const n=o?t.parent().children().index(t):l._calculateColumnIndex(t);let i=br(l.columns)[n];if(r=l._modelForContainer(t),r&&(!r.editable||r.editable(i.field))&&i.field&&!i.selectable&&!i.draggable)return l.editCell(t,n),!1}))}a=l.editView?l.editView.element:"popup"===i?l._editContainer?.parent():l._editContainer,a&&(this._editCancelClickHandler||(this._editCancelClickHandler=this._editCancelClick.bind(this)),a.on(Ke+q,".k-grid-cancel-command, button[ref-cancel-button], [ref-actionsheet-action-button]:not(.k-button-solid-primary)",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=this._editUpdateClick.bind(this)),a.on(Ke+q,".k-grid-save-command, button[ref-update-button], [ref-actionsheet-action-button].k-button-solid-primary",this._editUpdateClickHandler)),l._toggleToolbarEditingItemsVisibility()}},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation?e.stopPropagation():e.event&&e.event.stopPropagation&&e.event.stopPropagation(),this.saveRow(),this._preventOnCloseEditableChanges="popup"===this._editMode(),this.one(oe,(()=>{this._toggleToolbarEditingItemsVisibility()}))},_editCancelClick:function(t){var o=this;var r=o.options.navigatable;var l=o.editable.options.model;var n=o.editView?o.editView.element:o._editContainer;if(t.preventDefault(),t.stopPropagation?t.stopPropagation():t.event&&t.event.stopPropagation&&t.event.stopPropagation(),!o.trigger("cancel",{container:n,model:l})){var i=o.items().index(e(o.current()).parent());o.cancelRow(),r&&(o._setCurrent(o.items().eq(i).children().filter(M).first()),Gr(o.table,!0)),this._toggleToolbarEditingItemsVisibility()}},_editFields:function(e,t){var o=[];var r;for(var l=0;l<e.length;l++)(r=e[l]).selectable||r.command||Nr(r,t)&&o.push(Cr(r,this._isAdaptive()?"auto":"none"));return o},_createPopupEditor:function(t){var l=this;var n="<div "+o.attr("uid")+'="'+t.uid+'" ref="popup-edit-form"><'+(l._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">');var i;var a;var s;var d;var c;var u;var p;var f;var m;var b;var k=br(l.columns);var _;var v=o.guid();var w=l.options.editable;var y=w.template;var S=h(w)?w.window:{};var x=g({},o.Template,l.options.templateSettings);var T;var H;const R=l._isAdaptive();if(!l.trigger(G,{model:t})){if(S=S||{},y)for(typeof y===it&&(y=o.unescape(y)),n+=o.template(y,x)(t),s=0,d=k.length;s<d;s++)(i=k[s]).command&&(b=Vr(i.command,"edit"))&&(a=b);else for(s=0,d=k.length;s<d;s++)(i=k[s]).selectable||(i.command?i.command&&(b=Vr(i.command,"edit"))&&(a=b):l._isMobile&&(n+='<li class="k-item k-listgroup-item">',Nr(i,t)?(n+='<label class="k-label k-listgroup-form-row">',n+='<span class="k-item-title k-listgroup-form-field-label">'+(i.title&&(l.options.encodeTitles?el(i.title,!0):i.title)||i.field||"")+"</span>",n+='<div class="k-listgroup-form-field-wrapper" id="'+i.field+"_"+v+'" '+o.attr("container-for")+'="'+i.field+'"></div>',n+="</label>"):(T={storage:{},count:0},c=o.template(l._cellTmpl(i,T),x),T.count>0&&(c=c.bind(T.storage)),n+='<label class="k-label k-listgroup-form-row k-no-click">',n+='<span class="k-item-title k-listgroup-form-field-label">'+(i.title&&(l.options.encodeTitles?el(i.title,!0):i.title)||i.field||"")+"</span>",n+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+c(t)+"</span>",n+="</label>"),n+="</li>"));if(a&&h(a)&&(h(a.text)&&(u=a.text.update,p=a.text.cancel),h(a.iconClass)&&(f=a.iconClass.update,m=a.iconClass.cancel),a.attr&&(_=a.attr)),l._isMobile){n+="</ul></div>";let e=C(l.options.messages.commands.cancel);let t=C(l.options.messages.commands.update);l.editView=l.pane.append("<div data-"+o.ns+'role="view" class="k-grid-edit-form"><div data-'+o.ns+' class="k-appbar k-appbar-primary">'+o.html.renderButton(`<button class="k-header-cancel k-grid-cancel-command" title="${e}" aria-label="${e}"></button>`,{fillMode:"flat",icon:"chevron-left"})+'<span class="k-spacer"></span>'+`<span>${C(l.options.messages.commands.edit||"Edit")}</span><span class="k-spacer"></span>`+o.html.renderButton(`<button class="k-header-done k-grid-save-command" title="${t}" aria-label="${t}"></button>`,{fillMode:"flat",icon:"check"})+"</div><div data-"+o.ns+'role="content" class="'+Jt+'">'+n+"</div></div>"),H=l._editContainer=l.editView.element.find("[ref='popup-edit-form']")}else{let o=e(l._createButton({name:"update",text:u,attr:_,iconClass:f,size:"medium",skipCommandClass:!0})).attr("ref-update-button","");let r=e(l._createButton({name:"canceledit",text:p,attr:_,iconClass:m,size:"medium",skipCommandClass:!0})).attr("ref-cancel-button","");n+="</div>",H=l._editContainer=R?e(n).appendTo("body").eq(0).kendoActionSheet({modal:!0,adaptive:!0,title:t.id?"Edit record":"Add new record",fullscreen:l.smallMQL.mediaQueryList.matches,closeButton:!0,actionButtons:[{text:"Cancel",icon:"cancel"},{text:"Save",icon:"save",themeColor:"primary"}],open:function(e){e.sender.element.removeClass("k-popup"),l.editable.element.focus()},close:function(o){if(o.sender.element.trigger("focus"),l._preventOnCloseEditableChanges||!l.trigger("cancel",{container:H,model:t})){var r=l.items().index(e(l.current()).parent());l._preventOnCloseEditableChanges||(l._editableIsClosing=!0,l.cancelRow(!1,!0)),l.options.navigatable&&(l._isStackedMode()?l._setCurrentStackedCell():(l._setCurrent(l.items().eq(r).children().filter(M).first()),Gr(l.table,!0))),l._toggleToolbarEditingItemsVisibility()}else o.preventDefault()}}):e(n).appendTo(l.wrapper).eq(0).kendoWindow(g({modal:!0,resizable:!1,draggable:!0,title:l.options.messages.commands.edit||"Edit",_footerTemplate:()=>'<div class="k-actions k-actions-start k-actions-horizontal k-window-actions">'+o[0].outerHTML+r[0].outerHTML+"</div>",visible:!1,close:function(o){if(o.userTriggered){if(o.sender.element.trigger("focus"),l.trigger("cancel",{container:H,model:t}))return void o.preventDefault();var r=l.items().index(e(l.current()).parent());l._editableIsClosing=!0,l.cancelRow(),l._toggleToolbarEditingItemsVisibility(),l._isStackedMode()?l._setCurrentStackedCell():(l._setCurrent(l.items().eq(r).children().filter(M).first()),Gr(l.table,!0))}}},S))}y||l._isMobile?(l.editable=l._editContainer.kendoEditable({fields:l._isMobile&&!y?l._editFields(k,t):null,model:t,clearContainer:!1,target:l,skipFocus:!0}).data("kendoEditable"),R&&l.editable.element.find(".k-edit-form-container").removeClass("k-edit-form-container")):(l.editable=new r.Form(l._editContainer.find(".k-edit-form-container"),{items:l._editFields(k,t),buttonsTemplate:()=>"",formData:t,size:l._isAdaptive()?"large":"medium"}).editable,l._editContainer.append(undefined),R&&l.editable.element.removeClass("k-edit-form-container")),l._openPopUpEditor(R),l.trigger(V,{container:H,model:t})}},_openPopUpEditor:function(e){var t=this;const o=e?"kendoActionSheet":"kendoWindow";var r=t._editContainer?t._editContainer.data(o):null;var l=(t.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):r&&(e||l.position?e&&r.fullscreen(t.smallMQL.mediaQueryList.matches):r.center(),r.open())},_createInlineEditor:function(t,r){var l=this;var n;var i;var a;var s=[];const d=l._isStackedMode();if(l.trigger(G,{model:r}))return;l.lockedContent&&(t=t.add(l._relatedRow(t)));let c=d?t.children(":not(.k-group-cell,.k-hierarchy-cell)").find(".k-grid-stack-cell:not(.k-drag-cell)"):t.children(":not(.k-group-cell,.k-hierarchy-cell,.k-drag-cell)");const u=br(d?Lo(l.columns):l.columns);l.options.navigatable&&d&&function(e){e.removeAttr(lt)}(c),c.each((function(){if(i=e(this),n=u[l._calculateColumnIndex(i)])if(!n.command&&Nr(n,r)){s.push(Cr(n,l._isAdaptive()?"auto":"none"));let e=d?i.children(".k-grid-stack-content"):i;e.attr(o.attr("container-for"),n.field),e.empty()}else if(n.command){var t,c,p,g,f;if(a=Vr(n.command,"edit"))i.empty(),h(a)&&(h(a.text)&&(t=a.text.update,c=a.text.cancel),h(a.iconClass)&&(p=a.iconClass.update,g=a.iconClass.cancel),a.attr&&(f=a.attr)),e(l._createButton({name:"update",text:t,attr:f,iconClass:p,skipTabIndex:!0})+l._createButton({name:"canceledit",text:c,attr:f,iconClass:g,skipTabIndex:!0})).appendTo(i)}})),l._editContainer=t,l._editContainer.addClass("k-grid-edit-row"),!0===r.new&&(l._editContainer.addClass("k-grid-add-row"),delete r.new),l._shouldClearEditableState&&l._clearEditableState(),l.editable=new o.ui.Editable(l._editContainer,{target:l,fields:s,size:l.options.size,model:r,skipFocus:l._isVirtualInlineEditable()&&l._editableState&&!!l._editableState.field||l._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(qr(t[0],t[1]),l._applyLockedContainersWidth(!0)),d&&c.addClass("k-grid-stack-edit-cell"),l.trigger(V,{container:t,model:r})},cancelRow:function(e){var t,r=this,l=r._editContainer;if(l){if(!(t=r._modelForContainer(l))||e&&r.trigger("cancel",{container:l,model:t}))return;r._destroyEditable(),r.dataSource.cancelChanges(t),r._clearEditableState(),"popup"!==r._editMode()?r._displayRow(l):r._displayRow(r.tbody.find("["+o.attr("uid")+"="+t.uid+"]")),r._aria()}},saveRow:function(){var t=this;var o=this._editContainer;var r=this._modelForContainer(o);var l=e.Deferred();var n;if(!o||!this.editable)return l.resolve().promise();if(!(n=t.editable&&t.editable.end())||this.trigger(W,{container:o,model:r}))return n||t._scrollVirtualWrapper(),l.reject().promise();if("popup"===this._editMode()){const e="[ref-update-button]";let t=o.find(e);t?.length||(t=o.parent().find(e)),t?.length&&t?.addClass("k-disabled").attr("aria-disabled",!0)}return t._clearEditableState(),this.dataSource.sync()},_displayRow:function(t){var l,n,i,a=this,s=a._modelForContainer(t),d=t.hasClass(ve),c=t.hasClass("k-table-alt-row");s&&(a.lockedContent&&(l=e((c?a.lockedAltRowTemplate:a.lockedRowTemplate)(s)),o.applyStylesFromKendoAttributes(l,["display"]),a._relatedRow(t.last()).replaceWith(l)),n=e((c?a.altRowTemplate:a.rowTemplate)(s)),t.is(":visible")||n.hide(),o.applyStylesFromKendoAttributes(n,["display"]),a._anyStickyColumns()&&o.applyStylesFromKendoAttributes(n,["left","right"]),t.replaceWith(n),a.trigger("itemChange",{item:n,data:s,ns:r}),l&&l.length&&a.trigger("itemChange",{item:l,data:s,ns:r}),d&&(a.options.selectable||a._checkBoxSelection)&&a.select(n.add(l)),l&&qr(n[0],l[0]),(i=n.next()).hasClass("k-detail-row")&&i.is(":visible")&&o.ui.icon(n.find(".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon"),{icon:"caret-alt-down"}))},_showMessage:function(t,r){var l=this;return l._isMobile?((l._confirmDialog=new o.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){l.content&&(l.content.data(ht,l.content.css(ht)),l.content.css(ht,"hidden"))},close:function(){l.content&&l.content.css(ht,l.content.data(ht))}})).result.done((function(){l._removeRow(r)})).fail((function(){var e=l._confirmDialog;e&&(e.close(),e.destroy())})),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,o=t.options.editable,r=!0===o||typeof o===it?t.options.messages.editable.confirmation:o.confirmation;return h(o)&&typeof o.mode===it&&typeof r!==nt&&typeof r!==it&&!1!==r&&(r=t.options.messages.editable.confirmation),!1===r||null==r||(typeof r===nt&&(r=r(t._modelForContainer(e))),t._showMessage({confirmDelete:o.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:o.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===r?t.options.messages.editable.confirmation:r},e))},cancelChanges:function(){var e=this;e._cachedRowsHeight&&(e._mapCachedRowsHeight("getByUid","id"),e._shouldMapHights=!0),e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop((function(){e.virtualScrollable.scrollToTop()}))},saveChanges:function(){var e=this;var t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(te)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t=this,o=t.dataSource,r=t._editMode(),l=t.options.editable.createAt||"",n=o.pageSize(),i=o.view()||[];var a=l.toLowerCase()===at;var s;var d=t._isVirtualEditable();t.editable&&t.editable.end()||!t.editable?("incell"!=r&&t.cancelRow(),e=o.indexOf(i[0]),a&&(e+=i.length,n&&!o.options.serverPaging&&n<=i.length&&(e-=1)),e<0&&(e=o.page()>o.totalPages()?(o.page()-1)*n:0),t.options.navigatable&&"incell"==r&&t._removeCurrent(),d?t._virtualAddRow():((s=o.insert(e,{})).new=!0,t._editModel(s))):t._scrollVirtualWrapper()},_editModel:function(e){var t=this;var r=t.options.editable.createAt||"";var l=t._editMode();if(e){var n=e.uid,i=(t.lockedContent?t.lockedTable:t.table).find("tr["+o.attr("uid")+"="+n+"]");const a=t._isStackedMode();const s=a?i.find("td:not(.k-group-cell,.k-hierarchy-cell) .k-grid-stack-cell:not(.k-command-cell)"):i.children("td:not(.k-group-cell,.k-hierarchy-cell)");const d=t._firstEditableColumnIndex(i);const c=s.eq(d);"inline"===l&&i.length?t.editRow(i):"popup"===l?t.editRow(e):c.length&&t.editCell(c,a&&d),"bottom"==r.toLowerCase()&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight)}},_virtualAddRow:function(){var e=this;var t=(e.options.editable.createAt||"").toLowerCase()===at;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e=this;var t=e.dataSource;var o=e.virtualScrollable;var r;1===t.page()?((r=t.insert(0,{})).new=!0,e._editModel(r),o.scrollToTop()):e._virtualPageToTop((function(){(r=t.insert(0,{})).new=!0,e._editModel(r),o.scrollToTop()}))},_virtualAddRowAtBottom:function(){var e=this;var t=e.dataSource;var o=e.virtualScrollable;var r=t.total();var l;t.at(r-1)instanceof n?((l=t.insert(r,{})).new=!0,e._virtualPageToBottom((function(){e._editModel(l),o.scrollToBottom()}))):e._virtualPageToBottom((function(){(l=t.insert(r,{})).new=!0,e._editModel(l),o.scrollToBottom()}))},_virtualPageToTop:function(e){this._virtualPage(0,this.dataSource.take(),(function(){e()}))},_virtualPageToBottom:function(e){var t=this.dataSource;var o=t.take();var r=t.total();var l=r>o?r-o:0;this._virtualPage(l,o,(function(){e()}))},_virtualPage:function(e,t,o){var r=this;r._isVirtualEditable()&&(r.virtualScrollable._preventScroll=!0,r.virtualScrollable._page(e,t,o))},_firstEditableColumnIndex:function(e){var t,o,r,l=br(this.columns),n=this._modelForContainer(e);for(o=0,r=l.length;o<r;o++)if(t=l[o],n&&(!n.editable||n.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return o;return-1},_clickAdd:function(e){e.preventDefault&&e.preventDefault(),this.addRow(),this._toggleToolbarEditingItemsVisibility()},_clickCancel:function(e){e.preventDefault&&e.preventDefault(),this.cancelChanges(),this._toggleToolbarEditingItemsVisibility()},_clickExcel:function(e){e.preventDefault&&e.preventDefault(),this._exportExcel()},_exportExcel:function(t){const o=this;const r=e.Deferred();o._isExport=!0,o._progress(!0),setTimeout((()=>{o.saveAsExcel(r),r.always((()=>{o._progress(!1),o._isExport=!1,t&&typeof t===nt&&t()}))}),1)},_clickPdf:function(e){e.preventDefault&&e.preventDefault(),this._exportPdf()},_exportPdf:function(e){const t=this;t._isExport=!0,t._pdfInitialized=!0,t._progress(!0);var o=t.saveAsPDF();o?o.done((function(){t._progress(!1),t._isExport=!1,t._pdfInitialized=!1,e&&typeof e===nt&&e()})):(t._progress(!1),t._isExport=!1,t._pdfInitialized=!1)},_clickSave:function(e){e.preventDefault&&e.preventDefault(),this.saveChanges(),this.one(oe,(()=>{this._toggleToolbarEditingItemsVisibility()}))},_searchInput:function(e){var t=this,o=e.currentTarget;clearTimeout(t._searchTimeOut),t._searchTimeOut=setTimeout((function(){t._searchTimeOut=null;var e=t.options;var r=e.search?e.search.fields:null;var l={filters:[],logic:"or"};var n=o.value;if(r||(r=kr(e.columns)),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize),n)for(var i=0;i<r.length;i++)t._pushExpression(l.filters,r[i],n);else l={};t.dataSource.filter(l)}),300)},_pasteToolbarDropDown:function(){var e=this;e.wrapper.find(".k-grid-paste-action").length&&(e.pasteActionsDropDownList=e.wrapper.find(".k-grid-paste-action").kendoDropDownList({dataSource:[{value:"insert",text:"Paste (Insert)"},{value:"replace",text:"Paste (Replace)"}],dataTextField:"text",dataValueField:"value",_allowFilterPaste:!1}).data("kendoDropDownList"))},_pushExpression:function(e,t,r){var l=this,n=l.dataSource.options.serverFiltering,i={string:"contains",number:"gte",date:"gte",enums:"eq",boolean:"eq"},a=t.name||t,s=t.operator,d=l.dataSource.reader.model&&l.dataSource.reader.model.fields,c=d&&d[a],u=c&&c.parse,p={field:a,operator:s||i.string,value:r};(s||n)&&c&&o.isFunction(u)&&null!==u(r)&&g(p,{operator:s||i[c.type],value:u(r)}),n&&c&&o.isFunction(u)&&null===u(r)||e.push(p)},_hasTool:function(e){const t=this.wrapper.find(`.k-grid-toolbar ${e}`);return{present:t.length>0,tool:t}},_initToolbarItemsPopups:function(){const e=this;const t=e._hasTool(".k-toolbar-button.k-grid-column-menu[ref-toolbar-tool]");const o=e._hasTool(".k-toolbar-button.k-grid-sort-tool[ref-toolbar-tool]");const r=e._hasTool(".k-toolbar-button.k-grid-filter-tool[ref-toolbar-tool]");const l=e._hasTool(".k-toolbar-button.k-grid-column-chooser[ref-toolbar-tool]");const n=e._hasTool(".k-toolbar-button.k-grid-group-tool[ref-toolbar-tool]");if(t.present&&e._globalColumnsMenu(t.tool),l.present&&e._columnChooserTool(l.tool),o.present&&(e._toggleBadge(o.tool,e.dataSource.sort()),e._sortToolbarTool(o.tool)),r.present&&(e._toggleBadge(r.tool,e.dataSource.filter()),e._filterToolbarTool(r.tool)),n.present){const t=e.dataSource.group();e._toggleBadge(n.tool,t&&t.length),e._groupToolbarTool(n.tool)}},_unbindToolbarTools:function(){this.wrapper.find("\n                .k-toolbar-button.k-grid-column-menu[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-sort-tool[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-filter-tool[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-column-chooser[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-group-tool[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-ai-assistant-tool[ref-toolbar-tool]\n            ").each((function(){e(this).off("click"+q)}))},_ai:function(){const e=this;const t=e._hasTool(".k-toolbar-button.k-grid-ai-assistant-tool[ref-toolbar-tool]");t.present&&e._initAiAssistantWindow(t.tool)},_toolbar:function(){var t,r,l=this,n=l.wrapper,i=l.options.toolbar;if(i){if(l._createClickHandler=l._addClickHandler=l._clickAdd.bind(l),l._editClickHandler=l._editToolbarClick.bind(l),l._destroyClickHandler=l._removeToolbarClick.bind(l),l._editCancelClickHandler=l._editCancelClick.bind(l),l._updateClickHandler=l._editUpdateClick.bind(l),l._cancelClickHandler=l._clickCancel.bind(l),l._saveClickHandler=l._clickSave.bind(l),l._excelClickHandler=l._clickExcel.bind(l),l._pdfClickHandler=l._clickPdf.bind(l),l._serachHandler=l._searchInput.bind(l),(t=l.wrapper.find(".k-grid-toolbar")).length?l._attachToolbarClicks():(t=e('<div class="k-grid-toolbar k-toolbar" />').prependTo(n),typeof i===it||v(i)?(typeof i===it&&(i=o.template(i).bind(l)),t.html(i({grid:l})),l._attachToolbarClicks()):b(i)?(r=l._processItems(i),t.kendoToolBar({navigateOnTab:!l.options.navigatable,size:l.options.size,items:r})):h(i)&&t.kendoToolBar({navigateOnTab:!l.options.navigatable,size:l.options.size,items:l._processItems(i.items||[]),overflow:i.overflow})),l._checkBoxSelection&&t.on(Ke+q,".k-select-checkbox",l._headerCheckboxClick.bind(l)),t.on(ct+q,".k-grid-search input",this._serachHandler),i.overflow&&"section"===i.overflow.mode){const e=t.data("kendoToolBar");e.bind("overflowOpen",(function(){const t=e.overflowSection.element.find(".k-toolbar-items-list");l._toggleToolbarEditingItemsVisibility(t?.children(lo))}))}l._toggleToolbarEditingItemsVisibility()}},_toggleToolbarEditingItemsVisibility:function(t){const r=this;const l=r.dataSource.hasChanges();const n=r.wrapper.find(".k-grid-toolbar");if(!n.length)return;let i;i=r.options.toolbar&&r.options.toolbar.overflow&&"scroll"===r.options.toolbar.overflow.mode?n.find(".k-toolbar-items").children(lo):t||n.children(lo);const a=r.options.toolbar&&r.options.toolbar.showInactiveTools||!1;const s=r._editMode();const d=r._editContainer&&r._editContainer.length>0&&r._editContainer.is(":visible");const c=a?e=>{e.attr("aria-disabled",!0),e.addClass("k-disabled")}:e=>e.hide();const u=r.select();const p=u.length>0;const h=p&&r._editContainer&&r._editContainer.length>0&&r._editContainer.is(":visible")&&r._editContainer[0].getAttribute(o.attr("uid"))!==u[u.length-1].getAttribute(o.attr("uid"));const g=function({mode:e,hasSelected:t,hasChanges:o,editContainerVisible:r,differentSelectionThanEditing:l,_editableIsClosing:n,_isEditableEnabled:i,options:a}){const s=/\b(k-grid-edit-command|k-grid-remove-command|k-grid-save-changes|k-grid-cancel-changes|k-grid-cancel-command|k-grid-save-command)\b/;const d=[];if(!i||!a.editable)return s;t||(d.push("k-grid-edit-command"),d.push("k-grid-remove-command")),t&&("incell"===e||"inline"===e&&!l)&&d.push("k-grid-edit-command"),o||(d.push("k-grid-save-changes"),d.push("k-grid-cancel-changes")),("inline"!==e||!r||r&&n)&&(d.push("k-grid-save-command"),d.push("k-grid-cancel-command"));let c="";return d.length?(c=d.join("|"),c=`\\b(${c})\\b`,new RegExp(c)):c}({mode:s,hasSelected:p,hasChanges:l,editContainerVisible:d,differentSelectionThanEditing:!h&&!1!==h||h,_editableIsClosing:r._editableIsClosing||!1,_isEditableEnabled:r._isEditableEnabled||!1,options:r.options});i.show().removeClass("k-disabled").attr("aria-disabled","false"),i.each((function(){const t=e(this);const o=t.attr("class");t.hasClass(ge)&&(t.removeClass(ge),Gr(r.table,!0)),o&&g&&g.test(o)&&c(t)}))},_attachToolbarClicks:function(){var e=this.options.editable,t=this.wrapper.find(".k-grid-toolbar");e&&!1!==e.create&&t.on(Ke+q,".k-grid-add",this._createClickHandler).on(Ke+q,".k-grid-cancel-changes",this._cancelClickHandler).on(Ke+q,".k-grid-save-changes",this._saveClickHandler),e&&!1!==e.update&&t.on(Ke+q,".k-grid-edit-command",this._editClickHandler).on(Ke+q,".k-grid-save-command",this._updateClickHandler).on(Ke+q,".k-grid-cancel-command",this._editCancelClickHandler),!1!==e.destroy&&t.on(Ke+q,".k-grid-remove-command",this._destroyClickHandler),t.on(Ke+q,".k-grid-excel",this._excelClickHandler),t.on(Ke+q,".k-grid-pdf",this._pdfClickHandler)},_processItems:function(e){var r=this,l=r.options,n=[],i=this.options.messages.commands,a=!1;return e.map((e=>{var s,d,c,u,p="";if("string"==typeof e)s=e.toLowerCase(),e={},"aiassistant"!==s&&(e.text=i[s]||s);else{s=e.name||e.text||"",mo[s.toLowerCase()]&&(s=s.toLowerCase()),"aiassistant"!==s&&(e.text=""===e.text?"":e.text||i[s]||s)}if(a||"search"!==s&&"columns"!==s||(a=!0,n.push({type:"spacer"})),"selectall"===s.toLowerCase()){const t=e.text;e.template=e.template||o.template($t)({size:o.getValidCssClass("k-checkbox-","size",r.options.size),label:t})}if("search"===s)d=el(e.text||i.search,!0),c=e.icon||e.iconClass||"search",p+=`<span class='k-searchbox k-input ${o.getValidCssClass("k-input-","size",r.options.size)} k-rounded-md k-input-solid k-grid-search'>`,p+=o.ui.icon({icon:c,iconClass:"k-input-icon"}),p+="<input autocomplete='off' placeholder='"+d+"' title='"+d+"' aria-label='"+d+"' class='k-input-inner' />",p+="</span>",n.push({name:"search",overflow:"never",template:p});else if("paste"===s&&l.allowPaste)n.push({template:"<input class='k-grid-paste-action' />"});else{if(!(s||h(e)&&e.template))throw new Error("Custom commands should have name specified");u=(e=g({type:"button"},mo[s],e)).className||"k-grid-"+(s||"").replace(/\s/g,""),e.attributes=r._processAttr(e.attr),delete e.attr,u&&(e.attributes.class===t&&(e.attributes.class=""),e.attributes.class+=" "+u),e.template&&delete e.type,r["_"+s+"ClickHandler"]&&(e.click=r["_"+s+"ClickHandler"]),"canceledit"===s&&(e.click=r._editCancelClickHandler),n.push(e)}})),n},_processAttr:function(e){var t={};return typeof e===it&&e.length>0?e.split(" ").map((e=>{var o=e.split("=");2===o.length&&(t[o[0]]=o[1].replaceAll('"',"").replaceAll("'",""))})):h(e)&&(t=e),t},_createButton:function(r){var l,n,i=r.template||Vt,a=typeof r===it?r:r.name||r.text,s=mo[a]?mo[a].className:"k-grid-"+(a||"").replace(/\s/g,""),d={className:r.skipCommandClass?"":s,text:a,attr:r.skipTabIndex?"":"tabindex=-1",iconClass:"",size:r.size||this.options.size},c=this.options.messages.commands;if(!(a||h(r)&&r.template))throw new Error("Custom commands should have name specified");if(h(r)){if((r=g(!0,{},r)).className&&k(d.className,r.className.split(" "))<0?r.className+=" "+d.className:r.className===t&&(r.className=d.className),r.className.indexOf("k-primary")>-1&&(r.className=r.className.replace("k-primary",""),r.themeColor="primary"),"edit"===a&&((r=g(!0,{},r)).text=h(r.text)?r.text.edit:r.text,r.iconClass=h(r.iconClass)?r.iconClass.edit:r.iconClass),r.attr){if(h(r.attr)&&(r.attr=go(r.attr)),r.attr instanceof Function){let e=r.attr(r);r.attr=go(e)}typeof r.attr===it&&(n=r.attr.match(/class="(.+?)"/))&&k(n[1],r.className.split(" "))<0&&(r.className+=" "+n[1])}const e={text:c[a]};"edit"!==a&&"update"!==a||(e.themeColor="primary"),"destroy"===a&&(e.iconClass="k-i-x"),d=g(!0,d,mo[a],e,r)}else{const e={text:c[a]};"edit"!==a&&"update"!==a||(e.themeColor="primary"),"destroy"===a&&(e.iconClass="k-i-x"),d=g(!0,d,mo[a],e)}return l=o.template(i)(d),r.template?l:o.html.renderButton(e(l),d)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Ke+q,t._groupableClickHandler):t._groupableClickHandler=function(o){var r=e(this),l=r.closest(vt);var n=t._groupRows?t._groupRows[t.wrapper.find(x+Pe).index(l)]:{};r.is(L)?t.trigger("groupCollapse",{group:n,element:l})||t.collapseGroup(l):t.trigger("groupExpand",{group:n,element:l})||t.expandGroup(l),o.preventDefault(),o.stopPropagation()},t._isLocked()?t.lockedTable.on(Ke+q,".k-grouping-row "+P+", .k-grouping-row "+L,t._groupableClickHandler):t.table.on(Ke+q,".k-grouping-row "+P+", .k-grouping-row "+L,t._groupableClickHandler),t._attachGroupable()},_toggleGroupableHeader:function(e){const t=this.options.groupable;const o=this.wrapper.find("div.k-grouping-header");t&&!1!==t.enabled&&o.length&&(e?o.removeClass("k-hidden"):o.addClass("k-hidden"))},_attachGroupable:function(){var t=this,l=t.wrapper,n=t.options.groupable,i=D+"["+o.attr("field")+"]",a=t.content?".k-grid-header:first "+i:"table:first>.k-grid-header "+i;const s=t._isStackedMode();if(s&&(a=".k-grid-stack-cell[data-field]"),n&&!1!==n.enabled){l.has("div.k-grouping-header")[0]||e("<div/>").addClass("k-grouping-header").prependTo(l),t.groupable&&t._destroyGroupable(),Kt.chrome&&(l.find("div.k-grouping-header").css("touch-action",Mt),l.find(a).css("touch-action",Mt)),t.wrapper.children(".k-grid-header").addClass("k-grid-draggable-header"),t.groupable=new r.Groupable(l,g({},n,{draggable:!s&&t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:!s&&a,filter:a,size:t.options.size,allowDrag:t.options.reorderable,enableContextMenu:!!t.options.contextMenu,removeGroup:function(e){t._showUngroupedColumn(e)},change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t._hideGroupedColumns(e.groups),t.dataSource.options.endless&&t._resetEndless())},_groupableFieldsData:s&&t.columns})),s&&t._toggleGroupableHeader(t.dataSource.group().length>0),t._addGroupableOptionsToHeader()}},_showUngroupedColumn:function(e){var t=br(this.columns);var o;for(o=0;o<t.length;o++)t[o].uid==e.colID&&t[o].hideOnGroup&&this.showColumn(t[o])},_hideGroupedColumns:function(e){if(e){var t=br(this.columns);var o=[];var r;for(r=0;r<e.length;r++)e[r].colID&&o.push(e[r].colID);for(r=0;r<t.length;r++)o.indexOf(t[r].uid)>=0&&t[r].hideOnGroup&&this.hideColumn(t[r])}},_resetEndless:function(){var e=this;e.dataSource.options.endless=null,e._endlessPageSize=e.dataSource.options.pageSize,e.dataSource._skip=0,e.dataSource._pageSize=e.dataSource._take=e._endlessPageSize,e.dataSource._page=1},_addGroupableOptionsToHeader:function(){var e=Xo(this.columns);var t={};var r=this._headerCells();var l;var n;var i;for(i=0;i<e.length;i++)e[i].field,t[e[i].field]=e[i];for(i=0;i<r.length;i++)(n=t[(l=r.eq(i)).attr(o.attr(dt))])&&n.groupable&&n.groupable.sort&&l.data(ft,n.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){var e=this._headerCells();for(var t=0;t<e.length;t++)e.eq(t).removeData(ft)},_continuousItems:function(t,o){if(this.lockedContent){var r=this;var l=r.table.add(r.lockedTable);var n=e(t,l[0]);var i=e(t,l[1]);var a=o?sr(br(r.columns)).length:1;var s=o?br(r.columns).length-a:1;var d=[];for(var c=0;c<n.length;c+=a)_.apply(d,n.slice(c,c+a)),_.apply(d,[].splice.call(i,0,s));return d}},_selectable:function(){var t,r,l=this,n=[],i=l._isLocked(),a=l.options.selectable,s="skeleton"===l.options.loaderType;if(a&&!a.checkboxSelection){l.selectable&&l.selectable.destroy(),l._selectedIds={},a=o.ui.Selectable.parseOptions(a),t=a.multiple,r=a.cell,l._hasDetails()&&(n[n.length]=".k-detail-row"),(l.options.groupable||l._hasFooters()||l._groups())&&(n[n.length]=".k-grouping-row,.k-group-footer"),s&&(n[n.length]="[data-skeleton-row]"),""!==(n=n.join(","))&&(n=":not("+n+")");var d=l.table;i&&(d=d.add(l.lockedTable));const p=l._isStackedMode()?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell) div.k-grid-stack-cell":"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell)";var c=">"+(r?p:"tbody>tr"+n);l.selectable=new o.ui.Selectable(d,{allowPaste:l.options.allowPaste,filter:c,aria:!0,multiple:t,holdToDrag:!(!l._isMobile&&!o.support.mobileOS),toggleable:!(!l._isMobile&&!o.support.mobileOS),dragToSelect:l.options.selectable&&l.options.selectable.dragToSelect,changing:function(e){l.trigger(J,{target:e.target,originalEvent:e.originalEvent})&&e.preventDefault()},change:function(e){var t;r||l._persistSelectedRows(),l._checkBoxSelection&&(t=l.selectable.value(),l._uncheckCheckBoxes(),l._checkRows(t),t.length&&t.length===l.items().length?l._toggleHeaderCheckState(!0):l._toggleHeaderCheckState(!1)),l._calculateAggregatesForSelected(),"incell"!==l._editMode()&&l._toggleToolbarEditingItemsVisibility(),e.event&&l.trigger(X,{cellAggregates:l._cellAggregates})},useAllItems:i&&t&&r,relatedTarget:function(t){if(!r&&i){var o;var n=e();for(var a=0,s=t.length;a<s;a++)o=l._relatedRow(t[a]),k(o[0],t)<0&&(n=n.add(o));return n}},continuousItems:function(){return l._continuousItems(c,r)},ignoreOverlapped:l.options.selectable&&l.options.selectable.ignoreOverlapped,addIdToRanges:!0}),l.options.navigatable&&d.on("keydown"+q,(function(o){var n=l.current();var a=o.target;var s={event:o};var c;var p;if(n)if(o.keyCode===u.SPACEBAR&&!o.shiftKey&&e.inArray(a,d)>-1&&!n.is(".k-grid-stack-edit-cell,.k-edit-cell,.k-header")&&n.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),((c=!(n=r?n:n.parent()).hasClass(ve)||l.selectable.value().length>1)||t&&n.hasClass(ve)&&o.ctrlKey)&&l.trigger(J,{target:n,originalEvent:o}))return;if(i&&!r&&(n=n.add(l._relatedRow(n))),t)if(o.ctrlKey){if(n.hasClass(ve))return l._deselectCheckRows(n),l._calculateAggregatesForSelected(),void l.trigger(X,{cellAggregates:l._cellAggregates})}else l.selectable.clear();else l.selectable.clear();r||(l.selectable._lastActive=n),l.selectable.value(n),c&&(l._calculateAggregatesForSelected(),l.trigger(X,{cellAggregates:l._cellAggregates}))}else if(!r&&(e(a).is("td")||e(a).is("table")&&k(a,this._navigatableTables))&&(o.shiftKey&&o.keyCode==u.LEFT||o.shiftKey&&o.keyCode==u.RIGHT||o.shiftKey&&o.keyCode==u.UP||o.shiftKey&&o.keyCode==u.DOWN||o.keyCode===u.SPACEBAR&&o.shiftKey)){if(o.preventDefault(),o.stopPropagation(),n=n.parent(),l.trigger(J,{target:n,originalEvent:o}))return;p=l.selectable.value(),i&&(n=n.add(l._relatedRow(n))),t?(l.selectable._lastActive||(l.selectable._lastActive=n),l.selectable.selectRange(l.selectable._firstSelectee(),n),function(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}(p,l.selectable.value())||l.trigger(X,s)):n.hasClass(ve)||(l.selectable.clear(),l.selectable.value(n),l._calculateAggregatesForSelected(),l.trigger(X,{cellAggregates:l._cellAggregates}))}}))}},_pasteReplaceHandler:function(t){var o,r,l,n,i,a=this,s=[];r=a.select().first(),!a._isStackedMode()&&r.length&&(r.is(vt)&&(r=r.children("td").first()),o=t.split("\n").filter((e=>e)),l=r.closest("tr"),i=a.thead.find("th:eq("+r.index()+")").data("field"),n=l.data("uid"),s.push(n),l.nextAll(z).slice(0,o.length-1).each(((t,o)=>{s.push(e(o).data("uid"))})),a._executePaste(o,s,null,i))},_pasteInsertHandler:function(e){var t,o,r,l,n,i=this,a=i.dataSource;(o=i.select().first()).length&&(o.is(vt)&&(o=o.children("td").first()),t=e.split("\n").filter((e=>e)),r=o.closest("tr"),n=i.dataItem(r),l=a.indexOf(n)+1,i._executePaste(t,null,l,null))},_executePaste:function(e,t,o,r){var l,n,i,a,s,d=this,c=d.dataSource,u=t||!1,p=d._getSelectedRowUids(),h=d._getSelectedColumnFields(),g=[],f=hr(d.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)),m=r&&f.map((e=>e.field)).indexOf(r);if(1===e.length&&1===e[0].split("\t").length&&u)for(let t=0;t<p.length;t++){const o=p[t];l=c.getByUid(o),i=e[0].split("\t")[0];for(let e=0;e<h.length;e++)s=h[e],l&&i&&l.set(s,i);l&&l.dirty&&g.push(l)}else for(let r=0;r<e.length;r++){n=e[r].split("\t"),l=u?c.getByUid(t[r]):c.insert(o+r,{});for(let e=0;e<n.length;e++)i=n[e].replace(/\r/,""),(a=f[e+m||0])&&l&&i&&(s=a.field,l.set(s,i));l&&l.dirty&&g.push(l)}d.trigger(se,{items:g,type:u?"replace":"insert"})},_pasteKeyboardHandler:function(t){var o,r,l,n=this,i=n.current(),a=t.originalEvent.clipboardData,s=n.pasteActionsDropDownList&&n.pasteActionsDropDownList.value()||"insert";e(t.target).is(".k-grid-stack-edit-cell input:visible,.k-edit-cell input:visible")||a&&(t.preventDefault(),l=a.getData("text").trimEnd(),/\S/.test(l)||(l=" "),i&&i.length&&(r=i.index(),o=i.closest(vt).data("uid")),"replace"===s&&n._pasteReplaceHandler(l),"insert"===s&&n._pasteInsertHandler(l),r&&o&&(n._currentRowIndex=n.wrapper.find("tr[data-uid='"+o+"']").index(),n._restoreCurrent(r)))},_paste:function(){var e=this,t=e.options,o=t.selectable;if(t.allowPaste&&o){e.pasteHandler=e._pasteKeyboardHandler.bind(e);(e.content||e.table).on(se+q,e.pasteHandler),e.options.toolbar&&e._pasteToolbarDropDown()}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||(t.table.attr(lt,0),t.table.add(t.lockedTable).on(Qe+q+" keydown"+q,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})).on(Qe+q,E+">"+M,Ur.bind(t))),t.copyHandler=t.copySelection.bind(t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).trigger("focus").select()};const o=t.content||t.table;t.bind("change",t.updateClipBoardState),o.on("keydown",t.copyHandler),t.clearAreaHandler=t.clearArea.bind(t),o.on("keyup",t.clearAreaHandler)}},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).trigger("focus").select(),document.execCommand("copy")},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||67!==t.keyCode||!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).trigger("focus").select())},_createAreaClipBoard:function(){this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper))},getTSV:function(o){var r=this;var l=r.select();var n="\t";var i=r.options.allowCopy;var a=r._isLocked()&&sr(r.columns).length;e.isPlainObject(i)&&i.delimeter&&(n=i.delimeter);var s="";if(l.length){l.eq(0).is(vt)&&(l=l.find("td:not(.k-group-cell)")),l.filter(":visible");var d=[];var c=this.columns.length;var u=r._isLocked()&&sr(r.columns).length;var p=!0;var h=[];var g;var f=hr(this.columns);e.each(l,(function(t,o){if(o=e(o),g=r._getCellField(o,a),-1!==f.findIndex((e=>e.field===g))){var l=o.closest(vt).index();var n=o.index();n-=o.prevAll(":hidden").length,u&&p&&(p=e.contains(r.lockedTable[0],o[0])),r._groups()&&p&&(n-=r._groups()),n=p?n:n+u,g&&(h[n]=g),c>n&&(c=n);var i=o.text();d[l]||(d[l]=[]),d[l][n]=i}}));var m=d.length;if(d=e.each(d,(function(e,t){t&&(d[e]=t.slice(c),m>e&&(m=e))})),o&&h.length){d.splice(m,0,h.map((function(e){return function(e,t){return t.filter((function(t){return t.field===e}))[0].title||e}(e,f)})));var b=d.findIndex((function(e){return e!==t}));d[b]=d[b].slice(c)}e.each(d.slice(m),(function(e,t){s+=t?t.join(n)+"\r\n":"\r\n"}))}return s},clearArea:function(e){this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]&&Gr(this.table,!0),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return Po(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=t._onColumnMediaResize.bind(t),e(window).on(Be+q,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){this._columnMediaResizeHandler&&e(window).off(Be+q,this._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){var t=e||[];for(var o=0;o<t.length;o++)this._setColumnMediaVisibility(t[o])},_setColumnMediaVisibility:function(e){var t=this;Bo(e.media)?t._setColumnsMediaVisibility(e.columns):zo(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),Mo(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),Mo(e)},_setContentMediaWidth:function(){var t=this;var o=t.options;var r=t._isLocked();var l;if(o.scrollable&&(!0===o.resizable||o.resizable&&!0===o.resizable.columns)){r&&t.lockedFooter?l=t.lockedFooter.children("table"):t.footer&&(l=t.footer.find(">.k-grid-footer-wrap>table")),l&&l[0]||(l=e());var n=r?t.wrapper.find(".k-grid-header-locked").find("table"):t.wrapper.find(".k-grid-header").find("table");var i=r?t.lockedTable:t.table;var a=n.find("th");var s=n.find("colgroup");var c=a.length;var u=a.filter(Fo).length;var p=a.length-u;var h=0;if(""!==n[0].style.width&&parseFloat(n[0].style.width)!==h){var g=n.css(ot);for(var f=0;f<c;f++)if(v=a[f],e(v)[0].style.display!==Mt&&!e(v)[0].classList.contains("k-hidden")){var m;var b=Math.max(f,f-p);var k=s.children()[b];var _=k?k.style.width:"";""!==_?m=parseFloat(_):(n.css(ot,rt),m=d(a.eq(f)),n.css(ot,g)),h+=m}i.css("width",h-1),n.css("width",h),l.css("width",h),t._updateStickyColumns()}}var v},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=this.hideMinScreenCols.bind(this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,o){var r=!1;for(var l=0;l<e.length;l++){var n=e[l];var i=n.minScreenWidth;i!==t&&null!==i&&(r=!0,i>o?this.hideColumn(n):this.showColumn(n)),!n.hidden&&n.columns&&(r=this._iterateMinScreenCols(n.columns,o)||r)}return r},_stickyColumns:function(){this._anyStickyColumns()&&this._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this;var t=m(br(e.columns),(function(e){return e.groupHeaderColumnTemplate}));e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");t.length&&t.each((function(){var t=e(this);var o=t.data("column");o.sticky?(h(o.stickyStyle)&&t.css({left:o.stickyStyle.left||"",right:o.stickyStyle.right||""}),t.addClass(ze)):(t.css({left:"",right:""}),t.removeClass(ze))}))},_anyStickyColumns:function(){return!this._isStackedMode()&&cr(this.columns).length},_setStickyColumns:function(e){var t=this;var o=cr(t.columns);var r=function(e){return m(e,(function(e){return e.sticky&&!e.locked&&Do(e)}))}(t.columns);var l=t._calculateStickyWidths(r);t._removeStickyAttributes(o),t._setStickyClassAttributes(o),t._setStickyStyleAttributes(r,l,e),e&&t._setStickyStyles(r,l)},_calculateStickyWidths:function(e,t,o){var r;var l;var n;var i;var a=Ut?"right":"left";var s=Ut?"left":"right";var d={left:new Array(e.length).fill(t||0),right:new Array(e.length).fill(o||0)};for(r=0;r<e.length-1;r++)l=e[r],n=this._sumColumnWidth(l)+d[a][r],d[a][r+1]=n;for(r=e.length-1;r>0;r--)l=e[r],i=this._sumColumnWidth(l)+d[s][r],d[s][r-1]=i;return d},_setStickyClassAttributes:function(e,t){var o;var r;for(o=0;o<e.length;o++)(r=e[o]).columns&&(!t&&o&&(t=o),this._setStickyClassAttributes(fr([r]),t)),t&&ir(r,"headerAttributes","class",De),ir(r,"attributes","class",Me),ir(r,"headerAttributes","class",ze),ir(r,"footerAttributes","class",Fe)},_setStickyStyleAttributes:function(e,t,r){var l=this;var n;var i;var a;var s;var d;var c;var u;for(n=0;n<e.length;n++)i=e[n],d={left:(a=t.left[n])+"px",right:(s=t.right[n])+"px"},i.columns&&(c=mr([i]),u=l._calculateStickyWidths(c,a,s),l._setStickyStyleAttributes(c,u,r),r&&l._setStickyStyles(c,u)),ir(i,"attributes",o.attr("style-left"),d.left),ir(i,"attributes",o.attr("style-right"),d.right),ir(i,"headerAttributes",o.attr("style-left"),d.left),ir(i,"headerAttributes",o.attr("style-right"),d.right),ir(i,"footerAttributes",o.attr("style-left"),d.left),ir(i,"footerAttributes",o.attr("style-right"),d.right),i.stickyStyle=d},_removeStickyAttributes:function(e){var t;var r=new RegExp("(\\s*"+Me+")*","ig");var l=new RegExp("(\\s*"+ze+")*","ig");var n=new RegExp("(\\s*"+Fe+")*","ig");var i=new RegExp("(\\s*"+De+")*","ig");var a;for(t=0;t<e.length;t++)(a=e[t]).columns&&this._removeStickyAttributes(fr([a])),ar(a,"attributes","class",r),ar(a,"attributes",o.attr("style-left"),"",!0),ar(a,"attributes",o.attr("style-right"),"",!0),ar(a,"headerAttributes","class",l),ar(a,"headerAttributes","class",i),ar(a,"headerAttributes",o.attr("style-left"),"",!0),ar(a,"headerAttributes",o.attr("style-right"),"",!0),ar(a,"footerAttributes","class",n),ar(a,"footerAttributes",o.attr("style-left"),"",!0),ar(a,"footerAttributes",o.attr("style-right"),"",!0)},_setStickyStyles:function(t,o){var r=this;var l;var n;var i=br(dr(r.columns));var a=r.tbody.children(":not(.k-detail-row)");var s;var d;var c;var u;var p;var h;var g;var f;var m;for(l=0;l<t.length;l++)if(d=t[l],u=o.left[l],p=o.right[l],c=i.indexOf(d),(h=r._getColumnHeader(d)).addClass(ze),d.headerAttributes.class&&-1!==d.headerAttributes.class.indexOf(De)&&h.addClass(De),lr(h,u,p),!d.columns)for(r.footer&&((g=r.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(c)).addClass(Fe),lr(g,u,p)),n=0;n<a.length;n++)(s=e(a[n])).hasClass(Pe)?((f=s.find("."+d.groupHeaderColumnTemplateClass)).addClass(Me),lr(f,u,p)):((m=s.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(c)).addClass(Me),lr(m,u,p))},_removeStickyStyles:function(t){var o=this;var r;var l;var n=br(dr(o.columns));var i=o.tbody.children(":not(.k-detail-row)");var a;var s;var d;var c;var u;var p;var h;for(r=0;r<t.length;r++)if(s=t[r],d=n.indexOf(s),(c=o._getColumnHeader(s)).removeClass(ze),c.removeClass(De),lr(c,"",""),s.columns)o._removeStickyStyles(s.columns);else for(s.footerTemplate&&o.footer&&((u=o.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(d)).removeClass(Fe),lr(u,"","")),l=0;l<i.length;l++)(a=e(i[l])).hasClass(Pe)?((p=a.find("."+s.groupHeaderColumnTemplateClass)).removeClass(Me),lr(p,"","")):((h=a.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(d)).removeClass(Me),lr(h,"",""))},_getColumnHeader:function(t){return e("#"+t.headerAttributes.id).length?e("#"+t.headerAttributes.id):e("#"+this._cellId)},_sumColumnWidth:function(e){return e.columns?this._sumCurrentWidths(br([e])):this._sumCurrentWidths([e])},_sumCurrentWidths:function(e){var t=0;var o=0;var r;var l;var n;var i=e.length;for(n=0;n<i;n++)r=e[n],l=this._getColumnHeader(r),!r.hidden&&zo(r)&&(t+=(o=l.is(":visible")?l.outerWidth():r.width)?parseInt(o,10):0);return t},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(".k-grid")[0]},getSelectedData:function(){var e=this;var t=e.selectable.selectedRanges();var o=Object.keys(t);var r=e.selectable.selectedSingleItems();var l=[];var n=hr(e.columns);for(var i=0;i<o.length;i++)l=l.concat(e._mapSelectionToData(t[o[i]],n,null,!0));return r.length&&(l=l.concat(e._mapSelectionToData(r,n,null,!0))),l},getSelectedDataByKeys:function(){var t,o,r=this,l=r.dataSource,n=r.selectedKeyNames(),i=hr(r.columns),a={};var s=function(e){var t={};if(e.field)return t[e.field]=o[e.field],t};for(let r=0;r<n.length;r++)t=n[r],(o=l.get(t))&&(a[o.uid]=e.extend.apply({},i.map(s)));return Object.keys(a).map((function(e){return a[e]}))},exportSelectedToExcel:function(e){if(!o.excel||!o.ooxml)throw new Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");var t=this;var r=this.options.excel||{};var l=hr(t.columns);var n=new o.excel.ExcelExporter({});var i={sheets:[{columns:Array.apply(0,Array(l.length)).map((function(){return{autoWidth:!0}})),rows:[],freezePane:{},filter:!1}]};var a=t.selectable.selectedRanges();var s=Object.keys(a);var d=t.selectable.selectedSingleItems();var c;var u=[];var p=t._isLocked()&&sr(t.columns).length;var h=tl.bind(t);for(c=0;c<s.length;c++)u=u.concat(t._mapSelectionToData(a[s[c]],l,ol));if(u.length&&t._addRangeSelectionRows(i,n,u,e),(u=d.length?t._mapSelectionToData(d,l,ol):[]).length&&(p&&(u=u.sort(h)),t._addSingleSelectionRows(i,n,u,e)),i.sheets[0].rows.length){var g=new o.ooxml.Workbook(i);g.options||(g.options={}),g.options.skipCustomHeight=!0,g.toDataURLAsync().then((function(e){o.saveAs({dataURI:e,fileName:i.fileName||r.fileName,proxyURL:r.proxyURL,forceProxy:r.forceProxy})}))}},_addSingleSelectionRows:function(e,t,o,r){var l=0;var n=gr(this.columns);var i;const a=t._instance??t;for(l=0;l<o.length;l++)i=o[l],t.data=[i],this._setExporterColumns(a,n,i),this._createExportRows(e,a,r)},_addRangeSelectionRows:function(e,t,o,r){var l=gr(this.columns);const n=t._instance??t;t.data=o,this._setExporterColumns(n,l,o[0]),this._createExportRows(e,n,r)},_createExportRows:function(e,t,o){const r=t._instance??t;e.sheets[0].rows=e.sheets[0].rows.concat(o?r._rows():r._dataRows(r.data,0))},_setExporterColumns:function(t,o,r){const l=t._instance??t;l.columns=l.options.columns=e.map(o.filter((function(e){return Object.keys(r).indexOf(e.field)>=0})),l._prepareColumn)},_mapSelectionToData:function(t,o,r,l){var n=this;var i="TR"===t[0][0].nodeName;var a;var s={};var d;var c;var u;var p=function(e){var t={};if(e.field&&(!r||r(e)))return t[e.field]=a[e.field],t};var h=n._isLocked()&&sr(n.columns).length;var g;for(var f=0;f<t.length;f++)if(d=t[f],a=n.dataItem(i?d:d.closest(vt)),i)s[a.uid]=e.extend.apply({},o.map(p));else{if(!(u=n._getCellField(d,h,l)))continue;if((c=s[a.uid])||(c=s[a.uid]={}),!(g=qo(o,u))||r&&!r(g))continue;c[u]=a[u]}return Object.keys(s).map((function(e){return s[e].uid=e,s[e]}))},_getCellField:function(t,r,l){const n=this;const i=r&&e.contains(n.lockedTable[0],t[0]);const a=o.attr("field");const s=o.attr("index");const d=i?0:r;let c=0;return l&&(c=n._trailingColumns()),n._isStackedMode()?n.table.find("div.k-grid-stack-cell["+s+"='"+(t.index()-c)+"']").attr(a):r?n.element.find(".k-grid-header-"+(i?"locked":"wrap")+" th["+s+"='"+(t.index()+d)+"']").attr(a):n.thead&&n.thead.find("th["+s+"='"+(t.index()-c)+"']").attr(a)},_relatedRow:function(t){var o=this.lockedTable;if(t=e(t),!o)return t;var r=t.closest(this.table.add(this.lockedTable));var l=r.find(">tbody>tr").index(t);return(r=r[0]===this.table[0]?o:this.table).find(">tbody>tr").eq(l)},_relatedCell:function(t){var o=this.lockedTable;if(t=e(t),!o)return t;var r=t.closest(this.table.add(this.lockedTable));var l=r.find(">tbody>tr>td").index(t);return(r=r[0]===this.table[0]?o:this.table).find(">tbody>tr>td").index(l)},clearSelection:function(){var e=this;e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._hasAISelection&&delete e._hasAISelection,e._checkBoxSelection?e._deselectCheckRows(e.select()):e.options.persistSelection?e._persistSelectedRows():e._selectedIds={}},clearHighlight:function(){const e=this;e._highlightDescriptors&&delete e._highlightDescriptors,e._highlightedItems&&e._highlightedItems.length&&(e._highlightedItems.removeClass(fe),delete e._highlightedItems),e._hasAIHighlight&&delete e._hasAIHighlight},_getElementsToProcess:function(e){const t=this;const o=t.columns;const r=[];const l=[];const n=[];const i=e=>`tr[data-uid='${e}']`;const a=(e,t)=>e.length&&e.findIndex((e=>e.field===t));return m(o,(e=>{e.locked?r.push(e):l.push(e)})),Object.entries(e).forEach((([e,o])=>{if(!e)return;const s=t.dataSource.get(e);if(!s)return;let d=t.tbody.find(i(s.uid));!0===o?n.push(d):"object"==typeof o&&Object.keys(o).forEach((e=>{if(!e&&!o[e])return;let c=!1;let u=a(l,e);-1===u&&(u=a(r,e),c=!0),c&&(d=t._relatedRow(d));const p=d.find(`td:eq(${u})`);p.length&&(n.push(p),d=t.tbody.find(i(s.uid)))}))})),n},_getElementsToHighlight:function(e){return this._getElementsToProcess(e)},_getElementsToSelect:function(e){return this._getElementsToProcess(e)},_restoreHighlight:function(){const e=this._highlightDescriptors;e&&Object.keys(e).length&&this.highlight(e)},_persistHighlight:function(e){const t=this;const o={};const r=e.is("tr");const l=t.options.dataSource?.schema?.model?.id||"id";const n=(r?e:e.closest("tr")).data("uid");const i=t.dataSource.getByUid(n);if(!i)return;const a=i[l];if(r)o[a]=!0;else{const r=t._getCellField(e,t._isLocked(),!0);if(!r)return;o[a]=r}t._highlightDescriptors?t._highlightDescriptors=t._mergeHighlightDescriptor(t._highlightDescriptors,o):t._highlightDescriptors=o},_mergeHighlightDescriptor:function(e,o){const r={};let l,n,i;for(l in e)r[l]=e[l];for(l in o)n=r[l],i=o[l],r[l]=n===t?i:!0===i||("object"==typeof i&&null!==i&&"object"==typeof n&&null!==n?g({},n,i):n);return r},highlight:function(t){const o=this;const r=o.lockedTable;const l=Array.isArray(t)&&!t.length;if(!t&&!l)return o._highlightedItems||e();if(l)return void o.clearHighlight();const n="object"==typeof t&&!Array.isArray(t)?Object.keys(t):[];const i=n.length&&o.dataSource.get(n[0]);let a;i?(o._highlightDescriptors=o._mergeHighlightDescriptor(o._highlightDescriptors||{},t),a=o._getElementsToHighlight(t)):a=Array.isArray(t)?t:[t];a.forEach((function(t){const l=(e=>{const t=e.is("tr");let l;if(e)return t&&r?.length&&(l=o._relatedRow(e),e=e.add(l)),e})(e(t));if(l&&!i&&o._persistHighlight(l),l?.length){if(o._highlightedItems&&-1!==o._highlightedItems.index(l))return;l.addClass(fe),o._highlightedItems?o._highlightedItems=o._highlightedItems.add(l):o._highlightedItems=l}}))},select:function(e){var t=this,r=t.selectable,l=o.ui.Selectable.parseOptions(this.options.selectable).cell;return(e=t.table.add(t.lockedTable).find(e)).length?(r&&!r.options.multiple&&(r.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map((function(){return l?t._relatedCell(this):t._relatedRow(this)})))),r&&!t._checkBoxSelection?r.value(e):(t._checkRows(e),t.select().length===t.items().length&&t._toggleHeaderCheckState(!0)),void(l||t._persistSelectedRows())):r?r.value():t.items().filter("."+ve)},_initSelectableAggregates:function(){var e=this;e.options.selectable&&(e._selectableAggregatesOptions||(e._selectableAggregatesOptions=e._parseSelectableAggregatesOptions()),e._selectableAggregatesOptions.count&&(e._cellAggregates={count:0}))},_calculateAggregatesForSelected:function(){var r,l,n,i,a,s,d,c,u,h,g,f=this,m=f.options,b=f.getSelectedDataByKeys(),k=f.options.selectable,_=k.cellAggregates,v=hr(f.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)).length,C=kr(m.columns),w=o.ui.Selectable.parseOptions(k).cell,y=[],S=[],x=[];if(_){w&&(b=f.getSelectedData()),_=f._selectableAggregatesOptions;for(let e=0;e<b.length;e++){r=b[e];for(let e=0;e<C.length;e++)switch(l=r[C[e]],p(l)){case"number":y.push(l);break;case"date":S.push(l);break;case"boolean":x.push(l)}}var T;_.count&&(n=w?(T=f.select(),T.filter(((o,r)=>{const l=e(r);const n=l.children(".k-select-checkbox").length>0;const i=l.find("> .k-checkbox-wrap > .k-select-checkbox").length>0;return l.attr("[ref-grid-drag-cell]")===t&&!l.hasClass("k-command-cell")&&!n&&!i}))).length:b.length*v),y.length&&(a=_.max?y.reduce(((e,t)=>Math.max(e,t))):null,i=_.min?y.reduce(((e,t)=>Math.min(e,t))):null,s=_.sum?y.reduce(((e,t)=>e+t)):null,d=_.average?y.reduce(((e,t)=>e+t))/y.length:null),S.length&&(c=_.earliest?S.reduce(((e,t)=>new Date(Math.min(e,t)))):null,u=_.latest?S.reduce(((e,t)=>new Date(Math.max(e,t)))):null),x.length&&(h=_.isTrue?x.filter((e=>!0===e)).length:null,g=_.isFalse?x.filter((e=>!1===e)).length:null),f._cellAggregates={count:n,max:a,min:i,sum:s,average:d,earliest:c,latest:u,isTrue:h,isFalse:g},f.statusBar&&f._statusBar()}},_parseSelectableAggregatesOptions:function(){var e=this.options.selectable.cellAggregates,t={};if(b(e)){for(let o=0;o<e.length;o++)t[e[o]]=!0;return t}return{count:!0,min:!0,max:!0,sum:!0,average:!0,earliest:!0,latest:!0,isTrue:!0,isFalse:!0}},_toggleHeaderCheckState:function(e){const t=this;const o=t._isStackedMode();const r=t.wrapper.find(".k-toolbar");const l=r.find(we);let n=o?r:t.thead.add(t.lockedHeader);let i=o?we:"tr "+we;const a=(e,t)=>{if(e.length){const o=t?"Deselect all rows":"Select all rows";e.prop("checked",t).attr(It,t).attr(wt,o)}};if(o)a(l,e);else{a(n.find(i),e),a(l,e)}},_uncheckCheckBoxes:function(){this.table.add(this.lockedTable).find("tbody "+we).attr(It,!1).prop("checked",!1).attr(wt,"Select row")},_deselectCheckRows:function(t){var r=this,l=o.attr("range-selected");t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map((function(){return r._relatedRow(this)})))),t.each((function(){e(this).removeClass(ve).removeAttr(l).find(we).attr(It,!1).prop("checked",!1).attr(wt,"Select row")})),r._toggleHeaderCheckState(!1),r._persistSelectedRows()},_checkRows:function(t){t.each((function(){e(this).addClass(ve).find(we).prop("checked",!0).attr(wt,"Deselect row").attr(It,!0)}))},_persistSelectedRows:function(){var e,t,r,l=this,n=l.items(),i=l.dataSource.options.schema,a={};if(i&&i.model&&l._data&&(r=l._getSchemaIdField())){o.ui.Selectable.parseOptions(l.options.selectable).multiple||l._checkBoxSelection||(l._selectedIds={}),l.select().each((function(){t=l.dataItem(this),a[t[r]]=!0}));for(var s=0;s<n.length;s++)e=(t=l.dataItem(n[s]))[r],a[e]?l._selectedIds[e]=!0:delete l._selectedIds[e]}},selectedKeyNames:function(){var e=[];for(var t in this._selectedIds)e.push(t);return e.sort(),e},_updateCurrentAttr:function(t,o,r){var l=e(t).data("headerId");var n;var i;e(t).removeClass(ge),this.table.removeAttr(At),l?(l=l.replace(this._cellId,""),e(t).attr(kt,l)):e(t).removeAttr(kt),(n=o.attr(kt))!=this._cellId&&o.data("headerId",n),n?i=n:o.attr(kt,this._cellId),r||o.addClass(ge),this.table.attr(At,i||this._cellId),this._current=o},_scrollCurrent:function(){const t=this._current;const o=this.options.scrollable;if(t&&o){var r=t.parent();var l=r.closest("table").parent();var n=l.is(".k-grid-content-locked,.k-grid-header-locked");var i=l.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");var a=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(i)if(this.virtualScroll){var s=Math.max(k(r[0],this._items(r.parent())),0);this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(s),this.virtualScrollable.scrollIntoView(r)):(this._rowVirtualIndex=s,this._scrollTo(this._relatedRow(r)[0],a))}else this._scrollTo(this._relatedRow(r)[0],a);this.lockedContent&&(this.lockedContent[0].scrollTop=a.scrollTop),n||this._scrollTo(t[0],a)}},_findGroupedItem:function(e,t,o){const r=this;let l;for(let n=0;n<e.length;n++){const i=e[n];if(i.field===o?i.value===t&&(l=i.items[0].uid&&i.items[0][o]?i.items[0]:r._findGroupedItem(i.items,t,o)):l=i.items[0].uid&&i.items[0][o]?i.items.find((e=>e[o]===t)):r._findGroupedItem(i.items,t,o),l)return l}},_findClosestGroupingRow:function(t,o,r){const l=this;let n=o||0;let i=r||0;if(!(l.options.groupable&&l.dataSource.group().length>0)||!t)return{targetRow:t,rowsToTarget:n,hiddenGroupingRows:i};const a=e(t.previousSibling);if(a&&a.hasClass(Pe)){let e={targetRow:a,rowsToTarget:n,hiddenGroupingRows:i};return"none"===a.css("display")&&(e=l._findClosestGroupingRow(a[0],n,i+1)),e}{const e=l._findClosestGroupingRow(a[0],n+1,i);if(e)return{targetRow:e.targetRow,rowsToTarget:e.rowsToTarget,hiddenGroupingRows:i}}},_checkItemAlreadyLoaded:function(e,t){const o=this.dataSource._ranges;let r;for(let l=0;l<o.length;l++){if(r=o[l].data.find((o=>o[t]===e)),r)return{loadedItem:r,page:l}}},scrollToItem:function(t,r){const l=this,n=l.options,i=l.dataSource,a=i.group(),s=i.pageSize(),d=l._getSchemaIdField(),c=n.scrollable,u=l.wrapper.find(".k-grid-content.k-auto-scrollable"),p=o._outerHeight(l.tbody.find(`tr:not(.${Pe})`)),h=c&&c.virtual&&("rows"===c.virtual||!0===c.virtual);let g=n.groupable&&l.wrapper.find(`.${Pe}:first-child`);let f={};let m=!1;let b=0;if(l._scrolledItems&&(f=l._scrolledItems),h&&0===a.length&&(l.virtualScrollable._alwaysScrollTop=!0),!t||!d)return;const k=i.view();let _=k.find((e=>e[d]==t));if(a.length>0&&(_=l._findGroupedItem(k,t,d),b=o._outerHeight(g[0])),!_&&h)return l.virtualScrollable._programmaticallyScrolling&&"resolved"!==l.virtualScrollable._programmaticallyScrolling.state()||(l.virtualScrollable._programmaticallyScrolling=e.Deferred()),void(r&&"function"==typeof r&&r({success:e=>{let o=e;if(o="number"!=typeof o?Number(o):o,isNaN(o))return;const r=i.options.serverPaging;let n=S.floor(o/s);if(r){const e=l._checkItemAlreadyLoaded(t,d);e&&(n=e.page)}const a=u.find(vt);const c=a[a.length-1].offsetTop;const h=n*(s/a.length*c)+(o-n*s-1)*p;return l._scrollingUp=l.virtualScrollable.verticalScrollbar.scrollTop()>h,l._scrollOffset=h,l.virtualScrollable._scrollTo(h),l.virtualScrollable.verticalScrollbar.trigger(de),l.virtualScrollable._programmaticallyScrolling.done((()=>{l.scrollToItem(t)}))}}));const v=_&&_.uid;if(!v)return;let C=e(`[data-uid=${v}]`);let{targetRow:w,rowsToTarget:y,hiddenGroupingRows:x}=l._findClosestGroupingRow(C[0]);if(!C||!w)return;a.length>0&&"none"===C.css("display")&&(C=w,m=!0);const T=m?x*b+p:0;let H=C[0].offsetTop-((y+a.length)*b-T);let R=H;if(h){if(f&&f[t]){const e=Math.floor(l.virtualScrollable.verticalScrollbar.scrollTop());const o=Math.floor(f[t].scrollingDownOffset);const r=Math.floor(f[t].scrollingUpOffset);if(e===r||e===o)return;l._scrollingUp=e>R,R=l._scrollingUp?r??R:o??R}l._scrollOffset&&(l._scrollingUp?(l._scrollOffset===H&&(l._scrollOffset+=p),R=H-l.virtualScrollable._scrollTop+l._scrollOffset):R+=l._scrollOffset),l.virtualScrollable._scrollTo(H,R),f[t]||(f[t]={}),l._scrollingUp?f[t]&&!f[t].scrollingUpOffset&&(f[t].scrollingUpOffset=R):f[t]&&!f[t].scrollingDownOffset&&(f[t].scrollingDownOffset=R)}else u.scrollTop(R);l.virtualScrollable&&(l._scrollOffset&&delete l._scrollOffset,l._scrollingUp&&delete l._scrollingUp),l._scrolledItems=f},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,o,r,l){var n=this._current;if(t=e(t),n&&t&&n.length&&t.length&&n.closest(".k-filter-row").length>0&&0===t.closest(".k-filter-row").length&&this._filterFocusable().attr(lt,-1),t.length&&(!n||n[0]!==t[0])){var i=t.parent();var a=i.children(R);var s=parseInt(i.children().first().attr("colspan"),10);this._hasVirtualColumns()&&(this._virtualCellIndex=(s>1?s:0)+a.index(t)),this._updateCurrentAttr(n,t,l),r||this._scrollCurrent(),o||this.trigger(Ue,{element:t})}return t&&t.length&&(this._lastCellIndex=t.parent().children(".k-group-cell, .k-grid-stack-content,"+I).index(t)),this._updateSelctCheckbox(n,t),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(ge),this._current=null)},_updateSelctCheckbox:function(e,t){var o;t&&t.length&&((o=t.find(".k-select-checkbox")).length>0?o.trigger("focus"):e&&e.find(".k-select-checkbox").length>0&&Gr(this.table,!0))},_scrollTo:function(t,r){var l=t.tagName.toLowerCase();var n="td"===l||"th"===l;var i=e(t).closest("table")[0];var a=t[n?"offsetWidth":"offsetHeight"];var s=r[n?"scrollLeft":"scrollTop"];var d=r[n?"clientWidth":"clientHeight"];var c="relative"===e(t).css("position")&&Ut&&n?Math.abs(i.offsetLeft-t.offsetLeft):t[n?"offsetLeft":"offsetTop"];var u=c+a;var p=0;var h=0;var g=0;Ut&&n&&(Kt.msie||Kt.edge?h=i.offsetLeft:(Kt.mozilla||Kt.webkit&&Kt.version>85)&&(g=i.offsetLeft-o.support.scrollbar())),p=(s=Math.abs(s+h-g))>c?c:u>s+d?a<=d?u-d:c:s,p=Math.abs(p+h)+g,r[n?"scrollLeft":"scrollTop"]=p},_navigatable:function(){var t=this;if(!t.options.navigatable)return;const r=t._isStackedMode();var l=t.table.add(t.lockedTable);var n=!r&&t.thead.parent().add(e(">table",t.lockedHeader));var i=l;t.options.scrollable&&(i=i.add(n)),this._navigatableTables=i,n&&(this._headertables=n),i.off(Qe+q+" focus"+q+" focusout"+q+" keydown"+q),n&&n.find("a.k-link").attr("tabIndex",-1),l.on("keydown"+q,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})),i.on(o.support.touch?"touchstart"+q:Qe+q,E+">"+M,Ur.bind(t)).on("focus"+q,t._tableFocus.bind(t)).on("focusout"+q,t._tableBlur.bind(t)).on("keydown"+q,t,t._tableKeyDown.bind(t)),t._filterFocusable().on("focus",t._filterFocus.bind(t))},_filterFocus:function(t){var o=t.target.closest("th");this._filterFocusable().attr(lt,0),this._setCurrent(o),e(o).removeClass(ge)},_tableFocus:function(){var e=this.current();var t=this.lockedTable?this.lockedTable:this.table;e&&e.is(":visible")?e.addClass(ge):this._virtualColScroll?this._setCurrent(t.find(E).first().children(M).first(),!0,!0):this._setCurrent(t.find(E).first().children(M).first()),this.table.attr(lt,0)},_tableBlur:function(){var e=this.current();e&&e.removeClass(ge)},_findCellIndex:function(e,t,o){var r;var l;if(o)for(l=t;l>=0&&(r=l,e[l].hidden);l--);else for(l=t;l<e.length&&(r=l,e[l].hidden);l++);return r},_scrollToColumn:function(e,r){if(this._virtualCellIndex===t)return!1;var l=this;var n=l._virtualCellIndex;var i=br(dr(l.columns));var a=0;e==(Ut?u.LEFT:u.RIGHT)&&n!==i.length-1?n=l._findCellIndex(i,n+1):e==(Ut?u.RIGHT:u.LEFT)&&n?n=l._findCellIndex(i,n-1,!0):e==u.HOME?n=l._findCellIndex(i,0):e==u.END&&(n=l._findCellIndex(i,i.length-1,!0));for(var s=0;s<n;s++)a+=i[s].width;l._virtualCellIndex=n,r&&(r.preventDefault(),r.stopPropagation());let d=l.content;return l._hasVirtualRows()&&l._hasVirtualColumns()&&(d=l.virtualScrollable.wrapper),o.scrollLeft(d,a),!0},_tableKeyDown:function(t){let o=this.current(),r=o&&o.closest(".k-grid-table")[0],l=this.virtualScroll||{},n=this.virtualScrollable&&this.virtualScrollable.fetching(),i=e(t.target),a=!t.isDefaultPrevented()&&(!i.is(":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon")||this._isFocusableGridElement(o));if(t.altKey&&t.keyCode==u.DOWN)return this.current().find(".k-grid-filter-menu, .k-grid-column-menu").click(),void t.stopImmediatePropagation();if(n)t.preventDefault();else if((!l.columns||o&&document.body.contains(o[0])||!this._scrollToColumn(t.keyCode,t))&&(o||(o=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(E).first().children(M).first()),o.length)){var s=!1;t.isDefaultPrevented()||t.keyCode!==u.F10||(s=this._focusToolbar()),a&&t.keyCode==u.UP&&(s=this._moveUp(o,t.shiftKey,t.ctrlKey)),a&&t.keyCode==u.DOWN&&(s=this._moveDown(o,t.shiftKey,t.ctrlKey)),a&&t.keyCode==(Ut?u.LEFT:u.RIGHT)&&(s=this._moveRight(o,t.altKey,t.shiftKey,t.ctrlKey,r)),a&&t.keyCode==(Ut?u.RIGHT:u.LEFT)&&(s=this._moveLeft(o,t.altKey,t.shiftKey,t.ctrlKey,r)),a&&t.keyCode==u.PAGEDOWN&&(s=this._handlePageDown()),a&&t.keyCode==u.PAGEUP&&(s=this._handlePageUp()),a&&t.keyCode==u.HOME&&(s=this._handleHome(o,t.ctrlKey)),a&&t.keyCode==u.END&&(s=this._handleEnd(o,t.ctrlKey)),a&&t.keyCode==u.SPACEBAR&&(s=this._handleSpaceKey(o,t.ctrlKey)),t.keyCode!=u.ENTER&&t.keyCode!=u.F2||(s=this._handleEnterKey(o,r,i,t.keyCode==u.F2)),t.keyCode==u.ESC&&(s=this._handleEscKey(o)),t.keyCode==u.TAB&&(s=this._handleTabKey(o,r,t.shiftKey,i)),t.keyCode!==u.DELETE&&t.keyCode!==u.BACKSPACE||(s=this._handleDeletion(t)),s&&(t.preventDefault(),t.stopPropagation())}},_focusToolbar:function(){var e=this.wrapper.find(".k-grid-toolbar [tabindex=0]");return e.length>0&&(e.first().addClass(".k-focus").trigger("focus"),!0)},_focusFocusable:function(e,t,o,r,l){let n=this._isFocusableGridElement(t)&&t.find(ke);n&&n.length||t.is(ke)&&(n=t),this._containerHasActiveElement(e)&&1!==e.find(ke).length||!t.length||(Gr(this.table,!0),this._setCurrent(t,o,r),1!==n.length||n.is("table")||(n.trigger("focus"),l?.preventDefault()))},_containerHasActiveElement:function(e){return e.find(a()).length},_isFocusableGridElement:function(e){return!!e&&(e.is(_e)||e.has(_e).length)},_moveLeft:function(t,o,r,l,n){var i,a;var s=t.parent();var d=s.parent();return o?s.hasClass(Pe)?this.collapseGroup(s):this.collapseRow(s):l&&t.is(x+Ie)&&this.options.reorderable?this._moveColumn(t,!0):(a=d.find(E).index(s),(i=this._prevHorizontalCell(d,t,a))[0]||this._containerHasActiveElement(t)||(r?this.lockedTable?(i=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(i=i.prevAll(z).first()),i=i.children(R).last()):i=this._tabNext(t,n,!0):(d=this._horizontalContainer(d),(i=this._prevHorizontalCell(d,t,a))[0]!==t[0]&&Gr(this.table,!0))),this._focusFocusable(t,i)),!0},_moveRight:function(t,o,r,l,n){var i,a;var s=t.parent();var d=s.parent();return o?s.hasClass(Pe)?this.expandGroup(s):this.expandRow(s):l&&t.is(x+Ie)&&this.options.reorderable?this._moveColumn(t,!1):(a=d.find(E).index(s),(i=this._nextHorizontalCell(d,t,a))[0]||this._containerHasActiveElement(t)||(r?this.lockedTable?(i=this._relatedRow(s),e.contains(this.table[0],s[0])&&(i=i.nextAll(z).first()),i=i.children(R).first()):i=this._tabNext(t,n,!1):(d=this._horizontalContainer(d,!0),(i=this._nextHorizontalCell(d,t,a))[0]!==t[0]&&Gr(this.table,!0))),this._focusFocusable(t,i)),!0},_moveUp:function(e,t,o){var r=e.parent().parent();var l,n,i,a;t?(l=(l=e.parent()).prevAll(z).first(),l=e.parent().is(z)?l.children().eq(e.index()):l.children(R).last()):o&&e.parent().is(z)&&this._hasReorderableRows()?(n=e.index(),l=(l=e.parent()).prevAll(z).first(),i=this.tbody.children(z).index(l),a=this.tbody.children(z).index(e.parent()),i>=0&&!this.trigger(je,{oldIndex:a,newIndex:i,row:e.parent()})&&(this.reorderRows(e.parent(),i),l=this.tbody.children(z).eq(i).children().eq(n))):(l=this._prevVerticalCell(r,e))[0]||(this._lastCellIndex=0,r=this._verticalContainer(r,!0),(l=this._prevVerticalCell(r,e)).is(":hidden")&&(l=l.nextAll().not(":hidden").first()),l[0]&&Gr(this.table,!0));var s=this._lastCellIndex||0;return this._isStackedMode()?(Gr(this.table,!0),this._setCurrent(l)):this._focusFocusable(e,l),this._lastCellIndex=s,!0},_moveDown:function(e,t,o){var r=e.parent().parent();var l,n,i,a;t?(l=(l=e.parent()).nextAll(z).first(),l=e.parent().is(z)?l.children().eq(e.index()):l.children(R).first()):o&&e.parent().is(z)&&this._hasReorderableRows()?(n=e.index(),l=(l=e.parent()).nextAll(z).first(),i=this.tbody.children(z).index(l),a=this.tbody.children(z).index(e.parent()),i>=0&&!this.trigger(je,{oldIndex:a,newIndex:i,row:e.parent()})&&(this.reorderRows(e.parent(),i+1),l=this.tbody.children(z).eq(i).children().eq(n))):(l=this._nextVerticalCell(r,e))[0]||(this._lastCellIndex=0,r=this._verticalContainer(r),(l=this._nextVerticalCell(r,e))[0]&&Gr(this.table,!0));var s=this._lastCellIndex||0;return this._isStackedMode()?(Gr(this.table,!0),this._setCurrent(this._findVisibleCell(l))):this._focusFocusable(e,this._findVisibleCell(l)),this._lastCellIndex=s,!0},_moveColumn:function(t,o){var r=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible");var l=Lo(Yo(this.columns));var n=r.index(e(t));var i=o?-1:1;var a=l[n];var s=Jo(l,this.columns,n,n+i);s>=0&&(this.reorderColumn(s,a,o),this.trigger(Ve,{newIndex:s,oldIndex:n,column:a}))},_handleHome:function(e,t){const o=this;let r=e.parent();const l=r.parent();const n=o.lockedTable&&o.lockedTable.children("tbody")[0]===l[0];const i=l[0]===o.tbody[0];let a;const s=o._hasVirtualColumns();const d=o._hasVirtualRows();const c=0===(d?o.virtualScrollable.wrapper:o.content).scrollLeft();return s&&d&&t?(o._focusVirtualCell(!0,s&&!c),!0):s?(c?o._setCurrent(o.table.find(z).first().children(M).first()):o._forceScrollVirtualColumn(u.HOME,t),!0):d&&t?(o._focusVirtualCell(!0),!0):(t?a=o.lockedTable?o.lockedTable.find(z).first().children(M).first():o.table.find(z).first().children(M).first():(i||n)&&(i&&this.lockedTable&&(r=o._relatedRow(r)),a=r.children(R).first()),a&&a.length?(o._setCurrent(a),!0):void 0)},_setCurrentVirtualCell:function(e){const t=this;e?this._setCurrent(t.table.find(z).first().children(M).first()):this._setCurrent(t.table.find(z).last().children(M).last())},_forceScrollVirtualColumn:function(e,t,o){const r=this;o?(r._shouldFocusInLastRow=!t,r._shouldFocusInFirstRow=t):e===u.HOME?r._shouldFocusInFirstRow=t:r._shouldFocusInLastRow=t,r.one(oe,(function(){o&&r.one(oe,(function(){r._setCurrentVirtualCell(t)})),r._shouldFocusInLastRow&&(r.content.scrollTop(r.content[0].scrollHeight),delete r._shouldFocusInLastRow),r._shouldFocusInFirstRow&&(r.content.scrollTop(0),delete r._shouldFocusInFirstRow)})),r._scrollToColumn(e)},_focusVirtualCell:function(e,t){const o=this;const r=this.virtualScrollable.verticalScrollbar;const l=Math.ceil(r.scrollTop()+r.innerHeight())>=r[0].scrollHeight;const n=0===this.virtualScrollable.verticalScrollbar.scrollTop();const i=e?n:l;const a=e?u.HOME:u.END;if(i)t?o._forceScrollVirtualColumn(a,e,!0):o._setCurrentVirtualCell(e);else{0===o.dataSource.group().length&&(o.virtualScrollable._alwaysScrollTop=!0);const l=e?0:r[0].scrollHeight;o.one(oe,(function(){t?o._forceScrollVirtualColumn(a,e,!0):(o._setCurrentVirtualCell(e),o._shouldFocusInLastRow&&delete o._shouldFocusInLastRow,o._shouldFocusInFirstRow&&delete o._shouldFocusInFirstRow)})),r.scrollTop(l),r.trigger(de)}},_handleEnd:function(e,t){const o=this;let r=e.parent();const l=r.parent();const n=o.lockedTable&&o.lockedTable.children("tbody")[0]===l[0];const i=l[0]===o.tbody[0];let a;const s=o._hasVirtualColumns();const d=o._hasVirtualRows();const c=d?o.virtualScrollable.wrapper:o.content;const p=c.scrollLeft()+c.innerWidth()>=c[0].scrollWidth;return s&&d&&t?(o._focusVirtualCell(!1,s&&!p),!0):s?(p?o._setCurrent(o.table.find(z).last().children(M).last()):o._forceScrollVirtualColumn(u.END,t),!0):d&&t?(o._focusVirtualCell(!1),!0):(t?a=o.table.find(z).last().children(M).last():(i||n)&&(!i&&this.lockedTable&&(r=o._relatedRow(r)),a=r.children(R).last()),a&&a.length?(o._setCurrent(a),!0):void 0)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,o,r,l){const n=this.options.editable&&"incell"==this._editMode();let i=e(a()).closest(".k-grid-stack-edit-cell,.k-edit-cell");let s;const d=this._isStackedMode();const c=l.is(ke);const u=!l.is("table");const p=d&&l.is(".k-grid-stack-cell");const h=!p&&l.closest(".k-grid-stack-cell");const g=this._isFocusableGridElement(t);const f=!Yr(t);const m=l;let b;if(d?p?b=l.parent().find(".k-grid-stack-cell").length>1:h&&h.length&&(b=h.find(ke).length>1):b=t.find(ke).length>1,!i[0]&&c&&u&&b&&g&&f){if(!d&&(l.is(":last-child")&&!r||l.is(":first-child")&&r))return Gr(this.table,!0),!0;if(l=r?l.prev(ke):l.next(ke),p&&!l.length){const e=m.parent().find(".k-grid-stack-cell");r&&m.is(":first-child")&&(l=e.last()),!r&&m.is(":last-child")&&(l=e.first())}else if(!l.length&&!p){const e=m.closest(".k-grid-stack-cell");r&&m.is(":first-child")&&(l=e),!r&&m.is(":last-child")&&(l=e.find(ke).first())}return d&&l.is(".k-grid-stack-cell")?this._currentStackedCell(l,!0):l.trigger("focus"),!0}if(d&&!p&&!i[0]||!n||t.is("th")||(this.options.scrollable?this._headertables&&this._headertables.filter(o).length:this.thead&&this.thead.filter(l).length)){if(t.parent().hasClass("k-filter-row")){if(s=this._filterFocusable(),!r&&s[s.length-1]===document.activeElement)return s.first().trigger("focus"),!0;if(r&&s[0]===document.activeElement)return s.last().trigger("focus"),!0}return!1}return i[0]&&i[0]!==t[0]&&(t=i),i=this._tabNext(t,o,r),i[0]!==t[0]&&(!!i.length&&(this._handleEditing(t,i,i.closest("table")),!0))},_handleDeletion:function(o){const r=this;const l=r.current();const n=e(a());const i=r._isStackedMode()?!r._currentStackedCell():!n.is("table");return!(!(r._isEditableEnabled!==t?r._isEditableEnabled&&r.options.editable:r.options.editable)||Yr(l)||i||!l.closest("tbody").length||!l.closest(".k-master-row").length)&&(r._removeCommandClick({currentTarget:l,preventDefault:o.preventDefault,stopPropagation:o.stopPropagation}),!0)},_handleEscKey:function(t){const o=a();const r="incell"==this._editMode();const l=this._isStackedMode();const n=e(o);const i=n.is(".k-grid-stack-cell")?e():n.closest(".k-grid-stack-cell");const s=l?n:t;const d=i&&i.length>0;const c=l&&s.is(".k-grid-stack-cell");if(!Yr(i.length?i:s))return c||!d&&t.has(o).length&&(!this._isFocusableGridElement(t)||1!==t.find(ke).length)?(Gr(this.table,!0),delete this._activeStackedCell,!0):d?(i.trigger("focus"),!0):!!t.parent().hasClass("k-filter-row")&&(this._filterFocusable().attr(lt,-1),Gr(this.table,!0),!0);if(r)this.closeCell(!0),l&&d&&(Io(i.parent().children(".k-grid-stack-cell")),this._currentStackedCell(i,!0));else{var u=e(t).closest(vt).index();if(o&&o.blur(),this.cancelRow(!0),u>=0){const e=this._currentStackedCell();if(l&&e){const t=this.tbody.find(vt).eq(u).find(".k-grid-stack-cell").eq(e.index);this._setCurrentStackedCell(t)}else{const e=this.items().eq(u).children(M).first();this._setCurrent(e)}}}return l||Gr(this.table,!0),!l},_toggleCurrent:function(e,t,o){const r=this;const l=e.parent();if(e.is(".k-command-cell"))return!1;if(l.is(".k-filter-row"))return!1;if(l.is(x+Pe))return l.find(".k-icon,.k-svg-icon").first().click(),!0;if(!t&&o){const e=r._isStackedMode()?'[ref="expand-detail-button"], [ref="collapse-detail-button"]':".k-icon,.k-svg-icon";return l.find(e).first().click(),!0}return!1},_handleSpaceKey:function(t,r){var l=this;if(r&&l.groupable&&t.hasClass(Ie)){var n=l.groupable.descriptors();var i=t.attr(o.attr("field"));var a=l.groupable.aggregates();if(l.groupable._canDrag(t)?n.push({field:i,dir:"asc",aggregates:a||[]}):n=e.grep(n,(function(e){return e.field!==i})),!l.trigger("group",{groups:n}))return l.dataSource.group(n),!0}},_hasStackedModeDetailsButton:function(e){return e.find('[ref="expand-detail-button"], [ref="collapse-detail-button"]').length>0},_currentStackedCell:function(e,t){const o=this;if(!e||!e.length)return o._activeStackedCell;o._activeStackedCell={cell:e,index:e.index()},t&&e.length&&e.trigger("focus")},_handleEnterKey:function(t,o,r,l){const n=this;var i=this.options.editable&&!1!==this.options.editable.update;var s=r.closest("td");var d=this._hasDetails();var c;const u=n._isStackedMode();const p=u&&l&&"incell"!==n._editMode();const h=u?"k-grid-stack-edit-cell":"k-edit-cell";const g=u&&(r.is(".k-grid-stack-cell")||r.parent().is(".k-grid-stack-cell")||r.closest(".k-grid-stack-cell").length>0);if(r.is("table")||e.contains(t[0],r[0])||(t=s),t.is("th"))return c=t.find(".k-link"),!(t.has(e(a())).length>0)&&(c.length?c.click():t.parent().hasClass("k-filter-row")?(this._filterFocusable().attr(lt,0),t.find(":kendoFocusable").first().trigger("focus")):t.find(we).trigger("focus"),!0);if(!p){if(!g&&this._toggleCurrent(t,i,d))return!0;if(g&&n._hasStackedModeDetailsButton(r))return this._toggleCurrent(t,!1,!0),!0;let e=":kendoFocusable";u&&!g&&Io(t.find(".k-grid-stack-cell"));var f=(g?r:t).find(e).first();if(f[0]&&(g||!t.hasClass(h)&&t.hasClass("k-focus")))return g?f.trigger("focus"):n._currentStackedCell(f,!0),!0}return!(!i||r.is(":button,.k-button,textarea"))&&(s[0]||(s=t),u&&r.is(".k-grid-stack-cell")&&n._currentStackedCell(r),g&&(s=r.is(".k-grid-stack-cell")?r:r.closest(".k-grid-stack-cell")),this._handleEditing(s,!1,o),!0)},_nextHorizontalCell:function(e,t,o){if(!t.nextAll(R).length){var r=e.find(E);if(-1==r.index(t.parent())){if(t.hasClass(Ie)){var l=[];return rr([sr(this.columns)[0]],Sr(r.eq(0).children(":visible").first()),l,0,0),l[o]?l[o][0]:t}return t.parent().hasClass("k-filter-row")?r.last().children(R).first():this._findVisibleCell(r.eq(o).children(R+",[hidden]").first())}}return this._findVisibleCell(t.nextAll(R+",[hidden]").eq(0))},_prevHorizontalCell:function(e,t,o){var r=t.prevAll(R);if(!r.length){var l=e.find(E);if(-1==l.index(t.parent())){if(t.hasClass(Ie)){var n=[];var i=sr(this.columns);return rr([i[i.length-1]],Sr(l.eq(0).children().last()),n,0,0),n[o]?n[o][0]:t}return t.parent().hasClass("k-filter-row")?l.last().children(R).last():l.eq(o).children(R).last()}}r=t.prevAll(R+",[hidden]");let a=this._findVisibleCell(r.first());return a.is(".k-group-cell")?a.next(R):a},_currentDataIndex:function(e,o){var r=o.attr("data-index");if(!r)return t;var l=sr(this.columns).length;return l&&!e.closest(Ct).hasClass("k-grid-content-locked")[0]?r-l:r},_findVisibleCell:function(e){var t=e.index();var o=e.closest("tr").index();var r;if(e.is("[hidden]")){r=e.prevAll(":not([hidden])").first();var l=e.prevUntil(":not([hidden])","[hidden]").length;if(!r.attr("colspan")||r.attr("colspan")>1&&r.attr("colspan")<=l+1){if(0===(r=e.prevAll("[hidden]").last()).length)return e.closest("tr").prevAll().find(`td:nth-of-type(${t+1}):visible`).last();for(;!(r.attr("rowspan")||r.attr("rowspan")>1&&r.attr("rowspan")!=o-r.closest("tr").index()||Math.abs(r.index()-t)==r.attr("colspan"));)if(0===(r=r.closest("tr").prevAll().find("td, th").eq(t).first()).length){r=e;break}}}else r=e;return r},_prevVerticalCell:function(t,o){var r;var l=o.parent();var n=t.children(E);var i=n.index(l);var a=this._currentDataIndex(t,o);if(a||o.hasClass(Ie))return(r=yr(o)).eq(r.length-2);if(a=Math.max(l.children(I).index(o),this._lastCellIndex||0),l.hasClass("k-filter-row")){let e=n.last().children(".k-group-cell").length;return wr(t).filter(Fo).eq(Math.max(0,a-e))}if(-1==i){if(this._hasVirtualColumns()&&(a=this._virtualCellIndex),!(l=t.find("tr.k-filter-row:visible"))[0]){(this._hasDetails()||o.parent().find(".k-hierarchy-cell").length)&&a&&a--;let e=0;return o.parent().is(".k-table-group-row")&&(e=n.last().children(".k-group-cell").length),wr(t).eq(Math.max(0,a-e))}this._hasDetails()&&a--}else l=0===i?e():n.eq(i-1);if((r=l.children(I)).length>a){let e=r.eq(a);return e.is(".k-group-cell")&&(e=e.nextAll("td").not(".k-group-cell").not(":hidden").first()),this._findVisibleCell(e)}return r.eq(0)},_nextVerticalCell:function(e,o){var r;var l;var n=l=o.closest(vt);var i=e.children(E);var a=i.index(n);var s=this._currentDataIndex(e,o);var d=this.virtualScroll||{};var c;if(-1!=a&&s===t&&o.hasClass(Ie))return Sr(o).eq(1);s=s?parseInt(s,10):n.children(I).index(o),s=Math.max(s,this._lastCellIndex||0),-1==a?(n=i.eq(0),d.columns&&(c=parseInt(n.children().first().attr("colspan"),10),s=this._virtualCellIndex-(c>1?c:0)),(this._hasDetails()||n.find(".k-hierarchy-cell").length)&&s++,n.hasClass("k-table-group-row")&&(s+=l.children(".k-group-cell").length)):n=i.eq(a+o[0].rowSpan);let u=(r=n.children(".k-group-cell,"+I)).eq(0);return r.length>s&&(u=r.eq(s)),u.is(".k-group-cell")&&(u=u.nextAll("td").not(".k-group-cell").not(":hidden").first()),u},_verticalContainer:function(e,t){var o=e.parent();var r=this._navigatableTables.length;var l=Math.floor(r/2);var n=k(o[0],this._navigatableTables);return t&&(l*=-1),((n+=l)>=0||n<r)&&(o=this._navigatableTables.eq(n)),o.find(t?">thead":">tbody")},_filterFocusable:function(){return this.wrapper.find(".k-filter-row").find(".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible")},_horizontalContainer:function(e,t){var o=this._navigatableTables.length;if(o<=2)return e;var r=e.parent();var l=k(r[0],this._navigatableTables);return l+=t?1:-1,!t||2!=l&&l!=o?!t&&(1==l||l<0)?e:this._navigatableTables.eq(l).find("thead, tbody"):e},_tabNext:function(e,t,o){var r=!0;var l=o?e.prevAll(R).first():e.nextAll(":visible").first();if(!l.length){if(l=e.parent(),this.lockedTable&&(r=o&&t==this.lockedTable[0]||!o&&t==this.table[0],l=this._relatedRow(l)),r){if(this._hasVirtualColumns())return e;l=l[o?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible").first()}l=o?l.children(R).last():l.children(R).first()}return l},_handleEditing:function(t,o,r){var l,n,i=this,s=e(a()),d=i._editMode(),c=Kt.msie,u=i._editContainer,p=i.options.editable&&!1!==i.options.editable.update;const h=i._isStackedMode();const g=t.is(".k-grid-stack-cell");if(r=e(r),"incell"==d){const e=h?"k-grid-stack-edit-cell":"k-edit-cell";n=t.hasClass(e)}else n=g?t.hasClass("k-grid-stack-edit-cell"):t.parent().hasClass("k-grid-edit-row");if(i.editable){if(e.contains(u[0],s[0])&&(s.trigger("blur"),c&&s.trigger("blur")),!i.editable&&!g)return void Gr(i.table);if(!i.editable.end())return h&&g?i._setCurrentStackedCell(t):("incell"==d?i._setCurrent(u):i._setCurrent(u.children().filter(R).first()),void((l=u.find(":kendoFocusable").first()[0])&&l.focus()));"incell"==d?i.closeCell():(i.saveRow(),n=!0)}if(o&&i._setCurrent(o),g||Gr(i.table,!0),p){if(!n&&!o||o)if(d===ut){if(!(h?t.find("[ref='expand-detail-button'], [ref='collapse-detail-button']").length:e(i.current()).hasClass("k-hierarchy-cell"))){const e=i._isStackedMode();const o=e?t:i.current();if(e&&o.is(".k-command-cell"))return;i.editCell(o,e&&o.parent().children().index(o))}}else i.editRow(i.current().parent());i._toggleToolbarEditingItemsVisibility()}},_wrapper:function(){var e=this,t=e.table,r=e.options.height,l=e.options.width,n=e.element;n.is(Ct)||(n=n.wrap("<div/>").parent()),e.wrapper=n.addClass("k-grid "+o.getValidCssClass("k-grid-","size",e.options.size)),e._isStackedMode()?e.wrapper.addClass(O):e.wrapper.removeClass(O),r&&(e.wrapper.css(tt,r),t.css(tt,rt)),l&&e.wrapper.css(ot,l),e._initMobile()},_initContextMenu:function(){var e=this,t=e.options,o=h(t.contextMenu)&&b(t.contextMenu.groups)?{items:t.contextMenu.groups}:{items:ro},l=h(t.contextMenu)&&b(t.contextMenu.body)?{items:t.contextMenu.body}:{items:to},n=h(t.contextMenu)&&b(t.contextMenu.head)?{items:t.contextMenu.head}:{items:oo};var i=h(t.contextMenu)?t.contextMenu:{};l=g({},{messages:t.messages,target:e.tbody,filter:".k-table-td",action:e._action.bind(e),states:e._buildStates()},i,l),n=g({},{messages:t.messages,target:e.thead,filter:".k-table-th",action:e._action.bind(e),states:e._buildStates()},i,n),e.groupable&&(o=g({},{showOn:"click",target:e.groupable.groupContainer,filter:".k-groupable-context-menu",messages:t.messages,action:e._action.bind(e),states:e._buildStates()},i,o)),e.tbodyContextMenu=new r.grid.ContextMenu("<ul></ul>",l),e.theadContextMenu=new r.grid.ContextMenu("<ul></ul>",n),e.groupsContextMenu=!!e.groupable&&new r.grid.ContextMenu("<ul></ul>",o)},_buildStates:function(){var t=this;return{isEditable:t.options.editable,isSelectable:t.options.selectable,isSortable:t.options.sortable,isRowReorderable:h(t.options.reorderable)?t.options.reorderable.rows:t.options.reorderable,isGroupable:t.options.groupable,allowPaste:t.options.allowPaste,alwaysDisabled:!1,hasSelection:()=>!!this.select()&&this.select().length>0,isSorted:()=>!(this.dataSource.sort()&&this.dataSource.sort().length>0),canMoveGroupPrev:t=>e(t).closest(".k-chip").index()>0,canMoveGroupNext:t=>{var o=e(t).closest(".k-chip-list").children().length-1;return e(t).closest(".k-chip").index()<o}}},_action:function(e){var t=e.command,o=g({grid:this},e.options);return new r.grid.commands[t](o).exec()},_initMobile:function(){var e=this.options;var t=this;if(this._isMobile="auto"!==t.options.adaptiveMode&&!0===e.mobile&&o.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile,o.support.mobileOS&&this.wrapper.addClass("k-grid-mobile"),this._isMobile){var r=this.wrapper.wrap("<div data-"+o.ns+'stretch="true" data-'+o.ns+'role="view" data-'+o.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(r),this.view=this.pane.view(),e.height?this.pane.element.parent().css(tt,e.height):this.pane.element.parent().css(tt,this.wrapper[0].style.height),this._editAnimation="slide",t.wrapper.on("transitionend"+q,(function(e){e.stopPropagation()})),t.wrapper.on("contextmenu"+q,"th a",(function(e){return e.preventDefault(),!1})),this.view.bind("showStart",(function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())}))}},_createPane:function(e){return o.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}})},_initLoader:function(t){var o=this,r={size:"medium",messages:{exporting:"Exporting..."}};r=e.extend({},r,t);const l=e("<div></div>").kendoLoader(r).data("kendoLoader");o.loader=l,o._loaderContainer=A.u.bind(o)},_tbody:function(){var t,o=this.table;(t=o.find(">tbody")).length||(t=e("<tbody/>").appendTo(o)),t.addClass("k-table-tbody"),this.tbody=t},_scrollable:function(){var t,r,l,n=this,i=n.options,a=i.scrollable,s=!0!==a&&a.virtual?function(e){var t;if("string"==typeof e)return"true"===(t=e.toLowerCase())?{rows:!0}:{rows:t.indexOf("rows")>-1,columns:t.indexOf("columns")>-1};if(!0===e)return{rows:!0}}(a.virtual):null,d=!o.support.kineticScrollNeeded||s&&s.rows?o.support.scrollbar():0;const c=n._isStackedMode();if(a){c||((t=n.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(n.table)),t.css(Ut?"padding-left":"padding-right",a.virtual?d+1:d),(r=e('<table role="none" class="k-grid-header-table k-table"/>')).addClass(o.getValidCssClass("k-table-","size",i.size)),r.width(n.table[0].style.width)),c||(r.append(n.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(r))),n.content=n.table.parent(),n.virtualScroll=s,n.content.is(".k-virtual-scrollable-wrap, ."+Xt)&&(n.content=n.content.parent()),n.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(n.content=n.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),n.content.parent().hasClass("k-grid-container")||n.content.wrap("<div class='k-grid-container' />").parent(),s&&s.rows&&!n.virtualScrollable&&n._createVirtualScrollable(),s&&s.columns&&n.table.add(n.thead.parent()).css({width:er(hr(ur(n.columns)))}),c?n.scrollables=n.content:(l=t.children(".k-grid-header-wrap"),n.scrollables=l.add(n.content));var u=n.wrapper.find(".k-grid-footer");if(u.length&&(n.scrollables=n.scrollables.add(u.children(".k-grid-footer-wrap"))),c||l.off("scroll"+q).on("scroll"+q,(function(e){n._scrollLeft!==this.scrollLeft&&o.scrollLeft(n.scrollables.not(e.currentTarget),this.scrollLeft)})),s&&s.rows)n.content.find(">.k-virtual-scrollable-wrap").off("scroll"+q).on("scroll"+q,(function(){var e=this.scrollLeft!=n._scrollLeft;n._scrollLeft=this.scrollLeft,o.scrollLeft(n.scrollables,this.scrollLeft),n.lockedContent&&(n.lockedContent[0].scrollTop=this.scrollTop),s.columns&&e&&n.refresh()}));else{var p=a.endless;var h=n.dataSource.options.pageSize;p&&(n._endlessPageSize=h),n.content.off("scroll"+q).on("scroll"+q,(function(e){var t=this.scrollLeft!=n._scrollLeft;n._scrollLeft=this.scrollLeft,o.scrollLeft(n.scrollables.not(e.currentTarget),n._scrollLeft),n.lockedContent&&e.currentTarget==n.content[0]&&(n.lockedContent[0].scrollTop=this.scrollTop),p&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!n._endlessFetchInProgress&&n._endlessPageSize<n.dataSource.total()&&(n._skipRerenderItemsCount=n._endlessPageSize,n._endlessPageSize=n._endlessPageSize+h,n.dataSource.options.endless=!0,n._endlessFetchInProgress=!0,n.dataSource.pageSize(n._endlessPageSize)),s&&s.columns&&t&&(n._virtualColScroll=!0,n._cacheEditableState(),n.refresh(),n._restoreEditableState(),n._virtualColScroll=!1),n.rowResizer&&n.rowResizer.css("left",e.currentTarget.scrollLeft+"px")}));var g=n.content.data("kendoTouchScroller");g&&g.destroy(),(g=o.touchScroller(n.content))&&g.movable&&(n.touchScroller=g,g.movable.bind("change",(function(e){o.scrollLeft(n.scrollables,-e.sender.x),n.lockedContent&&n.lockedContent.scrollTop(-e.sender.y)})),n.one(oe,(function(e){e.sender.wrapper.addClass("k-grid-backface")})))}}},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new io(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(ae,e._onVirtualPaging.bind(e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===pt},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===ut},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_hasVirtualRows:function(){return!!(this.virtualScroll||{}).rows},_scrollVirtualWrapper:function(){var e=this;var t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t=this;var o=t._editableState||{};var r=o.model;var l=t.dataSource;var n=t._isVirtualInlineEditable();var i=t._isVirtualIncellEditable();var a=t._hasVirtualColumns();var s;var d;if((n||i||a)&&r&&l._getByUid(r.uid,l.view()))if(t._editMode()===pt)t._shouldClearEditableState=!1,t.editRow(r),a||t._focusEditable();else if(t._editMode()===ut){const l=t._isStackedMode();s=t.tbody.children(po("uid",r.uid)),(d=l?e(s).find(".k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)"+po(dt,o.field)):e(s).children(po(dt,o.field)))[0]&&(t._shouldClearEditableState=!1,t.editCell(d,l&&d.parent().children().index(d)),a||t._focusEditable())}t._shouldClearEditableState=!0},_focusEditable:function(){var e=this;var t=(e._editableState||{}).field;var o=e._editContainer;o&&o.length&&!y(o[0],a())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?o.find(po(st,t)).find(ke).eq(0).trigger("focus"):(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&o.find(ke).eq(0).trigger("focus"))},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(Qr((e.virtualScrollable||{}).wrapper,e._editContainer)||Qr(e.content,e._editContainer))},_cacheEditableState:function(){var t=this;var r=t._editContainer;var l=r?t._modelForContainer(r):null;var n=t._isVirtualInlineEditable();var i=t._isVirtualIncellEditable();var s=t._hasVirtualColumns();var d;var c;var u;(n||i||s)&&l&&(t._clearEditableState(),d=e(a()),r&&d[0]&&y(r[0],d[0])&&(d.change(),(c=o.widgetInstance(d,o.ui))&&v(c.value)&&d.is(ct)&&(u=d.val(),d.is("[type='checkbox'")&&(u=d.is(":checked")),c.value(u),c.trigger(X))),t._editMode()===pt?t._editableState={model:l,field:d.closest("["+o.attr(st)+"]").attr(o.attr(st))}:t._editMode()===ut&&(t._editableState={model:l,field:r.attr(o.attr(dt))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,o=e.lockedContent;t&&t.find(F).removeClass(Re),o&&o.find(F).removeClass(Re)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_destroyRowResizing:function(){this.rowResizing&&(this.rowResizing.destroy(),this.rowResizing=null),this.rowResizer&&(this._detachRowResizerEvents(),this.rowResizer.off(et+q),this.rowResizer=null,this._clearCachedRowsHeight())},_renderNoRecordsContent:function(){var t=this;if(t.options.noRecords){var r=t.table.parent().children("."+ye);r.length&&r.remove(),t.dataSource&&t.dataSource.view().length||(r=e(t.noRecordsTemplate({grid:t})),o.applyStylesFromKendoAttributes(r,["margin","position"]),r.insertAfter(t.table))}},_setContentWidth:function(t){var r,l=this,n="k-grid-content-expander",i='<div class="'+n+'"></div>',a=l.resizable;l.options.scrollable&&l.wrapper.is(":visible")&&(r=l.table.parent().children("."+n),l._setContentWidthHandler=l._setContentWidth.bind(l),l.dataSource&&l.dataSource.view().length?r[0]&&(r.remove(),a&&a.unbind("resize",l._setContentWidthHandler)):(r[0]||(r=e(i).appendTo(l.table.parent()),a&&a.bind("resize",l._setContentWidthHandler)),l.thead&&(r.width(l.thead.width()),isNaN(parseFloat(t,10))||o.scrollLeft(l.content,t))),l._applyLockedContainersWidth(!0),l._syncLockedContentHeight(),l.lockedHeader&&0===l.table[0].clientWidth&&(l.table[0].style.width="1px"))},_applyLockedContainersWidth:function(e){if(this.options.scrollable&&this.lockedHeader){let t,r=this.thead.parent(),l=r.parent(),n=this.wrapper[0].clientWidth,i=this._groups(),a=o.support.scrollbar(),s=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),c=r.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),u=tr(s),p=tr(c);i>0&&e&&(u+=d(this.lockedHeader.find(".k-group-cell").first())*i),u>=n&&(u=n-3*a),this.lockedHeader.add(this.lockedContent).width(u),l[0].style.width=l.parent().width()-u-2+_t,r.add(this.table).width(p),this.virtualScrollable&&!Qt&&(n-=a),this.content[0].style.width=n-u-1+_t,this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(u),t=this.footer.find(".k-grid-footer-wrap"),t[0].style.width=l[0].clientWidth+_t,t.children().first().width(p))}},_setContentHeight:function(){var e,t=this,r=t.options,l=t.wrapper.children(".k-grid-header"),n=o.support.scrollbar();var i=(r.scrollable||{}).height;if(r.scrollable&&t.wrapper.is(":visible")){i&&""===t.content[0].style.height&&(t.content[0].style.height=i),e=t.wrapper.innerHeight(),e-=c(l),t.pager&&t.pager.element.is(":visible")&&(e-=c(t.pager.element)),r.groupable&&(e-=c(t.wrapper.children(".k-grouping-header:not(.k-hidden)"))),r.toolbar&&(e-=c(t.wrapper.children(".k-grid-toolbar"))),t.footerTemplate&&(e-=c(t.wrapper.children(".k-grid-footer"))),t.statusBar&&(e-=c(t.wrapper.children(".k-selection-aggregates")));((a=t.wrapper)[0].style.height||(s=a.height(),a.height(rt),s!=a.height()?(a.height(""),1):(a.height(""),0)))&&(e>2*n?(t.lockedContent&&(n=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?n:0,t.lockedContent.height(e-n)),t.content.height(e)):t.content.height(2*n+1))}var a,s},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,!0).length,o=e._rowHeight;if(0===t)return o;e._rowHeight||(e._rowHeight=o=c(e.table)/t,e._sum=o,e._measures=1);var r=c(e.table)/t;return o!==r&&(e._measures++,e._sum+=r,e._rowHeight=e._sum/e._measures),o},_dataSource:function(){var e,o=this,r=o.options,n=r.dataSource;n=b(n)?{data:n}:n,h(n)&&(g(n,{table:o.table,fields:o.columns}),e=r.pageable,h(e)&&e.pageSize!==t&&(n.pageSize=e.pageSize)),o.dataSource&&o._refreshHandler?o.dataSource.unbind(X,o._refreshHandler).unbind(T,o._progressHandler).unbind(he,o._requestEndHandler).unbind(H,o._errorHandler).unbind(gt,o._sortHandler):(o._refreshHandler=o.refresh.bind(o),o._progressHandler=o._requestStart.bind(o),o._requestEndHandler=o._requestEnd.bind(o),o._errorHandler=o._error.bind(o),o._sortHandler=o._clearSortClasses.bind(o)),o.dataSource=l.create(n).bind(X,o._refreshHandler).bind(T,o._progressHandler).bind(he,o._requestEndHandler).bind(H,o._errorHandler).bind(gt,o._sortHandler)},_error:function(){this._progress(!1),this._requestInProgress=!1},_requestStart:function(){this._progress(!0),this._requestInProgress=!0},_requestEnd:function(){this._requestInProgress=!1},_modelChange:function(t){var l,n,i,a,s,d,c,u,p,h=this,g=h.tbody,f=t.model,m=h.tbody.find("tr["+o.attr("uid")+"="+f.uid+"]"),b=m.hasClass("k-table-alt-row"),k=h._items(g).index(m),_=h.lockedContent;const v=h._isStackedMode();_&&(l=h._relatedRow(m));if((v?m.add(l).find(".k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)"):m.add(l).children(".k-edit-cell")).length&&!h.options.rowTemplate){(v?m.add(l).children(":not(.k-group-cell,.k-hierarchy-cell)").find(".k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)"):m.add(l).children(":not(.k-group-cell,.k-hierarchy-cell)")).each((function(){if(n=e(this),!(v&&n.hasClass(".k-command-cell")||(i=br(h.columns)[h._calculateColumnIndex(n)]).field!==t.field)){const e=v?"k-grid-stack-edit-cell":"k-edit-cell";if(n.hasClass(e))n.addClass("k-dirty-cell");else{const e=v?n.find(".k-grid-stack-content"):n;h._displayCell(e,i,f)}}}))}else if(!m.hasClass("k-grid-edit-row")){d=e().add(m),_&&(a=(b?h.lockedAltRowTemplate:h.lockedRowTemplate)(f),d=d.add(l),l.replaceWith(a)),a=(b?h.altRowTemplate:h.rowTemplate)(f);let t=e(a);for(o.applyStylesFromKendoAttributes(t,["display"]),m.replaceWith(t),a=h._items(g).eq(k),_&&(m=m.add(l),l=h._relatedRow(a)[0],qr(a[0],l),a=a.add(l)),((s=h.options.selectable)||h._checkBoxSelection)&&m.hasClass(ve)&&h.select(a),u=d.children(":not(.k-group-cell,.k-hierarchy-cell)"),c=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),k=0,p=h.columns.length;k<p;k++)i=h.columns[k],n=v?c.find().eq(k):c.eq(k),s&&u.eq(k).hasClass(ve)&&n.addClass(ve);h.trigger("itemChange",{item:a,data:f,ns:r})}},_pageable:function(){var t,r=this,l=r.options.pageable,n=r.options.size,i=r.options.navigatable;if(l){(t=r.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager k-grid-pager"/>')),"top"===l.position?t.prependTo(r.wrapper).addClass("k-grid-pager-top"):t.appendTo(r.wrapper),r.pager&&r.pager.destroy();let a=r.options.adaptiveMode;"auto"===r.options.adaptiveMode&&l&&"object"==typeof l&&l.adaptiveMode&&(a=l.adaptiveMode),"object"==typeof l&&l instanceof o.ui.Pager?r.pager=l:r.dataSource._groupPaging?r.pager=new eo(t,g({},l,{dataSource:r.dataSource,navigatable:i,size:n,adaptiveMode:a})):r.pager=new o.ui.Pager(t,g({},l,{dataSource:r.dataSource,navigatable:i,size:n,adaptiveMode:a})),r.pager.bind("pageChange",(function(e){r.trigger("page",{page:e.index})&&e.preventDefault()})),r._togglePagerVisibility()}},_statusBar:function(){var t=this,o=t.options,r=t.wrapper,l=o.statusBarTemplate,n="";l&&(t.statusBar?t.statusBar.html(l({aggregates:t._cellAggregates})):(n+='<div class="k-selection-aggregates k-grid-selection-aggregates">',n+=l({aggregates:t._cellAggregates}),n+="</div>",o.scrollable?t.statusBar=e(n).insertAfter(r.find(".k-grid-container")):t.statusBar=e(n).insertAfter(r.find(".k-grid-table"))))},_footer:function(){var t,r=this,l=r.dataSource.aggregates(),n="",i=r.footerTemplate,a=r.options,s=r.footer||r.wrapper.find(".k-grid-footer");if(i)if(n=e(r._wrapFooter(i(l))),o.applyStylesFromKendoAttributes(n,["display","left","right"]),s.length){var d=n;s.replaceWith(d),s=r.footer=d}else a.scrollable?(r.statusBar?r.footer=n.insertBefore(r.statusBar):a.pageable&&"top"!==a.pageable.position?r.footer=n.insertBefore(r.wrapper.children("div.k-grid-pager")):r.footer=n.appendTo(r.wrapper),s=r.footer):s=r.footer=n.insertAfter(r.tbody);else s&&!r.footer&&(r.footer=s);if(s.length&&(a.scrollable&&(t=s.attr(lt,-1).children(".k-grid-footer-wrap"),r.scrollables=e(r.scrollables.filter((function(){return!e(this).is(".k-grid-footer-wrap")})).toArray()).add(t)),r._footerWidth&&s.find("table").css("width",r._footerWidth),t)){var c=o.scrollLeft(r.content);!0!==a.scrollable&&r.virtualScroll&&r.virtualScroll.rows&&(c=o.scrollLeft(r.wrapper.find(".k-virtual-scrollable-wrap"))),o.scrollLeft(t,c)}r.lockedContent&&(r._appendLockedColumnFooter(),r._applyLockedContainersWidth(),r._syncLockedFooterHeight())},_wrapFooter:function(t){var r,l=this,n="",i=o.support.mobileOS?0:o.support.scrollbar();return l.options.scrollable?((r=(n=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table class="k-table k-grid-footer-table"><tfoot class="k-table-tfoot">'+t+"</tfoot></table></div></div>")).find("table")).addClass(o.getValidCssClass("k-table-","size",l.options.size)),l._appendCols(r),n.css(Ut?"padding-left":"padding-right",i),n):'<tfoot class="k-grid-footer k-table-tfoot">'+t+"</tfoot>"},_actionsheetFooterActionsTemplate:function(e){let t="";return e.forEach((e=>{const r=e.command;const l=e.text;t+=o.html.renderButton(`<button data-command=${r}>${l}</button>`,e)})),t},_isAdaptive:function(){const e=this;return"auto"===e.options.adaptiveMode&&(e.smallMQL.mediaQueryList.matches||e.mediumMQL.mediaQueryList.matches)},_isStackedMode:function(){return"stacked"===this.options.dataLayoutMode},_toolPopup:function(e){return e.popup&&e.popup.wrapper},_filterToolbarTool:function(t){const r=this;const l=br(r.columns);const n=r.options;const i=e=>{const t=r._isAdaptive()?"[ref-actionsheet-action-button]":"[ref='clear-filter']";return r._toolPopup(e)?.find(t)};const a=r._toolbarOptionsForTool("filter");const s=t.data("kendoColumnMenu");s&&(s.wrapper.off("click"+q),s.element.off("click"+q),s.destroy());const d=!(!n.filterable||!1===r.options.columnMenu.filterable)&&g(!0,{pane:r.pane},n.filterable);if(!d)return;const c={dataSource:r.dataSource,columns:!1,sortable:!1,filterable:d,hideAutoSizeColumn:!0,owner:r,adaptiveMode:r.options.adaptiveMode,encodeTitles:r.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:no(r.options.messages).filter,title:"Filter by",closeButton:!0,ref:"filter-view"},closeCallback:function(e){e.removeClass(ve);const o=r._toolPopup(t);o.length&&o.find(".k-focus").removeClass("k-focus"),t.element.focus()},init:function(e){if(t.wrapper.attr("ref","filter-tool"),!r._showAdaptiveView)for(var o=0,i=l.length;o<i;o++){const e=l[o];const i=e.field;if(!(n.filterable&&!1!==e.filterable&&!e.draggable&&!e.selectable&&!e.command))continue;const a=t.wrapper.find(`.k-columns-item[data-field="${i}"]`);r._initFilterMenuForColumn(e,a)}},contentTemplate:function({isAdaptive:e}){let t="";for(let e=0;e<l.length;e++){const o=l[e];!(n.filterable&&!1!==o.filterable)||o.command||o.draggable||o.selectable||(t+='<div class="k-columnmenu-item-wrapper">',t+=`<div class="k-columnmenu-item-content k-columns-item" ref="filter" tabindex="0" data-field="${o.field}" data-index=${o.index||e||0}></div>`,t+="</div>")}return a&&!a.clearButton||e||(t+='<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">',t+=o.html.renderButton(`<button ref="clear-filter">${no(r.options.messages).filter[0].text}</button>`,{icon:"filter-clear"}),t+="</div>"),t},filtering:function(e){r.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(r._clearEditableState(),r.dataSource.options.endless&&r._resetEndless())}};(t=t.kendoColumnMenu(c).data("kendoColumnMenu")).element.bind("click"+q,(function(o){t.popup&&t.popup._closing||(e(o.currentTarget).addClass(ve),i(t)?.toggleClass("k-disabled",!t.dataSource._filter))}));const u=function(e){const t=e.sender.wrapper&&e.sender.wrapper.find(".k-grid-filter-tool")?.data("kendoColumnMenu");const o=t.dataSource._filter;const l=e.field;let n=!e.filter;let a;const s=o&&o.filters;if(n&&s&&s.length&&!s.find((e=>e.filters&&e.filters.length?e.filters[0].field===l:e.field===l)))return;const d=t.wrapper.find(`.k-columns-item[data-field='${l}']`);const c=d?.closest(".k-expander")?.find(".k-columnmenu-item");o&&o.filters.length?a=n?s.filter((e=>e.field!==l)).length>0:!n:n||(a=!0),d.length&&d.data("kendoExpansionPanel").toggle(!1),i(t)?.toggleClass("k-disabled",!a),r._toggleColumnMenuFilterIndicator(c,!n),r._toggleBadge(t.element,a)};r.unbind("filter",u),r.bind("filter",u),t.bind("open",(function(){const e=r._toolPopup(t);if(e.length){e.focus();const o=i(t);const l=t.dataSource._filter&&t.dataSource._filter.filters;l&&l.length&&l.forEach((e=>{const o=e.field||e.filters[0].field;const l=t.wrapper.find(`.k-columns-item[data-field='${o}']`);const n=l?.closest(".k-expander")?.find(".k-columnmenu-item");r._toggleColumnMenuFilterIndicator(n,!0)})),o.length&&(o.off("mousedown"+q),o.on("mousedown"+q,(function(){r.dataSource.filter([]),r._toggleBadge(t.element,!1),t.wrapper.find(".k-columnmenu-indicators").remove(),o.toggleClass("k-disabled",!0),t.popup.close()})))}}))},_initFilterMenuForColumn:function(e,t){const o=this;let r=o._hasFilterMenu();let l;if(t.length){l=t.data("kendoFilterMenu"),l&&l.destroy(),l=t.data("kendoFilterMultiCheck"),l&&l.destroy();var n=e.filterable;var i=g({},r,n,{appendToElement:!0,componentType:"modern",dataSource:o.dataSource,values:e.values,format:e.format,title:e.title||e.field,pane:o.pane,adaptiveMode:o.options.adaptiveMode,change:function(e){o.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(o._clearEditableState(),o.dataSource.options.endless&&o._resetEndless())}});return n&&n.messages&&(i.messages=g(!0,{},r.messages,n.messages)),n&&n.dataSource&&(i.forceUnique=!1,i.checkSource=n.dataSource),n&&n.multi?t.kendoFilterMultiCheck(i).data("kendoFilterMultiCheck"):t.kendoFilterMenu(i).data("kendoFilterMenu")}},_isRowSelection:function(){const e=this;const t=e.options.selectable;if(!t&&!e._checkBoxSelection)return!1;if(!0===t||"multiple"===t||"single"===t||"multiple"===t?.mode||"single"===t?.mode||e._checkBoxSelection)return!0;if(h(t)){const e=t.mode;return!!e&&("string"==typeof e&&e.includes("row"))}return"string"==typeof t&&t.includes("row")},_isSingleSelectionEnabled:function(){const e=this.options.selectable;if(!e)return!1;if(!0===e||"single"===e||"single"===e?.mode||"row"===e||"row"===e?.mode||"cell"===e||"cell"===e?.mode)return!0;if(h(e)){const t=e.mode;return!!t&&("string"==typeof t&&t.includes("single"))}return"string"==typeof e&&e.includes("single")},_initAiPrompt:function(){const t=this;const r=t.options.ai;const l=r?.aiAssistant||{};const n=t.options.messages?.ai;let i=r?.service;const a={data:e=>function(e,t){return{role:"user",contents:[{$type:"text",text:e}],columns:t.map(((e,t)=>{let o;e.selectable?o="checkbox":e.command?o="command":e.draggable&&(o="draggable");const r={...e,id:`${e.uid}`};return o&&(r.type=o),r}))}}(e,Yo(t.columns)),outputGetter:e=>function(e,t,o){const r=e?.commands||[];const l=e?.status;const n=r.map(((e,r)=>{const l="• "+t.invalidSelection;if("GridSelect"===e?.type){const t=Object.keys(e?.select.cells).length;if(t&&o&&e?.select?.filters.length)return e.skipCommand=!0,l;if(!t&&!o&&e?.select?.filters.length)return e.skipCommand=!0,l}return e?.message?"• "+e?.message:""}));let i=[];return l?i.push(t.error+" "+`${e.status} ${e.statusText}`):e.message?i.push(e.message):(i.push(t.success),n&&i.push(...n)),i.join("/n")}(e,n,t._isRowSelection())};if(r?.service){const e="string"==typeof r.service;const t=e?r.service:r.service.url;t&&(i={...a,...e?{}:r.service,url:t})}const s="skeleton"+o.guid();const d=t._aiAssistant=e("<div></div>").kendoAIPrompt(e.extend(!0,{service:i,speechToText:!0,promptTextArea:{resize:"none",rows:3,placeholder:n?.promptPlaceholder||"",fillMode:"outline",rounded:"medium",maxLength:1e3},outputTemplate:e=>{const r=e.output;return r.output?.split("/n").map((e=>((e,t,r)=>{const l=function(e){const t="Column '";const o=e.indexOf(t);const r=o+8;const l=e.indexOf("'",r);return{uid:e.substring(r,l),originalText:e.substring(o,l+1)}}(e);const n=r.find((e=>e.uid===l?.uid));if(n){const t=l?.originalText;const o=`Column '${n.title||n.field}'`;e=e.replace(t,o)}return e.includes(t.error)?`<p class="k-text-error">${o.htmlEncode(e)}</p>`:`<div class="k-card-text">${o.htmlEncode(e)}</div>`})(e,n,Yo(t.columns)))).join("")},views:[{type:"prompt",buttonIcon:"sparkles",themeColor:"primary",footerTemplate:()=>`<div class="k-actions k-actions-start k-actions-horizontal k-prompt-actions">${o.html.renderButton("<button ref-ai-apply-button>Apply</button>",{themeColor:"primary",icon:"table-wizard",fillMode:"solid",rounded:"full"})}</div>`},{type:"output",themeColor:"primary",isStreaming:!0,isLoading:!0}],promptRequest:e=>{d.options.service&&(d.activeView("output"),d.removePromptOutput(_o),d.addPromptOutput({id:s,prompt:e.prompt,output:"",isLoading:!0,isStreaming:!0}),d._requestInProgress=!0,d.transport.options.requestStart=null)},promptResponse:e=>{e.preventDefault();const o=e;Br(o,d,s),o&&o.response&&t.handleAIResponse(o.response),!1!==r.autoClose&&t._aiAssistantWindow?.close()},promptRequestCancel:()=>{d.removePromptOutput(s),d.outputObjects.size||d.addPromptOutput(vo(n)),d._requestInProgress=!1}},l)).data("kendoAIPrompt");d?.transport&&(d.transport.options.error=function(e){e.response.abort(),Br({output:e.output,outputId:e.id},d,s)}),t._aiAssistantWindow.element.append(t._aiAssistant.element),t._aiAssistantWindow.wrapper.addClass("k-grid-assistant-window")},handleAIResponse:function(e){const r=this;const l=r.dataSource.options.schema;const n=l?.model?.fields;const i="multiple"===r.options.sortable?.mode||"mixed"===r.options.sortable?.mode;const a=function(e,o){const r=[];let l;if(e){for(let n=0;n<e.length;n++){const i=e[n];if(!i||!i.type)continue;const a=bo[i.type];"filter"===a||"sort"===a&&!o?r.push(i):a?(l&&l.type!==i.type&&(r.push(l),l=null),l?i[a]!==t&&(Array.isArray(l[a])||(l[a]=[l[a]]),l[a].push(i[a]),l={...l,[a]:l[a]}):l=i):(l&&(r.push(l),l=null),r.push(i))}return l&&r.push(l),r}}(e?.commands,i);const s=Yo(r.columns);const d=function(e,t,o){const r=e.sortable||e?.columnMenu?.sortable;const l=e.filterable||e?.columnMenu?.filterable;const n=e.selectable||o;const i=e?.groupable?.enabled||e.groupable||t._groupPaging;return{GridSort:r,GridClearSort:r,GridFilter:l,GridClearFilter:l,GridGroup:i,GridClearGroup:i,GridSelect:n,GridClearSelect:n,GridColumnResize:e.resizable||e?.resizable?.columns,GridColumnReorder:e.reorderable||e?.reorderable?.columns,GridPage:e?.scrollable?.virtual&&"columns"===e?.scrollable?.virtual&&e.pageable||!e.scrollable?.endless&&e.pageable||e.pageable,GridPageSize:!0,GridColumnHide:!0,GridColumnShow:!0,GridColumnLock:!0,GridColumnUnlock:!0}}(r.options,r.dataSource,r._checkBoxSelection);if(a)for(let e=0;e<a.length;e++){const l=a[e];const c=l?.type;const u=bo[c]||ko[c];const p="page"===u||"pageSize"===u;let h=!l[u];let g;if(bo[c]){const e=r.dataSource[u]();h=h&&e,p?g=l[u]:(g=h?[]:l[u],g=Array.isArray(g)?g:[g]);if(!(h||!h&&!uo(g,u)))return;if(h&&!e)return;if(d[c]){if(h||"filter"!==u||(g=fo(g,n)),"sort"===u&&!i){r.dataSource[u](g);continue}if(e&&!h&&!p){const t=Array.isArray(e)?e:[e];if("filter"===u)g=t.map((e=>({...e,filters:[...e.filters,g[0]]})));else{const e=Vo(t,g,u);if(e.shouldContinue)continue;g=e.descriptors}}r.dataSource[u](g)}}if(ko[c]){if(g=h?[]:l[u],g=Array.isArray(g)?g:[g],"highlight"===u){r.clearHighlight(),h||(r._hasAIHighlight=g,r._applyAIHighlight(g));continue}if("select"===u&&d[c]&&!l.skipCommand){r.clearSelection(),h||(r._hasAISelection=g,r._applyAISelection(g));continue}if("_exportPdf"===u||"_exportExcel"===u){const t={commands:a.slice(e+1)};const o=l?.fileName;r._changeAIExportFileName(u,o,!0),r[u]((()=>{r._changeAIExportFileName(u,o,!1),r.handleAIResponse(t)}));break}if(d[c]){const e=l?.id;const n=o.parseFloat(l?.size);const i=l?.position??l?.index;const a="lockColumn"===u||"unlockColumn"===u;let d;const c=s.find(((t,o)=>{if(t.uid===e)return d=o,t}));const p=a?d:c;const h=s.length>r.columns.length;if(p){let e=i??p;let o=i!==t?p:n;let l;h&&"reorderColumn"===u&&(e=Jo(s,r.columns,d,i),l=d>i?"before":"after"),r[u](e,o,l)}}}}},_changeAIExportFileName:function(e,t,o){const r=this;if(!o)return"_exportPdf"===e&&(r.options.pdf.fileName=r?._aiPdfFilename,delete r._aiPdfFilename),void("_exportExcel"===e&&(r.options.excel.fileName=r?._aiExcelFilename,delete r._aiExcelFilename));let l="_exportPdf"===e?r.options?.pdf?.fileName:r.options?.excel?.fileName;if(t){r["_exportPdf"===e?"_aiPdfFilename":"_aiExcelFilename"]=l,"_exportPdf"===e&&(r.options.pdf.fileName=t),"_exportExcel"===e&&(r.options.excel.fileName=t)}},_bindAIPrompt:function(){const t=this.options.ai;const o=this._aiAssistant;const r=e=>e.find("[ref-ai-apply-button]");o.element.on("input"+q,"[ref-prompt-input]",(t=>{const l=r(o.element);const n=e(t.currentTarget).val();l.toggleClass("k-disabled",!n||""===n.trim())})),t?.aiAssistant?.promptSuggestions&&o.element.on("click"+q,".k-suggestion",(e=>{r(o.element).toggleClass("k-disabled",!1)})),o.element.on("click"+q,"[ref-ai-apply-button]",(()=>{const e=o.element.find("[ref-prompt-input]").getKendoTextArea().value();const t=o._selectedView;const r={prompt:e,isRetry:!1,history:[]};t?.service&&(r.service=t.service),o.trigger("promptRequest",r),o.transport&&o.transport.read({prompt:r.prompt,history:r.history,isRetry:!1,service:t.service})})),o?.speechToTextButton&&o.speechToTextButton.bind("result",(function(){r(o.element).toggleClass("k-disabled",!1)}))},_unbindAIPrompt:function(){const e=this._aiAssistant;e?.element?.off("input"+q),e?.element?.off("click"+q)},_prepareAIDataForSelectOrHighlight:function(e){const t=this.dataSource.options.schema;const o=t?.model?.id||"id";const r=t?.model?.fields;return e=fo(e,r),this.dataSource.parseHighlightDescriptors(e,o)},_applyAIHighlight:function(e){const t=this._prepareAIDataForSelectOrHighlight(e);this.highlight(t)},_applyAISelection:function(e){const t=this;const o=t._prepareAIDataForSelectOrHighlight(e);t._getElementsToSelect(o).forEach((e=>t.select(e)))},_initAiAssistantWindow:function(t){const o=this;const r=o.options.ai;const l=r&&!0===r||!1===r;const n=r?.aiAssistantWindow||{};const i=n?.content;const a={modal:!1,resizable:!1,title:"AI Assistant",visible:!1,actions:["Minimize","Maximize","Close"],position:{top:c(t)+t.offset().top,left:t.offset().left+t.outerWidth()/2},width:437,...n,open:function(e){if(n.open&&n.open(e),e._defaultPrevented)return;const t=o._aiAssistant;if(t&&t.element){const e=o.options.messages?.ai;t.outputObjects.size||t.addPromptOutput(vo(e)),t.activeView("prompt");const r=t.element.find("[ref-ai-apply-button]");const l=t.element.find("[ref-prompt-input]").val();o._aiAssistant&&o._bindAIPrompt(),r.toggleClass("k-disabled",!l||""===l.trim())}},close:function(t){if(n.close&&n.close(t),!t._defaultPrevented){if(t.userTriggered){t.sender.element.trigger("focus");var l=o.items().index(e(o.current()).parent());o._toggleToolbarEditingItemsVisibility(),o.options.navigatable&&o.current()&&(o._setCurrent(o.items().eq(l).children().filter(M).first()),Gr(o.table,!0))}o._aiAssistant&&(r?.keepOutputHistory||o._aiAssistant?.clearOutput(),o._unbindAIPrompt())}}};l||(o._aiAssistantWindow=e("<div></div>").kendoWindow(a).data("kendoWindow"),i||o._initAiPrompt()),t.bind("click"+q,(function(e){o._aiAssistantWindow&&(o._aiAssistantWindow.element.is(":visible")?o._aiAssistantWindow.close():o._aiAssistantWindow.open())}))},_toolbarOptionsForTool:function(e){const t=this.options;let o=[];return Array.isArray(t.toolbar)?o=t.toolbar:t.toolbar&&t.toolbar.items&&(o=t.toolbar.items),g({},mo[e],o.find((t=>t.name===e)))},_groupToolbarTool:function(t){const r=this;const l=r.options;const n=e=>{const t=r._isAdaptive()?"[ref-actionsheet-action-button]:not('.k-button-solid-primary')":"[ref='clear-group']";return r._toolPopup(e)?.find(t)};let i;let a;if(!(l.groupable&&!1!==l.groupable.enabled||r.dataSource._groupPaging))return;i=t.data("kendoColumnMenu"),i&&(i.wrapper.off("click"+q),i.element.off("click"+q),i.destroy());const s=r._toolbarOptionsForTool("group");s.reorderButtons=!0;const d=({isAdaptive:t,isFirstItem:r,isLastItem:l})=>`<span class="k-group-menu-item-actions">\n                ${s.reorderButtons?`<span class="k-group-menu-item-action k-group-menu-item-up-action ${r?"k-disabled":""}" ${r?"aria-disabled=true":"aria-disabled=false"}>\n                    ${o.ui.icon(e("<span></span>"),{icon:"chevron-up",size:t?"large":"medium"})}\n                </span>\n                <span class="k-group-menu-item-action k-group-menu-item-down-action ${l?"k-disabled":""}" ${l?"aria-disabled=true":"aria-disabled=false"}>\n                    ${o.ui.icon(e("<span></span>"),{icon:"chevron-down",size:t?"large":"medium"})}\n                </span>`:`<span class="k-group-menu-item-action k-group-menu-item-drag-action">\n                    ${o.ui.icon(e("<span></span>"),{icon:"handle-drag-dots",size:t?"large":"medium"})}\n                    </span>`}\n                </span>`;const c=(t,l,n)=>{const i=r._isAdaptive();const a=t.title||t.field||"";return`<div class="k-group-menu-item" data-field="${t.field}" data-index="${n&&n.index||t.index||"0"}" tabindex="0">\n                ${n&&n.renderIndicator?d({isAdaptive:i,isFirstItem:n.isFirstItem,isLastItem:n.isLastItem}):""}\n                        <span class="k-group-item-text">${a}</span>\n                        <span class="k-spacer"></span>\n                        <span class="k-group-menu-item-actions">\n                            <span class="k-group-menu-item-action ${l.actionClass}">\n                                ${o.ui.icon(e("<span></span>"),{...l,size:i?"large":"medium"})}\n                            </span>\n                        </span>\n                    </div>`};a={dataSource:r.dataSource,columns:!1,sortable:!1,filterable:!1,hideAutoSizeColumn:!1,owner:r,adaptiveMode:r.options.adaptiveMode,encodeTitles:r.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:no(r.options.messages).group,title:"Group by",ref:"group-view",closeButton:{icon:"check",themeColor:"primary"}},init:function(e){const o=t.wrapper.find(".k-group-menu");o.attr("ref","group-tool"),t._showAdaptiveView?(o.unwrap(),o.removeClass("k-group-menu-md").addClass("k-group-menu-lg")):t.wrapper.removeClass("k-column-menu"),o.find(".k-group-menu-item").on("click"+q,".k-group-menu-item-remove-action, .k-group-menu-item-add-action",(function(e){r._groupItemClickHandler(e,t,{itemTemplate:c,indicator:d})})),r._syncGroupingTool(e,t,r.dataSource.group(),{itemTemplate:c,indicator:d})},closeCallback:function(e){e.removeClass(ve);const o=r._toolPopup(t);o.length&&o.find(".k-focus").removeClass("k-focus"),t.element.focus()},contentTemplate:({columns:e})=>{const t=r._isAdaptive();let l="<div class=\"k-group-menu k-group-menu-md\"><div class='k-group-menu-item-wrap'>";return e.forEach((e=>{!Wr(r,e)||e.command||e._originalObject.selectable||(l+=c(e,{icon:"plus-circle",actionClass:"k-group-menu-item-add-action"}))})),l+="</div>",s&&!s.clearButton||t||(l+=`<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">\n                                     ${o.html.renderButton(`<button ref="clear-group">${no(r.options.messages).group[0].text}</button>`,{icon:"x"})}\n                                </div>`),l+="</div>",l}};let u=r.dataSource.group()||[];t=t.kendoColumnMenu(a).data("kendoColumnMenu");const p=function(e){const t=this;const o=e.sender.wrapper&&e.sender.wrapper.find(".k-grid-group-tool")?.data("kendoColumnMenu");const r=e.groups||t.dataSource.group()||[];const l=n(o);const i=u.length>r.length?u:r;t._syncGroupingTool(e,o,i,{itemTemplate:c,indicator:d}),t._toggleBadge(o.element,r.length>0),l?.toggleClass("k-disabled",!r.length),u=r};r.unbind("group",p),r.bind("group",p),t.element.on("click"+q,(function(o){t.popup&&t.popup._closing||e(o.currentTarget).addClass(ve)})),t.bind("open",(function(){const e=n(t);e.length&&(e.off("mousedown"+q),e.on("mousedown"+q,(function(){r.dataSource.group([]),r.groupable.trigger(X,{groups:[]}),r._toggleBadge(t.element,!1),e?.toggleClass("k-disabled",!0),t.popup.close()}))),e?.toggleClass("k-disabled",!r.dataSource.group().length)}))},_toggleReorderButtonsDisabledState:function(e,t,o){const r="k-disabled";if(!e.length)return;const l=e.find(".k-group-menu-item-actions .k-group-menu-item-up-action");if(l.length){t&&!l.hasClass(r)?(l.addClass(r),l.attr("aria-disabled",!0)):!t&&l.hasClass(r)&&(l.removeClass(r),l.attr("aria-disabled",!1));const e=l.next();e.length&&(o&&!e.hasClass(r)?(e.addClass(r),e.attr("aria-disabled",!0)):!o&&e.hasClass(r)&&(e.removeClass(r),e.attr("aria-disabled",!1)))}},_syncGroupingTool:function(t,o,r,l){const n=this;const i=t.groups||n.dataSource.group()||[];const a=()=>o._showAdaptiveView?n._toolPopup(o):o.wrapper;const s="k-group-menu-item-wrap";const d=()=>a()?.find(`.${s}`);const c=".k-group-menu-item";const u=a();let p=d();if(o._draggableInstance&&o._triggeredReordering)delete o._triggeredReordering;else if(p&&p.length&&(r.forEach(((t,r)=>{const a=u.find(c+`[data-field='${t.field}']`);const h=a.data("index");const g=a.find(".k-icon")?.attr("class").includes("plus-circle")?"remove":"add";const f="remove"===g;const m=`k-group-menu-item-${g}-action`;const b=a.parent();p=d();let k=!(!i||!i.length)&&i[0]?.field===t.field;let _=!(!i||!i.length)&&i[i.length-1].field===t.field;n._toggleReorderButtonsDisabledState(a,k,_);const v=!i.find((e=>e.field===t.field));if(!v&&b.is("[ref='group-container']"))return;let C;if(p&&2===p.length)C=f?p.first():p.last();else{C=e(`<div class="${s}" ${f?'ref="group-container':""}"></div>`);const t=f?"prepend":"append";const o=p.first().parent();const r=o.find("[ref='clear-group']");r.length&&!f?r.parent().before(C):o.length&&o[t](C)}const w=br(n.columns)[h];const y=!v&&i.length>1;const S={renderIndicator:y,index:h,isFirstItem:k,isLastItem:_};const x=e(l.itemTemplate(w,{icon:f?"x-circle":"plus-circle",actionClass:m},S));a.remove();if(2===p.length&&!b.children().length&&(b.data("kendoReorderable")&&b.data("kendoReorderable")?.destroy(),b.remove()),f){if(y){const e=C.children().first();1===e.find(".k-group-menu-item-actions")?.length&&e.prepend(l.indicator({isAdaptive:n._isAdaptive(),isFirstItem:!0,isLastItem:!1}))}C.append(x)}else{const e=C.find(c+`[data-index="${h+1}"]`);if(1===i.length){b.children().first().find(".k-group-menu-item-actions:first-of-type").remove()}e.length?e.before(x):C.append(x)}C.find(x).on("click"+q,".k-group-menu-item-remove-action, .k-group-menu-item-add-action",(function(e){n._groupItemClickHandler(e,o)}))})),p=d(),p&&p.length)){const t=p.first().find(".k-group-menu-item-drag-action");const r=p.first().find(".k-group-menu-item-up-action, .k-group-menu-item-down-action");const l=p.first();const i=l.is("[ref='group-container']")&&l?.length;const a=t.length;const s=r.length;i&&s?r.each((function(){const t=e(this);t.unbind("click"+q),t.bind("click"+q,(e=>n._buttonClickReorderHandler(e,o)))})):i&&a&&(n._groupToolDraggableInstance(o,l),n._groupToolReorderableInstance(o,l))}},_buttonClickReorderHandler:function(t,o){t.preventDefault(),t.stopPropagation();const r=".k-group-menu-item";const l=e(t.currentTarget);const n=l.closest(r);const i=l.hasClass("k-group-menu-item-up-action")?"before":"after";const a="before"===i?n.prev(r):n.next(r);const s={element:n,target:a,position:i};this._handleGroupReordering(s,o)},_groupToolDraggableInstance:function(t,r){const l=this._isMobile;t._draggableInstance=r.kendoDraggable({holdToDrag:l,showHintOnHold:l,preventOsHoldFeatures:l,group:"group-item-draggable",autoScroll:!0,filter:".k-group-menu-item-drag-action",hint:function(t){return e('<div class="k-reorder-clue k-drag-clue">'+o.ui.icon({icon:"cancel",iconClass:"k-drag-status"})+"</div>")},clickMoveClick:!1,cursorOffset:{top:0,left:0}}).data("kendoDraggable")},_groupToolReorderableInstance:function(t,o){const r=this;const l=".k-group-menu-item";o&&o.data("kendoReorderable")&&o.data("kendoReorderable").destroy(),o.kendoReorderable({smartPosition:!1,draggable:t._draggableInstance,dragOverContainers:function(t,o){e(l).eq(o);return!0},dropFilter:"> "+l,allowIcon:"insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e){e.css({transform:"translate(0,-50%)"})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){r._handleGroupReordering(e,t)}})},_handleGroupReordering:function(t,o){const r=t.element;const l=t.target;const n="before"===t.position?"insertBefore":"insertAfter";const i=this.groupable.descriptors();r[n](l);const a=r.parent().children();const s=[];for(let t=0;t<a.length;t++){const o=e(a[t]).data("field");const r=i.find((e=>e.field===o));r&&s.push(r)}o._triggeredReordering=!0,this.dataSource.group(s),this.groupable.trigger(X,{groups:s})},_groupItemClickHandler:function(t,o){const r=this;const l=e(t.currentTarget).closest(".k-group-menu-item");const n="remove"===(e(t.currentTarget).find(".k-icon")?.attr("class").includes("plus-circle")?"remove":"add");const i=l.data("index");let a=r.groupable.descriptors();a.length||(a=r.dataSource.group());const s=br(r.columns)[i];n?a.push({field:s.field,dir:"asc",aggregates:r.groupable.aggregates()||[],colID:s.uid,compare:s.sortable&&s.sortable.compare||r.groupable.sort&&r.groupable.sort.compare}):a=a.filter((e=>e.field!==s.field)),r.dataSource.group(a),r.groupable.trigger(X,{groups:a})},_sortToolbarTool:function(r){const l=this;const n=l.options;const i="k-columnmenu-indicators";const a=l._isAdaptive();const s=e=>{const t=l._isAdaptive()?"[ref-actionsheet-action-button]:not('.k-button-solid-primary')":"[ref='clear-sort']";return l._toolPopup(e)?.find(t)};let d;let c;const u=l._toolbarOptionsForTool("sort");d=r.data("kendoColumnMenu"),d&&(d.wrapper.off("click"+q),d.element.off("click"+q),d.destroy());const p=!1!==n.columnMenu.sortable&&!1!==n.sortable&&g({},n.sortable,{allowUnsort:!1});if(!p)return;c={dataSource:l.dataSource,columns:!1,sortable:p,filterable:!1,hideAutoSizeColumn:!0,owner:l,adaptiveMode:l.options.adaptiveMode,encodeTitles:l.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:no(l.options.messages).sort,title:"Sort by",ref:"sort-view",closeButton:{icon:"check",themeColor:"primary"}},init:function(e){r.wrapper.attr("ref","sort-tool")},closeCallback:function(e){e.removeClass(ve);const t=l._toolPopup(r);t.length&&t.find(".k-focus").removeClass("k-focus"),r.element.focus()},sort:function(e){const t=e.preventClose;r._preventClose="multiple"===l.options.sortable.mode||t,l.trigger("sort",{sort:e.sort})?e.preventDefault():(l._clearEditableState(),l.dataSource.options.endless&&l._resetEndless())},contentTemplate:function({columns:e,isAdaptive:t}){let r='<div class="k-columnmenu-item-wrapper">';return e.forEach((e=>{!1===e.sortable||e.command||e._originalObject.draggable||e._originalObject.selectable||(r+=`<div class="k-columnmenu-item" tabindex="0" data-field="${e.field}">${e.title||e.field||""}</div>`)})),r+="</div>",u&&!u.clearButton||t||(r+='<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">',r+=o.html.renderButton(`<button ref="clear-sort">${no(l.options.messages).sort[0].text}</button>`,{icon:"x"}),r+="</div>"),r}},r=r.kendoColumnMenu(c).data("kendoColumnMenu");const h=function(e){const o=e.sender.wrapper&&e.sender.wrapper.find(".k-grid-sort-tool")?.data("kendoColumnMenu");const r=e.sender.dataSource._sortFields;const n=Array.isArray(e.sort);const a=e.sort.field;const d=e.sender.options.sortable&&("multiple"===e.sender.options.sortable.mode||"mixed"===e.sender.options.sortable.mode);let c;let u=e.sort.dir===t;c=n?e.sort.length:r&&Object.keys(r).length?!u||u&&Object.keys(r).length-1>0:!u,l._toggleBadge(o.element,c);const p=o.wrapper.find(`.k-columnmenu-item[data-field='${a}']`);let h=p.find("."+i);u?h.remove():(d||(h=o.wrapper.find("."+i)),h.length&&h.remove(),p.append(l._renderIndicator(`sort-${e.sort.dir}-small`))),s(o)?.toggleClass("k-disabled",!c)};l.unbind("sort",h),l.bind("sort",h),r.bind("open",(function(){const t=l._toolPopup(r);if(t.length){t.focus();const o=s(r);const n=t.find(".k-columnmenu-item");o.length&&(o.off("mousedown"+q),o.on("mousedown"+q,(function(){l.dataSource.sort([]),l._toggleBadge(r.element,!1),s(r)?.toggleClass("k-disabled",!0),r.wrapper.find(".k-columnmenu-indicators").remove(),r.close()}))),n.length&&(t.off("click"+q),t.on("click"+q,".k-columnmenu-item",(function(t){const o=e(t.currentTarget);const n=o.data("field");const a=l._toggleColumnMenuSortIndicator(o);const s=l.options.sortable&&"mixed"===l.options.sortable.mode;const d=t.originalEvent.ctrlKey;r.field=n,r._sortHandler({item:o,allowUnsort:a,allowSelectedState:!1,isMixed:s,hasCtrlKey:d}),l._toggleSortIndexes(l.dataSource._sortFields&&Object.keys(l.dataSource._sortFields).length>1,r,i)})))}})),r.element.on("click"+q,(function(t){if(r.popup&&r.popup._closing)return;e(t.currentTarget).addClass(ve);const o=r.dataSource._sortFields;const n=o&&Object.keys(o).length;const d=Object.keys(o).length>1;n&&Object.keys(o).forEach((e=>{const t=r.wrapper.find(`.k-columnmenu-item[data-field='${e}']`);const n=t.find("."+i);n.length&&n.remove(),t.append(l._renderIndicator(`sort-${o[e].dir}-small`))})),l._toggleSortIndexes(d,r,i,a),s(r)?.toggleClass("k-disabled",!n)}))},_toggleSortIndexes:function(t,o,r){if(!(this.options.sortable&&this.options.sortable.showIndexes))return;const l=o.wrapper.find(`.${r}`);let n=o.dataSource&&o.dataSource._sortFields;l.length&&(t?l.each(((t,o)=>{const r=e(o).closest(".k-columnmenu-item").data("field");const l=n[r];const i=e(o).parent().find(".k-sort-index");i.length?i.text(l.index):l.index?e(o).append(`<span class='k-sort-index'>${l.index}</span>`):e(o).append(`<span class='k-sort-index'>${t+1}</span>`)})):o.wrapper.find(".k-sort-index").remove())},_columnChooserTool:function(t){const o=this;const r="column-chooser";const l=t.data("kendoColumnMenu");l&&(l.wrapper.off("click"+q),l.element.off("click"+q),l.destroy());const n={dataSource:o.dataSource,columns:!0,sortable:!1,filterable:!1,hideAutoSizeColumn:!0,owner:o,adaptiveMode:o.options.adaptiveMode,encodeTitles:o.options.encodeTitles,messages:{reset:o.options.messages.clearButtons?o.options.messages.clearButtons.columnChooserReset:"Reset",apply:o.options.messages.applyButtons?o.options.messages.applyButtons.columnChooserApply:"Apply"},componentType:"modern",contentTemplate:function(e){return(0,e._defaultContents()[r])(e)},_actionsheet:{actionButtons:no(o.options.messages)[r],title:"Column visibility",subtitle:"Selected fields are visible",closeButton:!0,ref:`${r}-view`},init:function(e){t.wrapper.attr("ref",r+"-tool"),t._showAdaptiveView?t.popup._content.find(`[ref='${r}']`).unwrap():t.wrapper.removeClass("k-column-menu")},closeCallback:function(e){e.removeClass(ve);const r=o._toolPopup(t);r.length&&r.find(".k-focus").removeClass("k-focus"),t&&t._showAdaptiveView&&t._applyColumnVisibility(),t.element.focus()}};(t=t.kendoColumnMenu(n).data("kendoColumnMenu")).element.bind("click",(function(o){t.popup&&t.popup._closing||e(o.currentTarget).addClass(ve)})),t.bind("open",(function(){const e=o._toolPopup(t);e.length&&e.find(".k-checkbox")?.first()?.focus()}))},_toggleBadge:function(t,o){const r=t.closest(".k-badge-container");const l=r.length&&r.find(".k-badge");const n=t.data("overflow");if(!l.length&&o){t.wrap(`<div class='k-badge-container' ${n?"data-overflow="+n:""}></div>`).parent().append(e("<span></span>").kendoBadge({round:"full",position:"edge",align:"top end",themeColor:"primary",cutoutBorder:!0}))}else!o&&l.length&&(l.remove(),t.unwrap(".k-badge-container"))},_toggleColumnMenuFilterIndicator:function(e,t){const o=this;const r=e.find(".k-columnmenu-indicators");const l=e.find(".k-spacer");if(t&&l.length){if(r&&r.length)return;l.before(o._renderIndicator("filter"))}else r&&r.length&&r.remove()},_toggleColumnMenuSortIndicator:function(e){const t=this;const o=e.find(".k-columnmenu-indicators");let r;let l=e.find(".k-sort-index").length?"before":"append";if(o&&o.length){const e=o.find(".k-icon");e.length&&e.hasClass("k-svg-i-sort-desc-small")?(o.remove(),r=!0):(e.remove(),o[l](t._renderIndicator("sort-desc-small")),r=!1)}else e[l](t._renderIndicator("sort-asc-small")),r=!1;return r},_renderIndicator:function(t){return e("<span class='k-columnmenu-indicators'></span>").append(o.ui.icon(e("<span></span>"),{icon:t}))},_globalColumnsMenu:function(e){var t,o,r=this,l=br(r.columns),n=r.options.columnMenu;if(n){"boolean"==typeof n&&(n={}),r._setColumnsMediaVisibility(l);let i=!(!n.autoSize&&!n.clearAllFilters);(t=e.data("kendoColumnMenu"))&&t.destroy();let a={toggleable:i,expanded:n.expanded||!0,animation:!1,hideExpanderIndicator:!i};o={dataSource:r.dataSource,columns:n.columns,sortable:!1,filterable:!1,clearAllFilters:n.clearAllFilters,messages:n.messages,hideAutoSizeColumn:!0,owner:r,closeCallback:function(){e.trigger("focus")},init:function(e){r._isAdaptive()&&e.sender.popup.wrapper.find(".k-expanded [ref=columns-visibility]").data("handler").toggle(!1),r.trigger(U,{field:e.field,container:e.container})},open:function(e){r.trigger(Q,{field:e.field,container:e.container})},pane:"auto"!==r.options.adaptiveMode&&r.pane,autoSize:n.autoSize,encodeTitles:r.options.encodeTitles,componentType:"modern",adaptiveMode:"auto",columnsExpanderOptions:a},e.kendoColumnMenu(o)}},_columnMenu:function(){var e,r,l,n,i,a,s=this,d=br(s.columns),c=s.options,u=c.columnMenu,p=m(s.columns,(function(e){return e.columns!==t})).length>0,h=m(s.columns,(function(e){return!1!==e.lockable})).length>0,f=m(s.columns,(function(e){return!0===e.stickable})).length>0,b=this._isMobile,k=function(e){s.trigger(U,{field:e.field,container:e.container})},_=function(e){s.trigger(Q,{field:e.field,container:e.container})},v=function(){Gr(s.table,!0)},C=function(e){s.trigger($e,{column:e.column})},w=function(e){s.trigger(Ne,{column:e.column})},y=function(e){s.trigger("sort",{sort:e.sort})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())},S=function(e){s.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())};if(u&&!s._isStackedMode()){"boolean"==typeof u&&(u={}),s._setColumnsMediaVisibility(d);for(var T=0,H=(a=wr(s.thead)).length;T<H;T++){r=d[T];var R=a.eq(T);if(!1!==r.columnMenu&&!r.command&&(r.field||R.attr("data-"+o.ns+"field"))){(e=R.data("kendoColumnMenu"))&&e.destroy(),n=!1!==r.sortable&&!1!==u.sortable&&!1!==c.sortable&&g({},c.sortable,{compare:(r.sortable||{}).compare}),i=!(!c.filterable||!1===r.filterable||!1===u.filterable)&&g(!0,{pane:s.pane},c.filterable,r.filterable),r.filterable&&r.filterable.dataSource&&(i.forceUnique=!1,i.checkSource=r.filterable.dataSource),i&&(i.format=r.format);const t="auto"!==s.options.adaptiveMode&&u.adaptiveMode||s.options.adaptiveMode;l={dataSource:s.dataSource,values:r.values,columns:u.columns,sortable:n,filterable:i,messages:u.messages,owner:s,adaptiveMode:t,adaptiveTitle:r.title||r.field,closeCallback:v,init:k,open:_,stick:C,unstick:w,pane:"auto"!==s.options.adaptiveMode&&s.pane,sort:y,filtering:S,filter:b?":not(.k-column-active)":"",autoSize:u.autoSize,hasLockableColumns:sr(d).length>0&&h&&!p,hasStickableColumns:f&&!p,encodeTitles:s.options.encodeTitles,componentType:u.componentType,appendTo:x+Zt,reorderable:!0===c.reorderable||c.reorderable&&c.reorderable.columns,groupable:s.options.groupable&&!1!==s.options.groupable.enabled&&!1!==r.groupable},R.kendoColumnMenu(l)}}}},_headerCells:function(){return e(this.thead).find("th").filter((function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")}))},_hasFilterMenu:function(){var e=this.options.filterable;return(!e||typeof e.mode!=it||-1!=e.mode.indexOf("menu"))&&e},_filterable:function(){var e,t,r,l=this,n=br(l.columns),i=function(e){l.trigger(j,{field:e.field,container:e.container})},a=function(){Gr(l.table,!0)},s=function(e){l.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(l._clearEditableState(),l.dataSource.options.endless&&l._resetEndless())},d=function(e){l.trigger(K,{field:e.field,container:e.container})},c=l._hasFilterMenu();if(c&&!l.options.columnMenu&&!l._isStackedMode())for(var u=0,p=(t=wr(l.thead)).length;u<p;u++)if(r=t.eq(u),!1!==n[u].filterable&&!n[u].command&&(n[u].field||r.attr("data-"+o.ns+"field"))){(e=r.data("kendoFilterMenu"))&&e.destroy(),(e=r.data("kendoFilterMultiCheck"))&&e.destroy();var h=n[u].filterable;var f=g({},c,h,{dataSource:l.dataSource,values:n[u].values,format:n[u].format,closeCallback:a,title:n[u].title||n[u].field,init:i,open:d,pane:l.pane,change:s,appendTo:x+Zt,adaptiveMode:l.options.adaptiveMode});h&&h.messages&&(f.messages=g(!0,{},c.messages,h.messages)),h&&h.dataSource&&(f.forceUnique=!1,f.checkSource=h.dataSource),h&&h.multi?r.kendoFilterMultiCheck(f):r.kendoFilterMenu(f)}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var r;var n=br(t.columns),i=t.options.filterable,a=t.thead.find(".k-filter-row"),s=function(e){t.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&t._resetEndless())};this._updateHeader(t._groups());for(var d=0;d<n.length;d++){var c,u=n[d],p=t.options.filterable.operators,h=!1,f=e("<td class='k-table-td' title='"+t.options.messages.filterCellTitle+"'/>"),m=u.field;if(u.hidden&&f.hide(),a.append(f),m&&!1!==u.filterable){var b=u.filterable&&u.filterable.cell||{};(c=t.options.dataSource)instanceof l&&(c=t.options.dataSource.options);var k=g(!0,{},i.messages);if(u.filterable&&g(!0,k,u.filterable.messages),!1===b.enabled){f.html("&nbsp;");continue}b.dataSource&&(c=b.dataSource,h=!0),u.filterable&&u.filterable.operators&&(p=u.filterable.operators),r={column:u,dataSource:t.dataSource,suggestDataSource:c,customDataSource:h,field:m,messages:k,size:t.options.size,values:u.values,template:b.template,delay:b.delay,inputWidth:b.inputWidth,suggestionOperator:b.suggestionOperator,minLength:b.minLength,dataTextField:b.dataTextField,operator:b.operator,operators:p,showOperators:b.showOperators,change:s,adaptiveMode:t.options.adaptiveMode},e("<span/>").attr(o.attr("field"),m).appendTo(f).kendoFilterCell(r)}else f.html("&nbsp;");f.data("column",u)}this._filterFocusable().attr(lt,-1)}},_sortable:function(){var e,t,r,l=this,n=br(l.columns),i=l.options.sortable,a=function(e){l.trigger("sort",{sort:e.sort})?e.preventDefault():l._clearEditableState()};if(i&&!l._isStackedMode()){var s=wr(l.thead);for(var d=0,c=s.length;d<c;d++)!1!==(e=n[d]).sortable&&!e.command&&e.field&&((t=(r=s.eq(d)).data("kendoColumnSorter"))&&t.destroy(),r.attr("data-"+o.ns+"field",e.field).kendoColumnSorter(g({},i,e.sortable,{dataSource:l.dataSource,aria:!0,filter:":not(.k-column-active)",change:a})));s=null}},_columns:function(t){var r,l,n,i=this,a=i.table,s=a.find("col"),d=i.element.find("thead tr"),c=i.options.dataSource;if(t=t.length?t:f(a.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),(function(t,r){var l=(t=e(t)).attr(o.attr("sortable")),n=t.attr(o.attr("filterable")),i=t.attr(o.attr("type")),a=t.attr(o.attr("groupable")),d=t.attr(o.attr("field")),c=t.attr(o.attr("title")),u=t.attr(o.attr("column-menu")),p=t.attr(o.attr("menu"));return d||(d=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:d,type:i,title:c,sortable:"false"!==l,filterable:"false"!==n,groupable:"false"!==a,menu:"false"!==p,columnMenu:"false"!==u,template:t.attr(o.attr("template")),width:s.eq(r).css(ot)}})),r=!(i.table.find("tbody tr").length>0&&(!c||!c.transport)),i.options.scrollable&&!i._isStackedMode()){var u=t;if(l=sr(t),t=dr(t),l.length>0&&0===t.length)throw new Error("There should be at least one non locked column");!function(e,t){var o=0;var r,l;var n=e.find("th:not(.k-group-cell)");for(r=0,l=t.length;r<l;r++)t[r].locked&&(n.eq(r).insertBefore(n.eq(o)),n=e.find("th:not(.k-group-cell)"),o++)}(i.element.find("tr:has(th)").first(),u),t=l.concat(t)}if(d.length&&t.length&&i._updateColumnIDs(t,d.first()),i.columns=xo(t,r),e.grep(br(i.columns),(function(e){return e.selectable})).length&&(i._selectedIds={},i._checkBoxSelection=!0,i.wrapper.on(Ke+q,"tbody > tr "+we,i._checkboxClick.bind(i)),i.wrapper.on(Ke+q,"thead > tr "+we,i._headerCheckboxClick.bind(i))),(n=e.grep(br(i.columns),(function(e){return e.draggable}))).length){i._hasDragHandleColumn=!0;for(var p=0;p<n.length;p++)n[p].headerAttributes=e.extend({"aria-label":i.options.messages.dragHandleLabel},n[p].headerAttributes)}i._foreignKeyBindings(Xo(i.columns))},_foreignKeyBindings:function(e){var t=e.length;var o;for(var r=0;r<t;r++)(o=e[r]).dataSource&&this._fetchForeignKeyValues(o)},_fetchForeignKeyValues:function(t){var o=this;var r=e.Deferred();o._hasBoundForeignKey=!0,t.dataSource=l.create(t.dataSource),o._foreignKeyPromises||(o._foreignKeyPromises=[]),o._foreignKeyPromises.push(r),t.dataSource.fetch().then((function(){var e=t.dataSource.data();t.values=e.map((function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}})),r.resolve()}))},_updateColumnIDs:function(e,t){if(e.length){var o=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)");var r;for(var l=0;l<e.length;l++)(r=o.eq(l).attr(kt))&&(e[l].headerAttributes=g(e[l].headerAttributes,{id:r}));this._updateColumnIDs(fr(e),t.next())}},_headerCheckboxClick:function(t){var o=this,r=e(t.target),l=r.prop("checked");o._belongsToGrid(r)&&(o.trigger(J,{target:r,originalEvent:t})?t.preventDefault():(l?o.select(o.items()):o.clearSelection(),o._calculateAggregatesForSelected(),o.trigger(X,{cellAggregates:o._cellAggregates})))},_checkboxClick:function(t){var o=this,r=e(t.target).closest(vt),l=!r.hasClass(ve);o._belongsToGrid(r)&&(o.trigger(J,{target:r,originalEvent:t})?t.preventDefault():(l?o.select(r):o._deselectCheckRows(r),o._calculateAggregatesForSelected(),o.trigger(X,{cellAggregates:o._cellAggregates})))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_getStackedLayoutSettings:function(){const e=this.options.stackedLayoutSettings;const t=e&&e.cols;let o=[];let r="";if(t)if(Array.isArray(t))for(let e=0;e<t.length;e++)if("object"==typeof t[e]){const r=t[e].width;if(!r&&0!==r)continue;"number"==typeof r&&o.push(`${r}px`),"string"==typeof r&&o.push(r)}else"number"==typeof t[e]?o.push(`${t[e]}px`):"string"==typeof t[e]&&o.push(t[e]);else"number"==typeof t&&(r=`k-grid-cols-${t}`);return{colClass:r,colsConfig:o.join(" ")}},_tmpl:function(t,r,l,n){var i,a,s=this,d=g({},o.Template,s.options.templateSettings),c=r.length,u={storage:{},count:0},p=s._hasDetails(),h=s._groups();var f=o.attr("field");var m;var b;var k;let _;return t||(_=t=>{var d=c?` ${o.attr("uid")}="${o.getter("uid")(t)}"`:"";var _=`<tr class="${l?"k-table-row k-table-alt-row ":"k-table-row "}k-master-row"${d}>`;for(h>0&&!n&&(_+=ho(h)),p&&(_+='<td class="k-hierarchy-cell k-table-td" aria-expanded="false">'+o.ui.icon(e(`<a href="#" ${wt}="${bt}" tabindex="-1"></a>`),{icon:"caret-alt-"+(Ut?"left":"right")})+"</td>"),i=0;i<c;i++){let e;a=r[i],a.template,m=a.field,k={},s._editMode()&&m&&(a.attributes=a.attributes||{},s.virtualScroll&&(a.attributes[f]=m),e=s._dirtyCellTemplate(m)(t)),a.colSpan&&a.colSpan>0&&Hr(a.attributes)?a.attributes=Rr(a.attributes):!a.colSpan&&a.hidden&&(a.attributes=Tr(a.attributes)),a.command&&(a.attributes=a.attributes||{},void 0!==(b=a.attributes.class)?b.indexOf("k-command-cell")<0&&(a.attributes.class+=" k-command-cell "):a.attributes.class=" k-command-cell "),a.draggable&&(a.attributes=a.attributes||{},void 0!==a.attributes.class?a.attributes.class.indexOf("k-drag-cell")<0&&(a.attributes.class+=" k-drag-cell "):a.attributes.class=" k-drag-cell ",a.attributes["ref-grid-drag-cell"]||(a.attributes["ref-grid-drag-cell"]=!0),void 0===a.attributes[wt]&&(a.attributes[wt]=s.options.messages.dragHandleLabel),void 0!==a.attributes.style?a.attributes.style.indexOf("cursor: move;")<0&&(a.attributes.style+=" cursor: move;"):a.attributes.style="cursor: move;"),a._attributesFunction&&(k=a._attributesFunction(t));let l=g({},a.attributes,k);e&&(l.class=l.class||"",l.class+=e);let n=go(l);let d="";a.colSpan&&(a.colSpan>1&&(d+=" "+o.attr("virtual")),d+=` colSpan="${a.colSpan}"`),_+=Uo(`<td${n}${d}>`),_+=a.selectable?o.template(Wt)({size:o.getValidCssClass("k-checkbox-","size",s.options.size)}):s._cellTmpl(a,u)(t),_+="</td>"}return _+="</tr>"},s._isStackedMode()&&(_=e=>{r=br(Lo(r));var t=(c=r.length)?` ${o.attr("uid")}="${o.getter("uid")(e)}"`:"";var d=`<tr class="${l?"k-table-row k-table-alt-row ":"k-table-row "}k-master-row"${t}>`;for(h>0&&!n&&(d+=ho(h)),d+='<td class="k-table-td">\n                            <div class="k-grid-stack-row">\n                        ',i=0;i<c;i++){a=r[i],a.template,m=a.field,k={};let t;if(h>0&&s.dataSource.group().find((e=>e.field===m))&&a.hideOnGroup)continue;s._editMode()&&m&&(a.attributes=a.attributes||{},s.virtualScroll&&(a.attributes[f]=m),t=s._dirtyCellTemplate(m)(e)),a.colSpan&&a.colSpan>0&&Hr(a.attributes)?a.attributes=Rr(a.attributes):!a.colSpan&&a.hidden&&(a.attributes=Tr(a.attributes)),a.attributes.class="k-grid-stack-cell",a.title&&(a.attributes[o.attr("title")]=a.title),a.aggregates&&(a.attributes[o.attr("aggregates")]=a.aggregates);let l=!a.selectable;let n=!a.selectable;a.command&&(a.attributes=a.attributes||{},void 0!==(b=a.attributes.class)?b.indexOf("k-command-cell")<0&&(a.attributes.class+=" k-command-cell"):a.attributes.class="k-command-cell",n=a.title&&"&nbsp;"!==a.title,l=!0),a.draggable&&(n=!1,l=!0,a.attributes=a.attributes||{},void 0!==a.attributes.class?a.attributes.class.indexOf("k-drag-cell")<0&&(a.attributes.class+=" k-drag-cell"):a.attributes.class="k-drag-cell",a.attributes["ref-grid-drag-cell"]||(a.attributes["ref-grid-drag-cell"]=!0),void 0===a.attributes[wt]&&(a.attributes[wt]=s.options.messages.dragHandleLabel),void 0!==a.attributes.style?a.attributes.style.indexOf("cursor: move;")<0&&(a.attributes.style+=" cursor: move;"):a.attributes.style="cursor: move;"),a._attributesFunction&&(k=a._attributesFunction(e));let c=g({},a.attributes,k);t&&(c.class=c.class||"",c.class+=t);let p=go(c);let _="";a.colSpan&&(a.colSpan>1&&(_+=" "+o.attr("virtual")),_+=` colSpan="${a.colSpan}"`);const v=a.parentIds?vr(s,a):a.title||a.field||"";d+=Uo(`<div${p}${_} ${a.field?`data-field=${a.field}`:""} data-index=${i}>`,!0),n&&(d+=`<div class="k-grid-stack-header">${v}</div>`),l&&(d+='<div class="k-grid-stack-content">'),d+=a.selectable?o.template(Wt)({size:o.getValidCssClass("k-checkbox-","size",s.options.size)}):s._cellTmpl(a,u)(e),l&&(d+="</div>"),d+="</div>"}return p&&(d+=`<div class="k-grid-stack-cell">\n                                <div class="k-grid-stack-content">\n                                    ${o.html.renderButton(`<button tabindex='-1' ref="expand-detail-button">${s.options.messages.details.expand}</button>`,{icon:"plus",fillMode:"flat",themeColor:"primary"})}\n                                </div>\n                            </div>`),d+="</div></td></tr>"})),t=o.template(t||_,d),u.count>0?t.bind(u.storage):t},_dirtyCellTemplate:function(e){return t=>{if(e&&t&&t.dirty&&t.dirtyFields){return("["===e.charAt(0)?o.getter(e)(t.dirtyFields):t.dirtyFields[e])?" k-dirty-cell":""}return""}},_headerCellText:function(e){var t=g({},o.Template,this.options.templateSettings),r=e.headerTemplate,l=typeof r,n=e.title&&(this.options.encodeTitles?el(e.title):e.title)||el(e.field||"");return l===nt?n=o.template(r,t)({}):l===it&&(n=r),n},_cellTmpl:function(e,t){var r,l,n=this,i=g({},o.Template,n.options.templateSettings),a=e.template,s=e.field,d=e.format,c=typeof a,u=e.values;return e.command?b(e.command)?t=>{let o="";for(r=0,l=e.command.length;r<l;r++)e.command[r].visible?o+=e.command[r].visible(t)?n._createButton(e.command[r]):"":o+=n._createButton(e.command[r]);return o}:()=>n._createButton(e.command):e.selectable?Wt:e.draggable?Nt:r=>{let l=n._dirtyIndicatorTemplate(s)(r);if(c===nt)t.storage["tmpl"+t.count]=a,l+=a(r),t.count++;else if(c===it)l+=o.template(a,i)(r);else if(u&&u.length&&h(u[0])&&"value"in u[0]&&s){var p=Ar(u)[i.useWithBlock?o.getter(s)(r):s];l+=C(null!=p?p:"")}else{let t="";s&&(t=null==(s=o.getter(s)(r))?"":s),d&&(t=o.format(d.replace(Pt,"$1"),t)),l+=e.encoded?C(t):t}return l}},_dirtyIndicatorTemplate:function(e){return t=>{if(e&&t&&t.dirty&&t.dirtyFields){return("["===e.charAt(0)?o.getter(e)(t.dirtyFields):t.dirtyFields[e])?'<span class="k-dirty"></span>':""}return""}},_virtualCols:function(t){var r=this;var l=e.map(t,(function(e){return e.hidden?0:parseInt(e.width,10)}));var n=r.virtualScrollable?o.scrollLeft(r.content.find(">.k-virtual-scrollable-wrap")):o.scrollLeft(r.content);var i=d(r.content);var a=er(t);var s=[];var c=0;var u=0;var p=0;var h=0;var g=0;var f;for(h=0;h<t.length;h++){if(f=h<l.length-1?l[h+1]:0,!(g+l[h]+2*f<n)){c=1+p;break}l[h]&&p++,g+=l[h]}p=0,g=0;for(var m=t.length-1;m>=0;m--){if(!(g+3*l[m]<a-i-n)){u=1+p;for(var b=h;b<=m;b++)t[b].locked||(s.push(t[b]),t[b].colSpan&&delete t[b].colSpan);s[0].colSpan=c,s[s.length-1].colSpan=u;break}l[m]&&p++,g+=l[m]}return s[0].hidden&&s[0].colSpan--,r.virtualCols=s,s},_templates:function(){var t=this,o=t.options,r=t.dataSource,l=r.group(),n=t.footer||t.wrapper.find(".k-grid-footer"),i=r.aggregate(),a=t._isStackedMode(),s=br(t.columns),d=br(sr(t.columns)),c=o.scrollable?br(dr(t.columns)):s,u=(t.virtualScroll||{}).columns?t._virtualCols(c):c,p=m(Lo(d),(function(e,t){return e.groupHeaderColumnTemplate&&0!==t})),h=m(Lo(u),(function(e){return e.groupHeaderColumnTemplate}));if(o.scrollable&&d.length&&!a){if(o.rowTemplate||o.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(o.rowTemplate,u,!1,!0),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,u,!0,!0),t.lockedRowTemplate=t._tmpl(o.rowTemplate,d),t.lockedAltRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,d,!0)}else t.rowTemplate=t._tmpl(o.rowTemplate,a?t.columns:u),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,a?t.columns:u,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(o.detailTemplate||(()=>""))),(t._group&&!w(i)||!w(i)&&!n.length||m(s,(function(e){return e.footerTemplate})).length)&&(t.footerTemplate=t._footerTmpl(s,i,"footerTemplate","k-footer-template k-table-row")),l&&m(s,(function(e){return e.groupFooterTemplate})).length&&(i=e.map(l,(function(e){return e.aggregates})),t.groupFooterTemplate=t._footerTmpl(u,i,"groupFooterTemplate","k-group-footer k-table-row",d.length),o.scrollable&&d.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(d,i,"groupFooterTemplate","k-group-footer k-table-row"))),l&&(p.length||h.length)?(i=e.map(l,(function(e){return e.aggregates})),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(Lo(u),i,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",d.length,h),o.scrollable&&d.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(Lo(d),i,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",0,p))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t='<div class="{0}">{1}</div>';var r=this.options.scrollable&&!this.wrapper[0].style.height?` ${o.attr("style-margin")}="0 auto" ${o.attr("style-position")}="static"`:"";var l={storage:{},count:0};var n=e.extend({},o.Template,this.options.templateSettings);n.paramName;var i;var a;var s;let d;if("function"===(a=typeof(i=this.options.noRecords.template?this.options.noRecords.template:o.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,r)))){let e=l.storage["tmpl"+l.count]=i;l.count++,d=r=>o.format(t,ye,e(r))}else"string"===a&&(d=this.options.noRecords.template?o.format(t,ye,i):()=>o.format(t,ye,i));return s=o.template(d,n),l.count>0&&(s=s.bind(l.storage)),s},_footerTmpl:function(e,t,r,l,n){var i,a,s,d,c,u=this,p=g({},o.Template,u.options.templateSettings),h=p.paramName,f={},m=0,b={},k=u._groups(),_=u.dataSource._emptyAggregates(t);const v=u._isStackedMode();let C=o.template((t=>{let C='<tr class="'+l+'">';k>0&&!n&&(C+=ho(k)),u._hasDetails()&&!v&&(C+='<td class="k-hierarchy-cell k-table-td">&nbsp;</td>');const w=e;if(v){for(C+=Uo("<td>"),C+=`<div class="${Le}">`,i=0,a=w.length;i<a;i++)c=w[i],s=c[r],d=typeof s,s&&(d!==nt&&(b=_[c.field]?g({},p,{paramName:h+"['"+c.field+"']"}):{},s=o.template(s,b)),f["tmpl"+m]=s,C+=s(t),m++);C+="</div></td>"}else for(i=0,a=w.length;i<a;i++)c=w[i],s=c[r],d=typeof s,C+=Uo("<td"+go(c.footerAttributes)+">"),s?(d!==nt&&(b=_[c.field]?g({},p,{paramName:h+"['"+c.field+"']"}):{},s=o.template(s,b)),f["tmpl"+m]=s,C+=s(t),m++):C+="&nbsp;",C+="</td>";return C+="</tr>",C}),p);return m>0?C.bind(f):C},_groupHeaderTmpl:function(e,t,r,l,n,i){var a,s,d,c,u,p,f=this,m=g({},o.Template,f.options.templateSettings),b=m.paramName,_="",v={},C=0,w={},y=f.dataSource._emptyAggregates(t),S=i.length?k(i[0],e):-1;if(S<0)return;const x=f._isStackedMode();return _=o.template((t=>{let k="";var _='<tr data-group-uid="'+t.uid+'" class="'+l+'">';if(!n)for(var T=0;T<t.groupCells;T++)_+='<td class="k-table-td k-group-cell">&nbsp;</td>';const H=e;if(x){for(k+=`<div class="${Le}">`,a=S,s=H.length;a<s;a++)u=H[a],d=u[r],c=typeof d,d&&(c!==nt&&(w=y[u.field]?g({},m,{paramName:b+"['"+u.field+"']"}):{},d=o.template(d,w)),v["tmpl"+C]=d,k+=v["tmpl"+C](t),C++);k+="</div>"}if(f._hasDetails()&&!x&&(_+='<td class="k-table-td k-hierarchy-cell">&nbsp;</td>'),S<1&&i.length<=1&&!n)return _+=n?"":Jr(H.length,x,k)(t);if(S<1?(S=n?0:1,_+=n?"":Jr(S,x,k)(t)):_+=n?function(e){return'<td class="k-table-td" colspan="'+e+'">'+`<p class="k-reset">&nbsp;</p></td>${new Array(e).join("<td hidden group-header-spanned-hidden></td>")}`}(S):Jr(S,x,k)(t),!x)for(a=S,s=H.length;a<s;a++){if(u=H[a],d=u[r],c=typeof d,u.sticky){let e="";if((p=u.groupHeaderColumnTemplateClass||"")||(p=u.groupHeaderColumnTemplateClass="group-header-column-template-"+o.guid()),h(u.stickyStyle)){e=`${u.stickyStyle.left?`${o.attr("style-left")}="${u.stickyStyle.left}"`:""} ${u.stickyStyle.right?`${o.attr("style-right")}="${u.stickyStyle.right}"`:""}`}_+=`<td class="k-table-td ${Me} ${p}" ${e}>`}else _+="<td class='k-table-td'>";d?(c!==nt&&(w=y[u.field]?g({},m,{paramName:b+"['"+u.field+"']"}):{},d=o.template(d,w)),v["tmpl"+C]=d,_+=v["tmpl"+C](t),C++):_+="&nbsp;",_+="</td>"}return _+="</tr>"}),m),C>0?_.bind(v):_},_detailTmpl:function(e){var t=this,r=g({},o.Template,t.options.templateSettings),l=(r.paramName,{}),n=0,i=t._groups(),a=t._isStackedMode(),s=a?t.table.find("col").length:Lo(br(t.columns)).length,d=typeof e;let c=o.template((t=>{let c='<tr role="row" class="k-detail-row k-table-row">';return i>0&&(c+=ho(i)),a||(c+='<td role="gridcell" class="k-hierarchy-cell k-table-td"></td>'),c+=`<td role="gridcell" class="k-detail-cell k-table-td" ${s?` colspan="${s}"`:""}>`,d===nt?(l["tmpl"+n]=e,c+=e(t),n++):c+=o.template(e,r)(t),c+="</td></tr>",c}),r);return n>0?c.bind(l):c},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events[N]||[]).length},_hasFilterRow:function(){var t=this.options.filterable;var o=t&&typeof t.mode==it&&-1!=t.mode.indexOf(zt);var r=this.columns;var l=e.grep(r,(function(e){return!1===e.filterable}));return(this._isStackedMode()||r.length&&l.length==r.length)&&(o=!1),o},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&sr(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");const o=t._isStackedMode();const r=o?'[ref="expand-detail-button"], [ref="collapse-detail-button"]':".k-hierarchy-cell "+P+", .k-hierarchy-cell "+L;t.table.on(Ke+q,r,(function(r){var l=e(this);return o?t._toggleStackedDetails(l):t._toggleDetails(l),r.preventDefault(),!1}))},_setCurrentStackedCell:function(t){const o=this;const r=t?e(t).closest(vt).index():o._currentRowIndex;const l=o._currentStackedCell();if(l&&o.options.navigatable&&r>=0){let e;let t=l&&l.index;e=o.table.find(`${vt}:eq(${r}) .k-grid-stack-cell`).eq(t),e.length&&("-1"!==e.attr("tabindex")&&e.attr("tabindex")||Io(e.parent().children()),o._currentStackedCell(e,!0))}},_toggleStackedDetails:function(e,t){const r=this;const l=e.closest(".k-grid-stack-cell");const n=l.find(".k-grid-stack-content");const i=e.is('[ref="expand-detail-button"]');const a=e.closest("tr.k-master-row");const s=i?mt:bt;let d;e.remove(),d=i?o.html.renderButton(`<button tabindex='-1' ref="collapse-detail-button" aria-label=${s}>${o.htmlEncode(r.options.messages.details.collapse)}</button>`,{icon:"minus",fillMode:"flat",themeColor:"primary"}):o.html.renderButton(`<button tabindex='-1' ref="expand-detail-button" aria-label=${s}>${o.htmlEncode(r.options.messages.details.expand)}</button>`,{icon:"plus",fillMode:"flat",themeColor:"primary"}),n.append(d),r._addDetailRow(a,i,t),r._setCurrentStackedCell(l)},_addDetailRow:function(t,o,r){const l=this;const n=l.detailTemplate;const i=t.attr(Ht);const a=l._hasDetails();let s=t.next();let d;var c;s.hasClass("k-hidden")&&s.removeClass("k-hidden"),a&&!s.hasClass("k-detail-row")&&(d=l.dataItem(t),s=e(n(d)).addClass(t.hasClass("k-table-alt-row")?"k-table-alt-row":"").insertAfter(t),(i||0===i)&&s.attr(Ht,Number(i)+1),l.trigger(N,{masterRow:t,detailRow:s,data:d,detailCell:s.find(".k-detail-cell")})),l.trigger(o?re:le,{masterRow:t,detailRow:s}),r?(c=o,e(s)[0].style.display=c?"":Mt):s.toggle(o)},_toggleDetails:function(e,t){var r=e.closest("td.k-hierarchy-cell"),l=e.is(P),n=e.closest("tr.k-master-row"),i=l?mt:bt,a=l?"true":"false";l?o.ui.icon(e,{icon:"caret-alt-down"}):o.ui.icon(e,{icon:"caret-alt-"+(Ut?"left":"right")}),e.attr(wt,i),r.attr(Rt,a),this._addDetailRow(n,l,t)},dataItem:function(t){if(!(t=e(t)[0]))return null;var o,r,l=this.tbody.children(),n=/k-grouping-row|k-detail-row|k-group-footer/,i=t.sectionRowIndex;for(r=i,o=0;o<i;o++)n.test(l[o].className)&&r--;return this._data[r]},expandRow:function(t,o){var r=e(t).find("> td "+P);r.length&&this._toggleDetails(r,o)},collapseRow:function(t,o){var r=e(t).find("> td "+L);r.length&&this._toggleDetails(r,o)},_createHeaderCells:function(r,l){var n,i,a,s,d,c,u=this,p="",h=u.options.columnMenu,g=(u.options.sortable,u._hasFilterMenu()),f=u.options.messages,m=br(u.columns),b=u.dataSource.group();for(n=0,s=r.length;n<s;n++){i=r[n].column||r[n],a=u._headerCellText(i),d=i.title,c="";let s=k(i,m);let _="";i.selectable?(_+="<th scope='col'"+go(i.headerAttributes),l&&!r[n].colSpan&&(_+=" rowspan='"+l+"'"),s>-1&&(_+=o.attr("index")+"='"+s+"'"),_+=">"+(a=i.headerTemplate?a:o.template($t)({size:o.getValidCssClass("k-checkbox-","size",u.options.size)}))+"</th>"):i.draggable?(_+="<th class='k-header' ref-grid-drag-cell scope='col'"+go(i.headerAttributes),l&&!r[n].colSpan&&(_+=" rowspan='"+l+"'"),s>-1&&(_+=o.attr("index")+"='"+s+"'"),_+=">"+(a=i.headerTemplate?a:"")+"</th>"):i.command?(_+="<th scope='col'"+go(i.headerAttributes),l&&!r[n].colSpan&&(_+=" rowspan='"+l+"'"),s>-1&&(_+=o.attr("index")+"='"+s+"'"),_+=">"+(a&&"&nbsp;"!==a?o.template(jt)({text:a}):a)+"</th>"):(i.field&&(c=o.attr("field")+"='"+i.field+"' "),_+="<th scope='col' "+c,h&&i.field&&!1!==i.menu?_+=" aria-haspopup='menu'":g&&!1!==i.filterable&&!i.command&&(_+=" aria-haspopup='dialog'"),l&&!r[n].colSpan&&(_+=" rowspan='"+l+"'"),r[n].colSpan>1?(_+='colspan="'+(r[n].colSpan-Zo(i.columns))+'" ',_+=o.attr("colspan")+"='"+r[n].colSpan+"'"):1===r[n].colSpan&&(_+=o.attr("colspan")+"='"+r[n].colSpan+"'"),d&&(d=d&&(u.options.encodeTitles?el(d,!0):d),_+=o.attr("title")+'="'+d+'" '),i.groupable!==t&&(_+=o.attr("groupable")+"='"+i.groupable+"' "),!Wr(u,i)||i.headerAttributes&&i.headerAttributes.title||(_+="title='",_+=$r(b,i.field)?f.ungroupHeader:f.groupHeader,_+="' "),i.aggregates&&i.aggregates.length&&(_+=o.attr("aggregates")+"='"+i.aggregates+"'"),s>-1&&(_+=o.attr("index")+"='"+s+"'"),_+=go(i.headerAttributes),_+=">"+(a=o.template(jt)({text:a}))+"</th>"),u.options.resizable?p+=e(_).attr("data-resizable",(!1!==i.resizable).toString()).addClass("k-table-th")[0].outerHTML:p+=e(_).addClass("k-table-th")[0].outerHTML}return p},_appendLockedColumnContent:function(){var t,r,l,n,i,a=this.columns,s=this.table.find("colgroup"),d=s.find(F),c=e(),u=0,p=0;for(t=0,r=a.length;t<r;t++)if(a[t].locked)if(Do(a[t])){for(n=1,a[t].columns&&(n=br(a[t].columns).length-Zo(a[t].columns)),n=n||1,i=0;i<n;i++)c=c.add(d.eq(t+p+i-u));p+=n-1}else u++;l=e('<div class="k-grid-content-locked"><table class="k-grid-table k-table"><colgroup></colgroup><tbody class="k-table-tbody"></tbody></table></div>'),s.detach(),l.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=l.insertBefore(this.content),this.lockedTable=l.children("table"),this.lockedTable.addClass(o.getValidCssClass("k-table-","size",this.options.size))},_appendLockedColumnFooter:function(){var t=this;var r=t.footer;var l=r.find(".k-footer-template>td");var n=r.find(".k-grid-footer-wrap>table>colgroup>col");var i=e('<div class="k-grid-footer-locked"><table class="k-grid-footer-table k-table"><colgroup></colgroup><tfoot class="k-table-tfoot"><tr class="k-footer-template k-table-row"></tr></tfoot></table></div>');var a,s;var d=t._groups();var c=e(),u=e();for(i.find("table").addClass(o.getValidCssClass("k-table-","size",this.options.size)),c=c.add(l.filter(".k-group-cell")),a=0,s=br(sr(t.columns)).length;a<s;a++)c=c.add(l.eq(a+d));for(u=u.add(n.filter(".k-group-col")),a=0,s=Lo(br(pr(t.columns))).length;a<s;a++)u=u.add(n.eq(a+d));c.appendTo(i.find(vt)),u.appendTo(i.find("colgroup")),t.lockedFooter=i.prependTo(r)},_appendLockedColumnHeader:function(t){var r,l,n,i,a,s,d,c,u,p=this,h=this.columns,g=[],f=0,m=e(),b=p._hasFilterRow(),k=0,_=e(),v=0,C=e();i=p.thead.prev().find(F),d=p.thead.find(vt).first().find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),c=p.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");var w=0;for(r=0,n=h.length;r<n;r++){if(h[r].locked){if(u=d.eq(r),v=br(h[r].columns||[]).length,Do(h[r])){var y=null;h[r].columns&&(y=v-Zo(h[r].columns)),y=y||1;for(var S=0;S<y;S++)m=m.add(i.eq(r+w+S-f));w+=y-1}rr([h[r]],Sr(u),g,0,0),v=v||1;for(var x=0;x<v;x++)_=_.add(c.eq(k+x));k+=v}h[r].columns&&(f+=Zo(h[r].columns)),Do(h[r])||f++}if(g.length){for(l='<div class="k-grid-header-locked"><table class="k-grid-header-table k-table"><colgroup></colgroup><thead class="k-table-thead">',l+=new Array(g.length+1).join("<tr class='k-table-row'></tr>"),(s=e(l+=(b?'<tr class="k-filter-row k-table-row"></tr>':"")+"</thead></table></div>")).find(".k-grid-header-locked").css("width","1px"),s.find("table").addClass(o.getValidCssClass("k-table-","size",p.options.size)),(i=s.find("colgroup")).append(p.thead.prev().find("col.k-group-col").add(m)),a=s.find("thead tr:not(.k-filter-row)"),r=0,n=g.length;r<n;r++)C=Oo(g[r]),a.eq(r).append(p.thead.find(vt).eq(r).find(".k-group-cell").add(C));var T=or(this.thead);return g.length<T&&function(e,t){var o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");var r;for(var l=0;l<o.length;l++)(r=o[l].rowSpan)>1&&(o[l].rowSpan=r-t||1)}(s,T-g.length),s.find(".k-filter-row").append(p.thead.find(".k-filter-row .k-group-cell").add(_)),this.lockedHeader=s.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);o.destroy(e),e.off(q).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,r,l=this,n=l.columns,i=l._hasDetails()&&n.length,a=l._hasFilterRow(),s="",d=l.table.find(">thead"),c=l.element.find("thead").first().length>0,u=l.options.messages.expandCollapseColumnHeader;const p=l._isStackedMode();if(!p){if(d.length||(d=e("<thead/>").insertBefore(l.tbody)),d.addClass("k-table-thead"),l.lockedHeader&&l.thead?((r=l.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),r=e(),l._removeLockedContainers()):r=c?l.element.find("thead").first().find("tr:has(th):not(.k-filter-row)"):l.element.find("tr:has(th)").first(),r.length){for(t=0;t<n.length;t++){let e=k(n[t],br(n));let o=wr(r.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(e);o.addClass("k-table-th");const l=o[0];const i=l?.childNodes||[];1===i.length&&3===i[0].nodeType&&o.html(jt({text:el(o.text())})),n[t].hidden&&e>=0&&(l.style.display=Mt)}l._updateHeadersAttr(fr(n))}else if(!(r=d.children().first()).length){var h=[{rowSpan:1,cells:[],index:0}];for(l._prepareColumns(h,n),t=0;t<h.length;t++)s+="<tr class='k-table-row'>",i&&(s+='<th class="k-hierarchy-cell k-table-th" scope="col">'+u+"</th>"),s+=l._createHeaderCells(h[t].cells,h[t].rowSpan),s+="</tr>";r=e(s),o.applyStylesFromKendoAttributes(r,["display","left","right"])}if(a){var g=e("<tr/>");g.addClass("k-filter-row k-table-row"),(i||r.find(".k-hierarchy-cell").length)&&g.prepend('<td class="k-table-td k-hierarchy-cell">&nbsp;</td>');var f=(l.thead||d).find(".k-filter-row");f.length&&(o.destroy(f),f.remove()),d.append(g)}r.children().length?i&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell k-table-th" scope="col">'+(u||"&nbsp;")+"</th>"):(s="",i&&(s+='<th class="k-hierarchy-cell k-table-th" scope="col">&nbsp;</th>'),s+=l._createHeaderCells(n),r.html(s));const p=r.find("th");p.addClass(Ie),p.length>0&&d.attr(Et,Ft),l.options.scrollable||d.addClass("k-grid-header"),r.find("script").remove().end().prependTo(d),l.thead&&l._destroyColumnAttachments(),l.thead=d}var m;l._sortable(),l._filterable(),l._filterRow(),l._scrollable(),l._columnMenu();var b=this.options.scrollable&&sr(this.columns).length;b&&!p&&(m=l._appendLockedColumnHeader(l.thead.closest(".k-grid-header")),l._appendLockedColumnContent(),l.lockedContent.on("DOMMouseScroll"+q+" mousewheel"+q,l._wheelScroll.bind(l)),o.support.touch&&(l._lockedContentUserEvents=new o.UserEvents(l.lockedContent,{move:function(e){l.content.scrollTop(l.content.scrollTop()+-e.y.delta),e.preventDefault()}})),l._updateLockedCols()),l._updateCols(),p||(l._updateColumnCellIndex(),l._updateFirstColumnClass()),l._resizable(),l._draggable(),l._reorderable(),p||(l._updateHeader(l._groups()),l._updateStickyColumns()),b&&!p&&(m&&l._syncLockedHeaderHeight(),l._applyLockedContainersWidth())},_retrieveFirstColumn:function(t,o){var r=e();if(o.length&&t[0]){var l=t[0];for(;l.columns&&l.columns.length;)l=l.columns[0],o=o.filter(":not(:first)");r=r.add(o)}return r},_updateFirstColumnClass:function(){var t=this,o=t.columns||[];if(!(t._hasDetails()&&o.length)&&!t._groups()){var r=t.thead.find(">tr:not(.k-filter-row):not(:first)");o=dr(o);var l=t._retrieveFirstColumn(o,r);t._isLocked()&&(r=t.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),o=sr(t.columns),l=l.add(t._retrieveFirstColumn(o,r))),l.each((function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))}},_prepareColumns:function(e,t,o,r){var l=r||e[e.length-1];var n=e[l.index+1];var i=0;for(var a=0;a<t.length;a++){var s={column:t[a],colSpan:0};l.cells.push(s),t[a].columns&&t[a].columns.length&&(n||(n={rowSpan:0,cells:[],index:e.length},e.push(n)),s.colSpan=t[a].columns.length,this._prepareColumns(e,t[a].columns,s,n),i+=s.colSpan-1,l.rowSpan=e.length-l.index)}o&&(o.colSpan+=i)},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.content;this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar);var r=t.scrollTop(),l=o.wheelDeltaY(e);l&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&l<0||t[0].scrollTop>0&&l>0)&&e.preventDefault(),t.scrollTop(r+-l))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?Ir(e,hr(ur(this.columns)),this._hasDetails(),0):Ir(e,hr(Lo(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e=this;var t=wr(e.thead);var o=br(e.columns);var r;var l;if(e.options.sortable)for(var n=0,i=t.length;n<i;n++)!1!==(r=o[n]).sortable&&!r.command&&r.field&&(l=t.eq(n).data("kendoColumnSorter"))&&l.refresh()},_updateHeadersAttr:function(e){if(e.length){for(var t=0;t<e.length;t++){if(e[t].headerAttributes)this.element.find("[id='"+e[t].headerAttributes.id+"']").attr("headers",e[t].headerAttributes.headers)}this._updateHeadersAttr(fr(e))}},_updateCols:function(e){const t=this;const o=t._isStackedMode()?t.table:t.thead.parent().add(t.table);e=e||o,this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&Ir(e=e||this.lockedHeader.find("table").add(this.lockedTable),hr(pr(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?Ir(e,hr(ur(this.columns)),this._hasDetails(),0):Ir(e,hr(Lo(this.columns)),this._hasDetails(),this._groups(),this._isStackedMode())},_autoColumns:function(e){if(e&&e.toJSON){var t,r,l=this;for(t in e=e.toJSON(),r=!(l.table.find("tbody tr").length>0&&(!l.dataSource||!l.dataSource.transport)),e)l.columns.push({field:t,encoded:r,headerAttributes:{id:o.guid()}});l._thead(),l._templates()}},_setRowCachedHeight:function(t,o){var r,l=this._cachedRowsHeight[o];return l&&((r=e(t))[0].style.height=l+"px",t=r.prop("outerHTML")),t},_rowsHtml:function(e,t){var o,r,l,n=this,i="",a=t.rowTemplate,s=t.altRowTemplate,d=n._cachedRowsHeight;for(o=0,r=e.length;o<r;o++)n._skipRerenderItemsCount>0?n._skipRerenderItemsCount--:(l=o%2?s(e[o]):a(e[o]),d&&(l=n._setRowCachedHeight(l,e[o].uid)),i+=l),n._data.push(e[o]);return i},_groupData:function(e,t,o){var r=this._groupAggregatesDefaultObject||{},l=e.items,n=g({},r,e.aggregates),i=g({},{field:e.field,value:e.value,items:l,aggregates:n},e.aggregates[o?o.field:e.field]),a={};if(!t)for(var s in n)a[s]=g({},n[s],{group:{field:e.field,value:e.value,items:l}});return g({},a,i)},_removeGroupIfEmpty:function(e){var t,o,r=this.dataSource._group.length;for(var l=0;l<r;l++)t=+(e=e.prev()).attr("data-group-item-count"),o=+e.attr("data-sub-group-count"),1!=t&&1!=o||e.hide()},_groupRowHtml:function(e,t,r,l,n,i,a,s){var d,c,u,p=this,h="",f=null!=p.lockedContent,b=e.field,_=m(br(p.columns),(function(e){return e.field==b}))[0]||{},v=Lo(p.columns)[0],C=v?v.groupHeaderColumnTemplate:null,w=_.groupHeaderTemplate?_.groupHeaderTemplate:C,y=(_.title&&(p.options.encodeTitles?el(_.title,!0):_.title)||el(b,!0))+": "+Er(e.value,_.format,_.values,_.encoded),S=e.currentItems||e.items,x=p._groups(),T=n.groupFooterTemplate,H=n.groupHeaderColumnTemplate,R=p.dataSource._isGroupPaged(),I=!R||p.dataSource._groupsState[e.uid];if(p.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(I=!0),(n.groupFooterTemplate||n.groupHeaderColumnTemplate||_.groupHeaderTemplate||p._isStackedMode())&&(u=p._groupData(e,!1,!(_.groupHeaderTemplate||!Lo(p.columns)[0].groupHeaderColumnTemplate)&&Lo(p.columns)[0])),w&&!i&&(y=typeof w===nt?w(u):o.template(w)(u)),p._skipRerenderItemsCount?l(t,r,y,I,e.uid,R,p._isStackedMode()):e.excludeHeader?e.excludeHeader=!!f&&!s:h+=function({groupHeaderColumnTemplate:e,groupHeaderBuilder:t,colspan:o,templateColspan:r,groupData:l,level:n,text:i,expanded:a,group:s,isGroupPaged:d,stacked:c}){var u;u=e?e(g({},l,{groupCells:n,colspan:r,text:i,expanded:a,isRtl:Ut,uid:s.uid})):t(o,n,i,a,s.uid,d,Ut,c);return u}({groupHeaderColumnTemplate:H,groupHeaderBuilder:l,colspan:t,templateColspan:x-r,groupData:u,level:r,text:y,expanded:I,group:e,isGroupPaged:R,stacked:p._isStackedMode()}),I)if(e.hasSubgroups)for(d=0,c=S.length;d<c;d++)h+=p._groupRowHtml(S[d],i?t:t-1,r+1,l,n,i,a&&d===S.length-1,s);else h+=p._rowsHtml(S,n);return T&&(a?k(e.value,p._skippedGroups)||p._skippedGroups.push(e.value):(p._skippedGroups.length&&p._skippedGroups[0]===e.value&&p._skippedGroups.shift(),p._skipRerenderItemsCount||(h+=T(u)))),h},collapseGroup:function(t){var r,l,n,i,a,s=this,d=t,c=this.options.groupable.showFooter?0:1,u=e();if(r=(t=e(t)).find(".k-group-cell").length,this.dataSource._isGroupPaged()){var p=t.attr("data-group-uid");var h=s.dataSource._getGroupByUid(p);var g=s.dataSource._calculateGroupsTotal([h],!0);var f;return s.dataSource._groupsState[p]=!1,f=s.dataSource._calculateGroupsTotal([h],!0),s.dataSource._serverGroupsTotal-=g-f,s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"collapseGroup")}this._isLocked()&&(t.closest(Ct).hasClass("k-grid-content-locked")?u=this.tbody.children(vt).eq(t.index()).nextAll(vt):(u=t.nextAll(vt),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(L).length&&o.ui.icon(t.find(L),{icon:"caret-alt-"+(Ut?"left":"right")}),t.find("td[aria-expanded='true']").first().attr(Rt,!1).find("a").attr(wt,bt);var m=[];for(n=0,i=(t=t.nextAll(vt)).length;n<i&&(l=(a=t.eq(n)).find(".k-group-cell").length,a.hasClass(Pe)?c++:a.hasClass("k-group-footer")&&c--,!(l<=r||a.hasClass("k-group-footer")&&c<0));n++)u.length&&m.push(u[n]),m.push(a[0]);e(m).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(s._collapseGroupsTimeOut),s._collapseGroupsTimeOut=setTimeout((function(){s.content.scroll(),s._groupToCollapse=d})))},expandGroup:function(t){t=e(t);var r,l,n,i,a,s=this,d=s.options.groupable.showFooter,c=e(),u=[],p=1;if(r=t.find(".k-group-cell").length,this.dataSource._isGroupPaged()){var h=t.attr("data-group-uid");var g=s.dataSource._getGroupByUid(h);var f=s.dataSource._calculateGroupsTotal([g],!0);var m;return s.dataSource._groupsState[h]=!0,g.items&&g.items.length&&(m=s.dataSource._calculateGroupsTotal([g],!0),s.dataSource._serverGroupsTotal+=m-f),s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"expandGroup")}for(this._isLocked()&&(t.closest(Ct).hasClass("k-grid-content-locked")?c=this.tbody.children(vt).eq(t.index()).nextAll(vt):(c=t.nextAll(vt),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(P).length&&o.ui.icon(t.find(P),{icon:"caret-alt-down"}),t.find("td[aria-expanded='false']").first().attr(Rt,!0).find("a").attr(wt,mt),i=0,a=(t=t.nextAll(vt)).length;i<a&&!((n=(l=t.eq(i)).find(".k-group-cell").length)<=r);i++)if(n!=r+1||l.hasClass("k-detail-row")||(l.show(),c.eq(i).show(),l.hasClass(Pe)&&l.find(".k-icon,.k-svg-icon").is(L)&&s.expandGroup(l),l.hasClass("k-master-row")&&l.find(".k-icon,.k-svg-icon").is(L)&&(l.next().show(),c.eq(i+1).show())),l.hasClass(Pe)&&(d&&u.push(l.is(":visible")),p++),l.hasClass("k-group-footer")){if(d){var b=u.pop();l.toggle(b),c.eq(i).toggle(b)}1==p?(l.show(),c.eq(i).show()):p--}(0===r&&s.options.scrollable.endless&&this._isLocked()||!s.options.scrollable.endless&&this._isLocked())&&s._syncLockedContentHeight()},_updateHeader:function(t){var o=this,r=o._isLocked()?o.lockedHeader.find("thead"):o.thead,l=r.find("tr.k-filter-row").find("td.k-group-cell").length,n=r.find(vt).first().find("th.k-group-cell").length,i=r.children("tr:not(:first)").filter((function(){return!e(this).children(":visible").length}));t>n?(e(new Array(t-n+1).join('<th class="k-group-cell k-header k-table-th" scope="col">'+C(o.options.messages.expandCollapseColumnHeader)+"</th>")).prependTo(r.children("tr:not(.k-filter-row)")),o.element.is(":visible")&&i.find("th.k-group-cell").hide()):t<n&&r.find(vt).each((function(){e(this).find(".k-group-cell").eq(t).remove(),e(this).find(".k-group-cell").slice(t).remove()})),t>l&&e(new Array(t-l+1).join('<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>')).prependTo(r.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,o=this;o._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",o.wrapper).add(o.thead.parent()).add(o.table),o._footerWidth=Pr(t.eq(0)),t.width(o._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",o.wrapper).add(o.lockedHeader.find(">table")).add(o.lockedTable)).width(Pr(t.eq(0))))},hideColumn:function(t){var o,r,l,n,i,a,s,c,u,p=this,g=0,f=p.footer||p.wrapper.find(".k-grid-footer"),b=p.virtualScroll||{},_=p.columns,v=p.lockedHeader?wr(p.lockedHeader.find(">table>thead")).filter(Fo).length:0;(Array.isArray(t)?t:[t]).forEach((t=>{if(u=m(br(p.columns),(function(e){return e.groupHeaderColumnTemplate})),(t="number"==typeof t?_[t]:h(t)?m(Xo(_),(function(e){return e===t}))[0]:m(Xo(_),(function(e){return e.field===t}))[0])&&Do(t)){if(p._isStackedMode())return p._stackedColumnVisibility(t,"hide"),void p.trigger(Z,{column:t});var C=p._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(i=Qo(t,_),C(t,!1),Mr(yo(e(">table>thead",p.lockedHeader),p.thead,">tr:eq("+i.row+")>th"),i.cell,!1),r=0;r<t.columns.length;r++)this.hideColumn(t.columns[r]);return p._ariaAddHiddenColIndex(),void p.trigger(Z,{column:t})}c=k(t,Lo(br(_))),C(t,!1),p._setParentsVisibility(t,!1),p._templates(),p._updateCols(),p._updateLockedCols();var w=p.thead;if(a=c,p.lockedHeader&&v>c?w=p.lockedHeader.find(">table>thead"):a-=v,wr(w).filter(Fo).eq(a)[0].style.display=Mt,Mr(yo(e(">table>thead",p.lockedHeader),p.thead,">tr.k-filter-row>td"),c,!1),f[0]&&(p._updateCols(f.find(">.k-grid-footer-wrap>table")),p._updateLockedCols(f.find(">.k-grid-footer-locked>table")),Mr(f.find(".k-footer-template>td"),c,!1)),b.columns&&!t.locked)return p._updateContentWidth(),void p.trigger(Z,{column:t});if(p.lockedTable&&v>c?zr(p.lockedTable.find(">tbody>tr"),c):zr(p.tbody.children(),c-v),p.lockedTable)p._updateTablesWidth(),p._applyLockedContainersWidth(),p._syncLockedContentHeight(),p._syncLockedHeaderHeight(),p._syncLockedFooterHeight();else{for(l=p.thead?p.thead.prev().find("col"):[],r=0,s=l.length;r<s;r+=1)if(n=l[r].style.width,l[r].className.indexOf("k-hierarchy-col")>-1)g+=d(l[r]);else if(l[r].className.indexOf("k-group-col")>-1)g+=d(l[r]);else{if(!n||-1!=n.indexOf("%")){g=0;break}g+=parseInt(n,10)}o=p.wrapper.find(">.k-grid-header table").first().add(p.wrapper.find(">.k-grid-footer table").first()).add(p.table),p._footerWidth=null,g&&(o.each((function(){this.style.width=g+_t})),p._footerWidth=g,p._setContentWidth())}p._updateFirstColumnClass(),p._updateStickyColumns(),p._ariaAddHiddenColIndex(),u.length>0&&p._renderGroupRows(),p.trigger(Z,{column:t})}}))},_stackedColumnVisibility:function(t,o){const r=this;const l=t.field;let n;if(r.columns.length){for(let e=0;e<r.columns.length;e++)if(r.columns[e].field===l){n=e;break}if(n||0===n){r.table.find(".k-grid-stack-cell[data-index='"+n+"']").each((function(){const t=e(this);t.closest(".k-detail-row").length||t[o]()})),Ro(t,"show"===o)}}},_setParentsVisibility:function(t,r){var l=this.columns;var n;var i=[];var a;var s;var d;var c;var u=this._columnVisibilitySetter(t);var p=r?function(e){return Lo(e.columns).length&&e.hidden}:function(e){return!Lo(e.columns).length&&!e.hidden};if(Ho(t,l,i)&&i.length)for(n=i.length-1;n>=0;n--)s=jo(a=i[n],l),d=yo(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+s.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(s.cell),p(a)&&(u(a,r),d[0].style.display=r?"":Mt),d.filter("["+o.attr("colspan")+"]").length&&(c=parseInt(d.attr(o.attr("colspan")),10),d[0].colSpan=c-Zo(a.columns)||1)},_updateContentWidth:function(){const t=this;t.table.add(t.thead?t.thead.parent():e()).css({width:er(hr(ur(t.columns)))}),t.refresh()},showColumn:function(t){var o,r,l,n,i,a,s,c,u,p,g,f,b,_=this,v=_.columns,C=_.virtualScroll||{},w=_.footer||_.wrapper.find(".k-grid-footer"),y=_.lockedHeader?wr(_.lockedHeader.find(">table>thead")).length:0;(Array.isArray(t)?t:[t]).forEach((t=>{if(b=m(br(_.columns),(function(e){return e.groupHeaderColumnTemplate})),"number"==typeof t?(p=t,t=v[t]):h(t)?e.each(Xo(v),(function(e,o){if(o===t)return t=o,p=e,!1})):e.each(Xo(v),(function(e,o){if(o.field===t)return t=o,p=e,!1})),t&&!Do(t)){if(_._isStackedMode())return _._stackedColumnVisibility(t,"show"),void _.trigger(ee,{column:t});var S=_._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(s=jo(t,v),g=Xo(_.options.columns)[p],S(t,!0),Mr(yo(e(">table>thead",_.lockedHeader),_.thead,">tr:eq("+s.row+")>th"),s.cell,!0),o=0;o<t.columns.length;o++)g.columns[o].hidden||this.showColumn(t.columns[o]);return _._ariaRemoveHiddenColIndex(),void _.trigger(ee,{column:t})}f=k(t,br(v)),S(t,!0),_._setParentsVisibility(t,!0),_._templates(),_._updateCols(),_._updateLockedCols();var x=_.thead;if(a=f,_.lockedHeader&&y>f?x=_.lockedHeader.find(">table>thead"):a-=y,(l=wr(x).eq(a))[0].style.display="",l[0].classList.remove("k-hidden"),Mr(yo(e(">table>thead",_.lockedHeader),_.thead,">tr.k-filter-row>td"),f,!0),w[0]&&(_._updateCols(w.find(">.k-grid-footer-wrap>table")),_._updateLockedCols(w.find(">.k-grid-footer-locked>table")),Mr(w.find(".k-footer-template>td"),f,!0)),C.columns&&!t.locked)return _._updateContentWidth(),void _.trigger(ee,{column:t});if(_.lockedTable&&y>f?Dr(_.lockedTable.find(">tbody>tr"),f):Dr(_.tbody.children(),f-y),_.lockedTable)_._updateTablesWidth(),_._applyLockedContainersWidth(),_._syncLockedContentHeight(),_._syncLockedHeaderHeight();else if(n=_.wrapper.find(">.k-grid-header table").first().add(_.wrapper.find(">.k-grid-footer table").first()).add(_.table),t.width){for(i=0,u=_.thead.prev().find("col"),o=0,r=u.length;o<r;o+=1)if(c=u[o].style.width,u[o].className.indexOf("k-hierarchy-col")>-1)i+=d(u[o]);else if(u[o].className.indexOf("k-group-col")>-1)i+=d(u[o]);else{if(c.indexOf("%")>-1){i=0;break}i+=parseInt(c,10)}_._footerWidth=null,i&&(n.each((function(){this.style.width=i+_t})),_._footerWidth=i,_._setContentWidth())}else n.width("");_._updateFirstColumnClass(),_._updateStickyColumns(),b.length>0&&_._renderGroupRows(),_._ariaRemoveHiddenColIndex(),_.trigger(ee,{column:t})}}))},_columnVisibilitySetter:function(e){return Bo((e||{}).media)?Ro:Eo},_buildSkeleton:function(){const e=this.virtualCols?this.virtualCols:hr(this.columns);const t=this.dataSource.pageSize()||this.dataSource.total();const o=this._groups();const r=this._isStackedMode();let l="";let n;let i=r?1:e.length+o;this._hasDetails()&&!r&&i++,this._hasVirtualColumns()&&(n=parseInt(this.content.find(vt).first().find("td").first().attr("colspan"),10));for(var a=0;a<t;a++){l+="<tr class='k-table-row' data-skeleton-row>";for(var s=0;s<i;s++)l+=n&&!s?"<td colspan='"+n+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>":"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>";l+="</tr>"}return l},_progress:function(e){var t=this.element;var r=this.options.scrollable&&this.options.scrollable.endless;var l=this.options.loaderType;var n;if(this.options.scrollable&&this.options.scrollable.virtual?t=this.content:this._editContainer&&"popup"===this._editMode()?t=this._editContainer:this.lockedContent||r?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),"skeleton"!=l||this._isExport)this._isExport?this._loaderContainer(e,{message:this.options.messages.loader.exporting}):r&&e?o.ui.progress(t,e,{height:this.content.height(),top:this.content.parent()[0].offsetTop,opacity:!0}):o.ui.progress(t,e);else{const o=t.find("tbody");e?(n=this._buildSkeleton(),r&&(this._currentEndlessRows=o.children(":not([data-skeleton-row])")),o.empty().append(n)):r?(t.find("[data-skeleton-row]").remove(),o.prepend(this._currentEndlessRows)):t.find(".k-skeleton").closest("tbody").empty()}},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=a();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(r){var l,n,i,a=this,s=a.dataSource.view(),d=a.options.navigatable,c=a.virtualScroll||{},u=e(a.current()),p=!1,h=a._groups(),g=h+hr(Lo(a.columns)).length,f=m(a.columns,(function(e){return e.columns!==t})).length>0,b=0,_=a.dataSource.group()&&a.dataSource.group().length>0;const v=a._isStackedMode();if(r&&"itemchange"===r.action&&(a.editable||a.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!a._editableIsClosing))return;if(a._shouldMapHights&&(a._mapCachedRowsHeight("get","uid"),a._shouldMapHights=!1),c.columns&&a._templates(),r&&"remove"===r.action&&a.editable&&a.editable.options.model&&k(a.editable.options.model,r.items)>-1&&a.editable.options.model.unbind(X,a._modelChangeHandler),r=r||{},a.trigger("dataBinding",{action:r.action||"rebind",index:r.index,items:r.items}))return;if(r.action===ce&&a._isVirtualEditable()&&(a._destroyEditable(),a._clearEditableState()),!a._endlessFetchInProgress){const e=a._isAdaptive()?"kendoActionSheet":"kendoWindow";d&&(a._isActiveInTable()||a._editContainer&&a._editContainer.data(e))&&(l=(p=u.is("th"))?u.parent().children(":not(.k-group-cell)").index(u[0]):Math.max(a.cellIndex(u),0),p&&f&&(b=u.parent().index())),a._destroyEditable()}a.options.scrollable&&a.options.scrollable.endless&&!a._pdfInitialized?(clearTimeout(a._progressTimeOut),a._progressTimeOut=setTimeout((function(){a._endlessFetchInProgress||(a._progress(!1),v&&a._toggleGroupableHeader(_))}),250)):a._isExport||(a._progress(!1),v&&a._toggleGroupableHeader(_)),u.length&&(a._currentRowIndex=u.parent().index()),a._hideResizeHandle(),a._data=[],a.columns.length||(a._autoColumns(a._firstDataItem(s[0],h)),g=h+a.columns.length),a._group=h>0||a._group,a._group&&(a._templates(),a._updateCols(),a._updateLockedCols(),a._virtualColScroll||v||a._updateHeader(h),a._group=h>0,a._groupRows=Fr(s)),a.content&&(n=o.scrollLeft(a.content));const C=a.dataSource.group()?.some((e=>e.aggregates))&&a.columns?.some((e=>e.groupFooterTemplate||e.groupHeaderTemplate));if("skeleton"!==a.options.loaderType&&r&&"sync"===r.action&&r.partialUpdate&&r.changedItems&&r.changedItems.length&&!C?(a._data=a.dataSource.flatView(),r.changedItems.forEach((e=>{const t=a.tbody.find("["+o.attr("uid")+"="+e.uid+"]");a._editMode()===ut&&a.dataSource.options.autoSync&&a.dataSource.isLocalTransport()&&a.trigger(Y,{type:"save",model:r.changedItems[0],container:t.find(".k-edit-cell")}),a._displayRow(t)})),a._progress(!1),v&&a._toggleGroupableHeader(_),a._destroyEditable()):(i=a._skipRerenderItemsCount,a._renderContent(s,g,h),a.options.scrollable&&a.options.scrollable.endless&&this.lockedContent&&(a._skipRerenderItemsCount=i),a._renderLockedContent(s,g,h)),a._virtualColScroll||(a._footer(),a._renderNoRecordsContent(),a._togglePagerVisibility(),a._setContentHeight(),a._setContentWidth(a.content&&n)),a.lockedTable&&(c.rows?a.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):a.touchScroller?a.touchScroller.movable.trigger("change"):(a.wrapper.one("scroll",(function(e){e.stopPropagation()})),a.content.trigger("scroll"))),!a._endlessFetchInProgress&&!a._rowDropping)if(v&&a.options.navigatable)a._setCurrentStackedCell();else{const e=a._isLocked()&&u.closest(".k-grid-header-locked").length&&p;a._restoreCurrent(l,p,b,e)}if(a.touchScroller&&a.touchScroller.contentResized(),a.selectable&&a.selectable.resetTouchEvents(),a._checkBoxSelection&&a._toggleHeaderCheckState(!1),a.options.persistSelection&&(a.selectable&&!o.ui.Selectable.parseOptions(a.options.selectable).cell||a._checkBoxSelection)&&(a.items().length||a.dataSource._isGroupPaged())&&a._restoreSelection(),a._restoreHighlight(),a._hasAIHighlight&&a._applyAIHighlight(a._hasAIHighlight),a._hasAISelection&&!a._isSingleSelectionEnabled()&&a._applyAISelection(a._hasAISelection),a.options.persistSelection||(a._selectedIds={}),a._hasReorderableRows()&&(a._draggableRows(),a._reorderableRows()),a.options.selectable&&a.options.selectable.cellAggregates&&a._calculateAggregatesForSelected(),v){const e=a._getStackedLayoutSettings();const t=a.tbody.find(".k-grid-stack-row");e.colClass?t.addClass(e.colClass):e.colsConfig&&t.css("grid-template-columns",e.colsConfig)}a._aria(),a.trigger(oe)},_getSchemaIdField:function(){const e=this.dataSource.options.schema.model;return v(e)?e.fn.idField:e&&e.id},_restoreCurrent:function(o,r,l,n){if(!(o===t||o<0)){if(this._removeCurrent(),r){const e=n?this.lockedHeader:this.thead;this._setCurrent(e.find(`tr:eq(${l}) th:not(.k-group-cell)`).eq(o),!1,this._hasVirtualColumns())}else{var i=0;var a=this.virtualScroll||{};this._rowVirtualIndex?i=a.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:this._currentRowIndex?i=this._currentRowIndex:o=0;var s=e();var d;let t;this.lockedTable&&(s=this._shouldFocusInLastRow?this.lockedTable.find(">tbody>tr").last():this._shouldFocusInFirstRow?this.lockedTable.find(">tbody>tr").first():this.lockedTable.find(">tbody>tr").eq(i)),t=this._shouldFocusInLastRow?this.tbody.children().last():this._shouldFocusInFirstRow?this.tbody.children().first():this.tbody.children().eq(i),s=s.add(t),this._hasVirtualColumns()&&(d=parseInt(s.find("td").first().attr("colspan"),10),o=this._virtualCellIndex-(d>1?d-1:0));var c=s.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o);if(!c.length||o<0)return;this._hasVirtualColumns()?this._setCurrent(c,!0,!0):this._setCurrent(c)}this._current&&Gr(this.table,!0)}},_restoreSelection:function(){var e,t=this,o=t.items(),r=t._getSchemaIdField();e=m(o,(function(e){var o=t.dataItem(e)[r];if(t._selectedIds[o])return e})),t.select(e)},_getSelectedRowUids:function(){var t,r,l=this.select(),n=[];for(let i=0;i<l.length;i++)t=e(l[i]),o.ui.Selectable.parseOptions(this.options.selectable).cell&&(t=t.closest(vt)),r=t.data("uid"),-1===n.indexOf(r)&&n.push(r);return n},_getSelectedColumnFields:function(){var t,r,l=this,n=l.select(),i=hr(l.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)),a=[];if(!o.ui.Selectable.parseOptions(l.options.selectable).cell)return i.map((e=>e.field));for(let o=0;o<n.length;o++)r=e(n[o]).index(),t=l.thead.find("th:eq("+r+")").data("field"),-1===a.indexOf(t)&&a.push(t);return a},_cleanupDetailItems:function(){this._hasDetails()&&this.tbody.find(".k-detail-cell").empty()},_renderContent:function(e,t,r){var l,n,i,a,s,d=this,c="",u=null!=d.lockedContent,p=d.options.scrollable,h={rowTemplate:d.rowTemplate,altRowTemplate:d.altRowTemplate,groupFooterTemplate:d.groupFooterTemplate,groupHeaderColumnTemplate:d.groupHeaderColumnTemplate};const g=d._isStackedMode();if(p&&p.endless&&!d.dataSource.options.endless&&(d._skipRerenderItemsCount=0,d.content&&(d.content[0].scrollTop=0)),i=d._skipRerenderItemsCount>0,t=u?t-hr(pr(d.columns)).length:t,g&&(t=d.table.find("col").length),r>0)for(t=u?t-r:t,d.detailTemplate&&!g&&t++,d.groupFooterTemplate&&(d._groupAggregatesDefaultObject=d.dataSource.aggregates()),d.options.scrollable.endless&&(s=d.dataSource.flatView().length),l=0,n=e.length;l<n;l++)d._skippedGroups||(d._skippedGroups=[]),a=s&&l===e.length-1&&s!==d.dataSource.total(),c+=d._groupRowHtml(e[l],t,0,u?Zr:Xr,h,u,a,!1);else c+=d._rowsHtml(e,h);i?(d.tbody.append(c),o.applyStylesFromKendoAttributes(d.tbody,["display","left","right"]),clearTimeout(d._endlessFetchTimeOut),d._endlessFetchTimeOut=setTimeout((function(){d._groupToCollapse&&(d.collapseGroup(d._groupToCollapse),d._groupToCollapse=null)})),d._endlessFetchInProgress=null):d.tbody=xr(d.tbody,d.table,c,this.options.size)},_renderGroupRows:function(){var t,r,l,n,i,a,s,d,c,u,p,h,f,b,k,_,v,C=this,w=C._groupRows,y=C.wrapper.find(x+Pe),S=C._groups(),T=null!=C.lockedContent;y.each((function(y,x){b=e(x),u=b.closest("table").parent(),p=u.is(".k-grid-content-locked"),r=hr(Lo(p?sr(C.columns):dr(C.columns))),k=b.find(".k-group-cell").length,T?(t=p?Xr:Zr,l=p?r.length+S-k:r.length):(t=Xr,l=r.length+S-k),n=y>=w.length?w[y-w.length]:w[y],i=n.field,a=m(br(C.columns),(function(e){return e.field==i}))[0]||{},v=!(a.groupHeaderTemplate||!Lo(C.columns)[0].groupHeaderColumnTemplate)&&Lo(C.columns)[0],s=a.groupHeaderTemplate?a.groupHeaderTemplate:Lo(C.columns)[0].groupHeaderColumnTemplate,d=(a.title&&(C.options.encodeTitles?el(a.title,!0):a.title)||el(i,!0))+": "+Er(n.value,a.format,a.values,a.encoded),c=C._groupData(n,!1,v),_=p?C.lockedGroupHeaderColumnTemplate:C.groupHeaderColumnTemplate,s&&(d=typeof s===nt?s(c):o.template(s)(c)),h=b.prev().length?b.prev():b.parent(),f=e(_?_(g({},c,{groupCells:k,colspan:S-k,text:d})):t(l,k,d,null,null,null,Ut,C._isStackedMode())),o.applyStylesFromKendoAttributes(f,["display","left","right"]),h.is("tbody")?h.prepend(f):h.after(f),b.remove()}))},_renderLockedContent:function(e,t,o){var r,l,n,i,a="",s=null,d={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var c=this.lockedTable;if(s=this._skipRerenderItemsCount>0,o>0)for(t-=Lo(br(dr(this.columns))).length,this.options.scrollable.endless&&(i=this.dataSource.flatView().length),r=0,l=e.length;r<l;r++)n=i&&r===e.length-1&&i!==this.dataSource.total(),a+=this._groupRowHtml(e[r],t,0,Xr,d,!1,n,!0);else a=this._rowsHtml(e,d);s?c.children("tbody").append(a):xr(c.children("tbody"),c,a,this.options.size),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){!1===this.options.pageable.alwaysVisible&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var o,r=e[0].rows,l=r.length,n=t[0].rows,i=e.add(t),a=i.length,s=[];for(o=0;o<l&&n[o];o++)r[o].style.height&&(r[o].style.height=n[o].style.height="");for(o=0;o<l&&n[o];o++){var d=r[o].getBoundingClientRect().height;var c=n[o].getBoundingClientRect().height;var u=0;d>c?u=d:d<c&&(u=c),s.push(u)}for(o=0;o<a;o++)i[o].style.display=Mt;for(o=0;o<l;o++)s[o]&&(r[o].style.height=n[o].style.height=s[o]+_t);for(o=0;o<a;o++)i[o].style.display=""}});function qr(e,t){var o;var r=e.offsetHeight;var l=t.offsetHeight;r>l?o=r+_t:r<l&&(o=l+_t),o&&(e.style.height=t.style.height=o)}function Vr(e,t){var o,r,l;if(typeof e===it&&e===t)return e;if(h(e)&&e.name===t)return e;if(b(e))for(o=0,r=e.length;o<r;o++)if(typeof(l=e[o])===it&&l===t||l.name===t)return l;return null}function Gr(t,r){if(t&&0!==t.length)if(!0===r){t=e(t);var l=o.scrollLeft(t.parent());o.focusElement(t),o.scrollLeft(t.parent(),l)}else e(t).one("focusin",(function(e){e.preventDefault()})).trigger("focus")}function Wr(e,o){return e.options.groupable&&(o.groupable||o.groupable===t)}function $r(t,o){return!!e.grep(t,(function(e){return e.field===o})).length}function Nr(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function jr(t){return e(t).is(":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-svg-icon>svg,span.k-svg-icon>svg>path,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on")}function Ur(t){var r=this,l=e(t.currentTarget),n=l.is("th"),i=this.table.add(this.lockedTable),a=this.thead&&this.thead.parent().add(e(">table",this.lockedHeader)),s=jr(t.target),d=e(t.target).is(".k-checkbox"),c=e(t.target),u=l.closest("table")[0];!r._isStackedMode()&&s&&l.find(o.roleSelector("filtercell")).length?this._setCurrent(l,null,null,!0):u!==i[0]&&u!==i[1]&&u!==a[0]&&u!==a[1]||c.is(P+","+L+",[ref='expand-detail-button'], [ref='collapse-detail-button']")||(this.options.navigatable&&this._setCurrent(l,!1,d),!n&&s||setTimeout((function(){var t=e(o._activeElement());(t.hasClass("k-widget")||t.hasClass("k-dropdownlist")||t.is(".k-upload .k-upload-button"))&&!t.hasClass("k-grid-pager")||t.hasClass("k-select-checkbox")||!r.table||!t.is(we)&&jr(o._activeElement())&&e.contains(u,o._activeElement())||Gr(r.table[0],!0)})),n&&!o.support.touch&&t.preventDefault())}function Kr(e,t){if(!t)return 0;var r=0;return o.support.browser.webkit&&(r=e.width()),r}function Qr(t,o){var r;var l;return!!t&&!!((o=e(o))[0]&&y(t[0],o[0])&&(r=o.offset().top-t.offset().top,l=o.outerHeight()/2,(r>=0||S.abs(r)<=l)&&S.floor(r+l)<=t.height()))}function Yr(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row")||e.hasClass("k-grid-stack-edit-cell"))}function Jr(t,r,l){return({colspan:n,text:i,expanded:a,isRtl:s})=>{let d=n+t>0?n+t:0;let c="caret-alt-"+(s?"left":"right");return`<td class="k-table-td" colspan="${n+t}"><p class="k-reset">`+o.ui.icon(e(`<a href="\\#" tabindex="-1" ${wt}="${a?mt:bt}"></a>`),{icon:a?"caret-alt-down":c})+i+`</p>${l||""}</td>${r?"":new Array(d).join("<td hidden group-header-spanned-hidden></td>")}`}}function Xr(t,r,l,n,i,a,s,d,c){return"<tr "+(a?'data-group-uid="'+i+'"':"")+'class="k-table-group-row k-grouping-row k-table-row">'+ho(r)+'<td class="k-table-td" colspan="'+t+'" aria-expanded="'+!!n+'"><p class="k-reset">'+o.ui.icon(e('<a href="#" tabindex="-1" '+wt+'="'+(n?mt:bt)+'"></a>'),{icon:n?"caret-alt-down":"caret-alt-"+(s?"left":"right")})+l+`</p>${c||""}</td>${d?"":new Array(t).join("<td hidden group-header-spanned-hidden></td>")}</tr>`}function Zr(e){return'<tr class="k-table-group-row k-grouping-row k-table-row"><td class="k-table-td" colspan="'+e+'" aria-expanded="true">'+`<p class="k-reset">&nbsp;</p></td>${new Array(e).join("<td hidden group-header-spanned-hidden></td>")}</tr>`}function el(e,t){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,(function(e){return t?"\\"+e:"&quot;"})).replace(/'/g,"&#39;")}function tl(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function ol(e){return!(!1===e.exportable||e.exportable&&!1===e.exportable.excel)}o.ExcelMixin&&o.ExcelMixin.extend(Or.prototype),o.PDFMixin&&(o.PDFMixin.extend(Or.prototype),Or.prototype._drawPDF_autoPageBreak=function(r){var l=this;var n=new e.Deferred;var i=l.dataSource;var a=l.options.pdf.allPages;var s=l.wrapper.find("> table > tbody, .k-grid-content > table > tbody").first();var d=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});var c;l.toggleUnexportableColumns(l.columns),(c=l.wrapper.clone().css({height:rt,width:rt}).appendTo(d)).find(".k-grid-content").css({height:rt,width:rt,overflow:"visible"}),c.find("> table, .k-grid-header table, .k-grid-content > table, .k-grid-footer table").css({height:rt,width:"100%",overflow:"visible"}),c.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),c.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0});var u=c.find("> table > tbody, .k-grid-content > table > tbody").first().empty();var p=i.page();function h(){d.appendTo(document.body);var t=e.extend({},l.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});o.drawing.drawDOM(c,t).always((function(){d.remove()})).then((function(e){n.resolve(e),l.toggleUnexportableColumns(l.columns,!0)})).fail((function(e){n.reject(e)}))}function g(){var e=i.page();var o=a?i.totalPages():1;u.append(s.children("tr:not(.k-detail-row)")),e<o?i.page(e+1):(i.unbind("change",g),a&&p!==t?(i.one("change",h),i.page(p)):(l.refresh(),h()))}return a?(i.bind("change",g),i.page(1)):g(),n.promise()},Or.prototype.toggleUnexportableColumns=function(e,t){var o=e.length;var r;var l;var n;var i;for(var a=0;a<o;a++)l=(r=e[a]).exportable,t?r._toggledDuringExport?(r._toggledDuringExport=!1,r.hidden?this.showColumn(r):this.hideColumn(r)):r.columns&&this.toggleUnexportableColumns(r.columns,t):("object"==typeof r.exportable&&(l=r.exportable.pdf),n=!r.hidden&&!1!==l,i=r.hidden&&!0===l,(l=n||i)||r.hidden?l&&r.hidden?(r._toggledDuringExport=!0,this.showColumn(r)):l&&r.columns&&this.toggleUnexportableColumns(r.columns):(r._toggledDuringExport=!0,this.hideColumn(r)))},Or.prototype._drawPDF=function(r){var l=this;if(l.options.pdf.paperSize&&l.options.pdf.paperSize!=rt)return l._drawPDF_autoPageBreak(r);var n=new e.Deferred;var i=l.dataSource;var a=l.options.pdf.allPages;var s=new o.drawing.Group;var d=i.page();function c(){l.toggleUnexportableColumns(l.columns),l._drawPDFShadow({width:l.wrapper.width()},{avoidLinks:l.options.pdf.avoidLinks}).done((function(e){var o=i.page();var u=a?i.totalPages():1;var p={page:e,pageNumber:o,progress:o/u,totalPages:u};l.toggleUnexportableColumns(l.columns,!0),r.notify(p),s.append(p.page),o<u?i.page(o+1):a&&d!==t?(i.unbind("change",c),i.one("change",(function(){n.resolve(s)})),i.page(d)):n.resolve(s)})).fail((function(e){n.reject(e)}))}return a?(i.bind("change",c),i.page(1)):c(),n.promise()}),r.plugin(Or),r.plugin(io),g(o.ui.grid,{defaultBodyContextMenu:to,defaultHeadContextMenu:oo,defaultGroupsContextMenu:ro})}(window.kendo.jQuery);var E=kendo;e.__meta__={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter","sortable","toolbar","html.button","icons","menu","loader","html.loadercontainer","badge","aiprompt","loaderContainer.chunk"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window","textbox","form"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["dialog","pane","switch"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing"]}]},e.default=E,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.grid.min.js.map
